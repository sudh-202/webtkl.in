//Unite Gallery, Version: 1.7.60, released 11 July 2022


function debugLine(html,addRandom,addHtml){!0===html&&(html="true"),!1===html&&(html="false");var output=html;if("object"==typeof html)for(name in output="",html){var value=html[name];output+=" "+name+": "+value}if(!0!=addRandom||addHtml||(output+=" "+Math.random()),!0==addHtml){var objLine=jQuery("#debug_line");objLine.width(200),objLine.height()>=500&&objLine.html(""),output=objLine.html()+"<br> -------------- <br>"+output}jQuery("#debug_line").show().html(output)}function debugSide(obj){var html="";for(name in obj){var value=obj[name];html+=name+" : "+value+"<br>"}jQuery("#debug_side").show().html(html)}function trace(str){"undefined"!=typeof console&&console.log(str)}function UGFunctions(){var g_browserPrefix=null,t=this,g_temp={starTime:0,arrThemes:[],isTouchDevice:-1,isRgbaSupported:-1,timeCache:{},dataCache:{},lastEventType:"",lastEventTime:0,lastTouchStartElement:null,touchThreshold:700,handle:null};function addEvent(evnt,elem,func){elem.addEventListener?elem.addEventListener(evnt,func,!1):elem.attachEvent?elem.attachEvent("on"+evnt,func):elem[evnt]=func}this.debugVar="",this.getvalopt={FORCE_BOOLEAN:"force_boolean",FORCE_NUMERIC:"force_numeric",TRIM:"trim"},this.z__________GENERAL___________=function(){},this.getVal=function(b,d,c,e){if(!c)var c="";var a="";switch(a=b&&"object"==typeof b?!1==b.hasOwnProperty(d)?c:b[d]:c,e){case t.getvalopt.FORCE_BOOLEAN:a=t.strToBool(a);break;case t.getvalopt.TRIM:a=String(a),a=jQuery.trim(a);break;case t.getvalopt.FORCE_NUMERIC:"string"==typeof(a=jQuery.trim(a))&&(a.replace("px",""),a=Number(a))}return a},this.z__________FULL_SCREEN___________=function(){},this.toFullscreen=function(a,b){if(a.requestFullscreen)a.requestFullscreen();else if(a.mozRequestFullScreen)a.mozRequestFullScreen();else if(a.webkitRequestFullscreen)a.webkitRequestFullscreen();else{if(!a.msRequestFullscreen)return!1;a.msRequestFullscreen()}return!0},this.exitFullscreen=function(){if(!1==t.isFullScreen())return!1;if(document.exitFullscreen)document.exitFullscreen();else if(document.cancelFullScreen)document.cancelFullScreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},this.addFullScreenChangeEvent=function(a){document.webkitCancelFullScreen?addEvent("webkitfullscreenchange",document,a):document.msExitFullscreen?addEvent("MSFullscreenChange",document,a):document.mozCancelFullScreen?addEvent("mozfullscreenchange",document,a):addEvent("fullscreenchange",document,a)},this.destroyFullScreenChangeEvent=function(){jQuery(document).unbind("fullscreenChange"),jQuery(document).unbind("mozfullscreenchange"),jQuery(document).unbind("webkitfullscreenchange"),jQuery(document).unbind("MSFullscreenChange")},this.getFullScreenElement=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},this.isFullScreen=function(){var a;return!!(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement)},this.z__________GET_PROPS___________=function(){},this.getBrowserPrefix=function(){if(null!==g_browserPrefix)return g_browserPrefix;var b=["webkit","Moz","ms","O"],c=document.createElement("div");for(var d in b){var a=b[d];if(a+"Transform" in c.style)return g_browserPrefix=a=a.toLowerCase(),a}return g_browserPrefix="",""},this.getImageInsideParentDataByImage=function(a,c,d){var e=a.parent(),b=t.getImageOriginalSize(a);return t.getImageInsideParentData(e,b.width,b.height,c,d)},this.getImageInsideParentData=function(m,i,j,l,a,c,f){if(!a)var a={};var h={};if(void 0===c)var c=m.width();if(void 0===f)var f=m.height();a.padding_left&&(c-=a.padding_left),a.padding_right&&(c-=a.padding_right),a.padding_top&&(f-=a.padding_top),a.padding_bottom&&(f-=a.padding_bottom);var d=null,b="100%",e=null,g=null,n="display:block;margin:0px auto;";if(i>0&&j>0){if("down"==l&&i<c&&j<f)b=j,g=(c-(d=i))/2,e=(f-b)/2;else if("fill"==l){var k=i/j;(d=(b=f)*k)<c?(b=(d=c)/k,g=0,e=Math.round(-((b-f)/2*1))):(e=0,g=Math.round(-((d-c)/2*1)))}else{var k=i/j;d=(b=f)*k,e=0,g=(c-d)/2,"fitvert"!=l&&d>c&&(b=(d=c)/k,g=0,e=(f-b)/2)}d=Math.floor(d),b=Math.floor(b),e=Math.floor(e),g=Math.floor(g),n="position:absolute;"}return a.padding_top&&(e+=a.padding_top),a.padding_left&&(g+=a.padding_left),h.imageWidth=d,h.imageHeight=b,h.imageTop=e,h.imageLeft=g,h.imageRight=g+d,0==e||"100%"==b?h.imageBottom=null:h.imageBottom=e+b,h.style=n,h},this.getElementCenterPosition=function(e,a){var h=e.parent(),f=t.getElementSize(e),g=t.getElementSize(h),c=g.width,d=g.height;a&& void 0!==a.padding_top&&(d-=a.padding_top),a&& void 0!==a.padding_bottom&&(d-=a.padding_bottom),a&& void 0!==a.padding_left&&(c-=a.padding_left),a&& void 0!==a.padding_right&&(c-=a.padding_right);var b={};return b.left=Math.round((c-f.width)/2),b.top=Math.round((d-f.height)/2),a&& void 0!==a.padding_top&&(b.top+=a.padding_top),a&& void 0!==a.padding_left&&(b.left+=a.padding_left),b},this.getElementCenterPoint=function(d,c){if(!c)var c=!1;var b=t.getElementSize(d),a={};return a.x=b.width/2,a.y=b.height/2,!0==c&&(a.x+=b.left,a.y+=b.top),a.x=Math.round(a.x),a.y=Math.round(a.y),a},this.getMousePosition=function(a,c){var b={pageX:a.pageX,pageY:a.pageY,clientX:a.clientX,clientY:a.clientY};if(a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches.length>0&&(b.pageX=a.originalEvent.touches[0].pageX,b.pageY=a.originalEvent.touches[0].pageY,b.clientX=a.originalEvent.touches[0].clientX,b.clientY=a.originalEvent.touches[0].clientY),c){var d=c.offset();b.mouseX=b.pageX-d.left,b.mouseY=b.pageY-d.top}return b},this.getMouseElementPoint=function(a,b){var c={x:a.pageX,y:a.pageY};return t.getElementLocalPoint(c,b)},this.getElementLocalPoint=function(b,d){var a={},c=d.offset();return a.x=Math.round(b.x-c.left),a.y=Math.round(b.y-c.top),a},this.getImageOriginalSize=function(b,e,f){if(void 0!==e&& void 0!==f)return{width:e,height:f};var c=b[0];if(void 0===c)throw new Error("getImageOriginalSize error - Image not found");var a={};if(void 0!==c.naturalWidth)return a.width=c.naturalWidth,a.height=c.naturalHeight,a;if("number"==typeof b.data("naturalWidth")){var a={};return a.width=b.data("naturalWidth"),a.height=b.data("naturalHeight"),a}var d=new Image;return(d.src=c.src,d.complete)?(a.width=d.width,a.height=d.height,b.data("naturalWidth",a.width),b.data("naturalHeight",a.height),a):{width:0,height:0}},this.getimageRatio=function(a){var b=t.getImageOriginalSize(a),c=t.getElementSize(a),d=c.width/b.width;return d},this.isImageFitParent=function(a){var d=a.parent(),b=t.getElementSize(a),c=t.getElementSize(d);return b.width<=c.width&&b.height<=c.height},this.getElementSize=function(b){if(void 0===b)throw new Error("Can't get size, empty element");var a=b.position();return a.height=b.outerHeight(),a.width=b.outerWidth(),a.left=Math.round(a.left),a.top=Math.round(a.top),a.right=a.left+a.width,a.bottom=a.top+a.height,a},this.isElementBiggerThenParent=function(a){var d=a.parent(),b=t.getElementSize(a),c=t.getElementSize(d);return b.width>c.width||b.height>c.height},this.isPointInsideElement=function(a,b){return!1!=(a.x>=0&&a.x<b.width)&& !1!=(a.y>=0&&a.y<b.height)},this.getElementRelativePos=function(c,a,b,f){if(!f)var f=c.parent();if("number"==typeof c)var d={width:c,height:c};else var d=t.getElementSize(c);var e=t.getElementSize(f);switch(a){case"top":case"left":a=0,b&&(a+=b);break;case"center":a=Math.round((e.width-d.width)/2),b&&(a+=b);break;case"right":a=e.width-d.width,b&&(a-=b);break;case"middle":a=Math.round((e.height-d.height)/2),b&&(a+=b);break;case"bottom":a=e.height-d.height,b&&(a-=b)}return a},this.getScreenVisibleSize=function(){document.body.clientWidth,document.body.clientHeight,jQuery(document).scrollTop();var c=jQuery(document),a=c.scrollLeft(),b=c.scrollTop();a=Math.round(a),b=Math.round(b);var f=window.innerHeight,g=window.innerWidth,d=b+f,e=a+g,h={top:b,left:a,height:d-b,width:e-a,right:e,bottom:d};return h},this.isElementsIntersect=function(a,b){return!(a.right<b.left)&&!(a.left>b.right)&&!(a.bottom<b.top)&&!(a.top>b.bottom)},this.isElementInsideScreen=function(a){var b=t.getElementSize(a),c=t.getScreenVisibleSize(),d=t.isElementsIntersect(c,b);return d},this.z_________SET_ELEMENT_PROPS_______=function(){},this.zoomImageInsideParent=function(a,q,j,r,i,s,t){if(!j)var j=1.2;if(!i)var i="fit";var k,g,l,m,b=j,x=a.parent(),e=t.getElementSize(a),f=t.getImageOriginalSize(a),h=!1,n=0,o=0,c=0,d=0;if(r){var p=t.getMouseElementPoint(r,a);h=t.isPointInsideElement(p,e),c=p.x,d=p.y}else h=!1;if(!1==h){var u=t.getElementCenterPoint(a);c=u.x,d=u.y}if(!0==q)k=e.height*b,g=e.width*b,0!=c&&(n=-(c*b-c)),0!=d&&(o=-(d*b-d));else{k=e.height/b,g=e.width/b;var y=t.getImageInsideParentData(x,f.width,f.height,i,t);if(g<y.imageWidth)return t.scaleImageFitParent(a,f.width,f.height,i,t),!0;!0==h&&(0!=c&&(n=-(c/b-c)),0!=d&&(o=-(d/b-d)))}if(s){var v=1;if(0!=f.width&&(v=g/f.width),v>s)return!1}if(t.setElementSize(a,g,k),!1==q&& !1==h){var w=t.getElementCenterPosition(a);l=w.left,m=w.top}else l=e.left+n,m=e.top+o;return t.placeElement(a,l,m),!0},this.placeElement=function(g,a,b,c,d,h){if(!1==jQuery.isNumeric(a)|| !1==jQuery.isNumeric(b)){if(!h)var h=g.parent();var e=t.getElementSize(g),f=t.getElementSize(h)}if(!1==jQuery.isNumeric(a))switch(a){case"left":a=0,c&&(a+=c);break;case"center":a=Math.round((f.width-e.width)/2),c&&(a+=c);break;case"right":a=f.width-e.width,c&&(a-=c)}if(!1==jQuery.isNumeric(b))switch(b){case"top":b=0,d&&(b+=d);break;case"middle":case"center":b=Math.round((f.height-e.height)/2),d&&(b+=d);break;case"bottom":b=f.height-e.height,d&&(b-=d)}var i={position:"absolute",margin:"0px"};null!==a&&(i.left=a),null!==b&&(i.top=b),g.css(i)},this.placeElementInParentCenter=function(a){t.placeElement(a,"center","middle")},this.setElementSizeAndPosition=function(a,b,c,d,e){var f={width:d+"px",height:e+"px",left:b+"px",top:c+"px",position:"absolute",margin:"0px"};a.css(f)},this.setElementSize=function(c,d,a){var b={width:d+"px"};null!=a&&(b.height=a+"px"),c.css(b)},this.cloneElementSizeAndPos=function(b,e,f,c,d){var a=b.position();if(void 0==a)throw new Error("Can't get size, empty element");!0===f?(a.height=b.outerHeight(),a.width=b.outerWidth()):(a.height=b.height(),a.width=b.width()),a.left=Math.round(a.left),a.top=Math.round(a.top),c&&(a.left+=c),d&&(a.top+=d),t.setElementSizeAndPosition(e,a.left,a.top,a.width,a.height)},this.placeImageInsideParent=function(c,d,e,f,g,h){var a=t.getImageInsideParentData(d,e,f,g,h),b="<img";return null!==a.imageWidth&&(b+=" width = '"+a.imageWidth+"'",a.style+="width:"+a.imageWidth+";"),null!=a.imageHeight&&("100%"==a.imageHeight?(b+=" height = '"+a.imageHeight+"'",a.style+="height:"+a.imageHeight+";"):(b+=" height = '"+a.imageHeight+"'",a.style+="height:"+a.imageHeight+"px;")),null!==a.imageTop&&(a.style+="top:"+a.imageTop+"px;"),null!==a.imageLeft&&(a.style+="left:"+a.imageLeft+"px;"),c=t.escapeDoubleSlash(c),b+=" style='"+a.style+"'",b+=' src="'+c+'"',b+=">",d.html(b),d.children("img")},this.scaleImageCoverParent=function(h,c,k){if("number"==typeof c)var d=c,e=k;else var d=c.outerWidth(),e=c.outerHeight();var i=t.getImageOriginalSize(h),l=i.width,m=i.height,j=l/m,a=e,b=a*j,f=0,g=0;b<d?(a=(b=d)/j,g=0,f=Math.round(-((a-e)/2*1))):(f=0,g=Math.round(-((b-d)/2*1))),b=Math.round(b),a=Math.round(a),h.css({width:b+"px",height:a+"px",left:g+"px",top:f+"px"})},this.scaleImageFitParent=function(d,e,f,g,h){var i=d.parent(),a=t.getImageInsideParentData(i,e,f,g,h),c=!1,b={};return null!==a.imageWidth&&(c=!0,d.removeAttr("width"),b.width=a.imageWidth+"px"),null!=a.imageHeight&&(c=!0,d.removeAttr("height"),b.height=a.imageHeight+"px"),null!==a.imageTop&&(c=!0,b.top=a.imageTop+"px"),null!==a.imageLeft&&(c=!0,b.left=a.imageLeft+"px"),!0==c&&(b.position="absolute",b.margin="0px 0px",d.css(b)),a},this.scaleImageByHeight=function(b,a,d,e){var c=t.getImageOriginalSize(b,d,e),f=Math.round(a*(c.width/c.height));a=Math.round(a),t.setElementSize(b,f,a)},this.scaleImageByWidth=function(b,a,d,e){var c=t.getImageOriginalSize(b,d,e),f=Math.round(a/(c.width/c.height));a=Math.round(a),t.setElementSize(b,a,f)},this.scaleImageExactSizeInParent=function(g,o,p,b,c,q){var r=g.parent(),d=t.getElementSize(r);d.width<b&&(b=d.width),d.height<c&&(c=d.height);var e=t.getImageInsideParentData(null,o,p,q,null,b,c),k=b,l=c,m=e.imageLeft,h=e.imageLeft,n=e.imageTop,i=e.imageTop,s=Math.round((d.width-b)/2),t=Math.round((d.height-c)/2),u=e.imageWidth+m+h,f=b-u;0!=f&&(h+=f);var v=e.imageHeight+n+i,f=c-v;0!=f&&(i+=f),g.removeAttr("width"),g.removeAttr("height");var a={position:"absolute",margin:"0px 0px"};a.width=k+"px",a.height=l+"px",a.left=s+"px",a.top=t+"px",a["padding-left"]=m+"px",a["padding-top"]=n+"px",a["padding-right"]=h+"px",a["padding-bottom"]=i+"px",g.css(a);var j={};return j.imageWidth=k,j.imageHeight=l,j},this.showElement=function(c,a,b){c.show().fadeTo(0,1),a&&a.show().fadeTo(0,1),b&&b.show().fadeTo(0,1)},this.z_________GALLERY_RELATED_FUNCTIONS_______=function(){},this.disableButton=function(b,a){if(!a)var a="ug-button-disabled";!1==t.isButtonDisabled(b,a)&&b.addClass(a)},this.convertCustomPrefixOptions=function(a,b,d){if(!b)return a;var c={};return jQuery.each(a,function(a,e){0===a.indexOf(b+"_"+d+"_")?c[a.replace(b+"_"+d+"_",d+"_")]=e:c[a]=e}),c},this.enableButton=function(b,a){if(!a)var a="ug-button-disabled";!0==t.isButtonDisabled(b,a)&&b.removeClass(a)},this.isButtonDisabled=function(b,a){if(!a)var a="ug-button-disabled";return!!b.hasClass(a)},this.z_________MATH_FUNCTIONS_______=function(){},this.normalizeSetting=function(b,c,e,f,a,d){if(!d)var d=!1;return a=b+(c-b)*((a-e)/(f-e)),!0==d&&(a<b&&(a=b),a>c&&(a=c)),a},this.getNormalizedValue=function(a,c,d,e,b){var f=(b-a)/(c-a);return b=a+(e-d)*f},this.getDistance=function(a,b,c,d){return Math.round(Math.sqrt(Math.abs((c-a)*(c-a)+(d-b)*(d-b))))},this.getMiddlePoint=function(b,c,d,e){var a={};return a.x=b+Math.round((d-b)/2),a.y=c+Math.round((e-c)/2),a},this.getNumItemsInSpace=function(b,c,a){return Math.floor((b+a)/(c+a))},this.getNumItemsInSpaceRound=function(b,c,a){return Math.round((b+a)/(c+a))},this.getSpaceByNumItems=function(a,b,c){return a*b+(a-1)*c},this.getItemSizeInSpace=function(b,a,c){return Math.floor((b-(a-1)*c)/a)},this.getColX=function(a,b,c){return a*(b+c)},this.getColByIndex=function(a,b){return b%a},this.getColRowByIndex=function(a,b){var c=Math.floor(a/b),d=Math.floor(a%b);return{col:d,row:c}},this.getIndexByRowCol=function(a,b,c){return a<0||b<0?-1:a*c+b},this.getPrevRowSameColIndex=function(c,a){var b=t.getColRowByIndex(c,a);return t.getIndexByRowCol(b.row-1,b.col,a)},this.getNextRowSameColIndex=function(c,a){var b=t.getColRowByIndex(c,a);return t.getIndexByRowCol(b.row+1,b.col,a)},this.z_________DATA_FUNCTIONS_______=function(){},this.setGlobalData=function(a,b){jQuery.data(document.body,a,b)},this.getGlobalData=function(a){return jQuery.data(document.body,a)},this.z_________EVENT_DATA_FUNCTIONS_______=function(){},this.handleScrollTop=function(b){if(!1==t.isTouchDevice())return null;var a=t.getStoredEventData(b),d=15,e=15;if(null===a.scrollDir&&(Math.abs(a.diffMouseX)>d?a.scrollDir="hor":Math.abs(a.diffMouseY)>e&&Math.abs(a.diffMouseY)>Math.abs(a.diffMouseX)&&(a.scrollDir="vert",a.scrollStartY=a.lastMouseClientY,a.scrollOrigin=jQuery(document).scrollTop(),g_temp.dataCache[b].scrollStartY=a.lastMouseClientY,g_temp.dataCache[b].scrollOrigin=a.scrollOrigin),g_temp.dataCache[b].scrollDir=a.scrollDir),"vert"!==a.scrollDir)return a.scrollDir;jQuery(document).scrollTop();var c=a.scrollOrigin-(a.lastMouseClientY-a.scrollStartY);return c>=0&&jQuery(document).scrollTop(c),a.scrollDir},this.wasVerticalScroll=function(a){return"vert"===t.getStoredEventData(a).scrollDir},this.storeEventData=function(e,f,c){var a=t.getMousePosition(e),d=jQuery.now(),b={startTime:d,lastTime:d,startMouseX:a.pageX,startMouseY:a.pageY,lastMouseX:a.pageX,lastMouseY:a.pageY,startMouseClientY:a.clientY,lastMouseClientY:a.clientY,scrollTop:jQuery(document).scrollTop(),scrollDir:null};c&&(b=jQuery.extend(b,c)),g_temp.dataCache[f]=b},this.updateStoredEventData=function(e,c,d){if(!g_temp.dataCache[c])throw new Error("updateEventData error: must have stored cache object");var a=g_temp.dataCache[c],b=t.getMousePosition(e);a.lastTime=jQuery.now(),void 0!==b.pageX&&(a.lastMouseX=b.pageX,a.lastMouseY=b.pageY,a.lastMouseClientY=b.clientY),d&&(a=jQuery.extend(a,d)),g_temp.dataCache[c]=a},this.getStoredEventData=function(b,c){if(!g_temp.dataCache[b])throw new Error("updateEventData error: must have stored cache object");var a=g_temp.dataCache[b];return a.diffMouseX=a.lastMouseX-a.startMouseX,a.diffMouseY=a.lastMouseY-a.startMouseY,a.diffMouseClientY=a.lastMouseClientY-a.startMouseClientY,a.diffTime=a.lastTime-a.startTime,!0===c?(a.startMousePos=a.lastMouseY,a.lastMousePos=a.lastMouseY,a.diffMousePos=a.diffMouseY):(a.startMousePos=a.lastMouseX,a.lastMousePos=a.lastMouseX,a.diffMousePos=a.diffMouseX),a},this.isApproveStoredEventClick=function(a,c){if(!g_temp.dataCache[a])return!0;var b=t.getStoredEventData(a,c),d=Math.abs(b.diffMousePos);return!(b.diffTime>400)&&!(d>30)},this.clearStoredEventData=function(a){g_temp.dataCache[a]=null},this.z_________CHECK_SUPPORT_FUNCTIONS_______=function(){},this.isCanvasExists=function(){return"function"==typeof jQuery('<canvas width="500" height="500" > </canvas>')[0].getContext},this.isScrollbarExists=function(){return window.innerWidth>document.documentElement.clientWidth},this.isTouchDevice=function(){if(-1!==g_temp.isTouchDevice)return g_temp.isTouchDevice;try{document.createEvent("TouchEvent"),g_temp.isTouchDevice=!0}catch(a){g_temp.isTouchDevice=!1}return g_temp.isTouchDevice},this.isRgbaSupported=function(){if(-1!==g_temp.isRgbaSupported)return g_temp.isRgbaSupported;var a=document.getElementsByTagName("script")[0],b=a.style.color;try{a.style.color="rgba(1,5,13,0.44)"}catch(d){}var c=a.style.color!=b;return a.style.color=b,g_temp.isRgbaSupported=c,c},this.z_________GENERAL_FUNCTIONS_______=function(){},this.checkMinJqueryVersion=function(f){for(var b=jQuery.fn.jquery.split("."),c=f.split("."),a=0,g=b.length;a<g;a++){var d=parseInt(b[a]),e=parseInt(c[a]);if(void 0===c[a])break;if(e>d)return!1;if(d>e)break}return!0},this.getCssSizeParam=function(a){return jQuery.isNumeric(a)?a+"px":a},this.convertHexToRGB=function(b,c){var a=b.replace("#","");return a===b?b:(r=parseInt(a.substring(0,2),16),g=parseInt(a.substring(2,4),16),b=parseInt(a.substring(4,6),16),result="rgba("+r+","+g+","+b+","+c+")")},this.timestampToString=function(b){var c,a=new Date(b);return a.getDate()+"/"+a.getMonth()+(" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()+":"+a.getMilliseconds())},this.getArrTouches=function(a){var b=[];return a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches.length>0&&(b=a.originalEvent.touches),b},this.getArrTouchPositions=function(b){for(var c=[],a=0;a<b.length;a++){var d={pageX:b[a].pageX,pageY:b[a].pageY};c.push(d)}return c},this.startTimeDebug=function(){g_temp.starTime=jQuery.now()},this.showTimeDebug=function(){debugLine({"Time Passed":jQuery.now()-g_temp.starTime},!0)},this.initProgressIndicator=function(c,b,d){switch("bar"!=c&& !1==t.isCanvasExists()&&(c="bar"),c){case"bar":var a=new UGProgressBar;a.putHidden(d,b);break;default:case"pie":var a=new UGProgressPie;a.putHidden(d,b);break;case"pie2":b.type_fill=!0;var a=new UGProgressPie;a.putHidden(d,b)}return a},this.setButtonMobileReady=function(a){a.on("touchstart",function(a){jQuery(this).addClass("ug-nohover")}),a.on("mousedown touchend",function(a){return a.stopPropagation(),a.stopImmediatePropagation(),!1})},this.registerTheme=function(a){g_temp.arrThemes.push(a)},this.getArrThemes=function(){return g_temp.arrThemes},this.isThemeRegistered=function(a){return -1!==jQuery.inArray(a,g_temp.arrThemes)},this.getFirstRegisteredTheme=function(){return 0==g_temp.arrThemes.length?"":g_temp.arrThemes[0]},this.isTimePassed=function(a,b){if(!b)var b=100;var c=jQuery.now(),d=c-(lastTime=!1==g_temp.timeCache.hasOwnProperty(a)?0:g_temp.timeCache[a]);return g_temp.timeCache[a]=c,!(d<=b)},this.whenContiniousEventOver=function(a,c,b){if(!b)var b=300;!0==g_temp.timeCache.hasOwnProperty(a)&&null!=g_temp.timeCache[a]&&(clearTimeout(g_temp.timeCache[a]),g_temp.timeCache[a]=null),g_temp.timeCache[a]=setTimeout(c,b)},this.validateClickTouchstartEvent=function(a){var b=!0,c=jQuery.now()-g_temp.lastEventTime;return"click"==a&&"touchstart"==g_temp.lastEventType&&c<1e3&&(b=!1),g_temp.lastEventTime=jQuery.now(),g_temp.lastEventType=a,b},this.addClassOnHover=function(b,a){if(!a)var a="ug-button-hover";b.hover(function(){jQuery(this).addClass(a)},function(){jQuery(this).removeClass(a)})},this.destroyButton=function(a){a.off("mouseenter"),a.off("mouseleave"),a.off("click"),a.off("touchstart"),a.off("touchend"),a.off("mousedown"),a.off("tap")},this.setButtonOnClick=function(a,b){t.setButtonMobileReady(a),a.on("click touchstart",function(a){if(objThis=jQuery(this),a.stopPropagation(),a.stopImmediatePropagation(),!1==t.validateClickTouchstartEvent(a.type))return!0;b(objThis,a)})},this.setButtonOnTap=function(a,b){a.on("tap",b),!1==t.isTouchDevice()?a.on("click",function(a){var b=jQuery(this);if(!1==t.validateClickTouchstartEvent(a.type))return!0;b.trigger("tap")}):(a.on("touchstart",function(a){jQuery(this).addClass("ug-nohover"),g_temp.lastTouchStartElement=jQuery(this),g_temp.lastEventTime=jQuery.now()}),a.on("touchend",function(b){var a=jQuery(this);if(!1==a.is(g_temp.lastTouchStartElement)||!g_temp.lastEventTime||jQuery.now()-g_temp.lastEventTime>g_temp.touchThreshold)return!0;a.trigger("tap")}))},this.loadJs=function(a,d){!0===d&&(a=location.protocol+"//"+a);var b=document.createElement("script");b.src=a;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)},this.loadCss=function(b,c){!0===c&&(b=location.protocol+"//"+b);var a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",b),document.getElementsByTagName("head")[0].appendChild(a)},this.addEvent=function(a,b,c){void 0!==a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},this.checkImagesLoaded=function(b,a,d){var e=0,c=b.length;if(0==c&&a)return a(),!1;function f(b,f){e++,"function"==typeof d&&setTimeout(function(){d(b,f)}),e==c&&"function"==typeof a&&setTimeout(function(){a()})}setTimeout(function(){for(var a=0;a<c;a++){var e=b[a];if(void 0!==e.naturalWidth&&0!==e.naturalWidth)f(b[a],!1);else{var d=jQuery("<img/>");d.data("index",a),d.on("load",function(){var a=jQuery(this).data("index");f(b[a],!1)}),d.on("error",function(){var a=jQuery(this).data("index");f(b[a],!0)}),d.attr("src",e.src)}}})},this.waitForWidth=function(a,b){var c=a.width();if(0!=c)return b(),!1;g_temp.handle=setInterval(function(){0!=(c=a.width())&&(clearInterval(g_temp.handle),b())},300)},this.arrayShuffle=function(a){if("object"!=typeof a)return a;for(var c,d,b=a.length;b;c=parseInt(Math.random()*b),d=a[--b],a[b]=a[c],a[c]=d);return a},this.getObjectLength=function(b){var a=0;for(var c in b)a++;return a},this.normalizePercent=function(a){return a<0&&(a=0),a>1&&(a=1),a},this.stripTags=function(a){return"string"!=typeof a?a:a.replace(/(<([^>]+)>)/ig,"")},this.escapeDoubleSlash=function(a){return a.replace('"','"')},this.htmlentitles=function(a){return jQuery("<div/>").text(a).html()},this.z_________END_GENERAL_FUNCTIONS_______=function(){}}!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function d(k){var b=k||window.event,o=j.call(arguments,1),i=0,d=0,c=0,l=0;if((k=a.event.fix(b)).type="mousewheel","detail"in b&&(c=-1*b.detail),"wheelDelta"in b&&(c=b.wheelDelta),"wheelDeltaY"in b&&(c=b.wheelDeltaY),"wheelDeltaX"in b&&(d=-1*b.wheelDeltaX),"axis"in b&&b.axis===b.HORIZONTAL_AXIS&&(d=-1*c,c=0),i=0===c?d:c,"deltaY"in b&&(i=c=-1*b.deltaY),"deltaX"in b&&(d=b.deltaX,0===c&&(i=-1*d)),0!==c||0!==d){if(1===b.deltaMode){var m=a.data(this,"mousewheel-line-height");i*=m,c*=m,d*=m}else if(2===b.deltaMode){var n=a.data(this,"mousewheel-page-height");i*=n,c*=n,d*=n}return l=Math.max(Math.abs(c),Math.abs(d)),(!h||h>l)&&(h=l,f(b,l)&&(h/=40)),f(b,l)&&(i/=40,d/=40,c/=40),i=Math[i>=1?"floor":"ceil"](i/h),d=Math[d>=1?"floor":"ceil"](d/h),c=Math[c>=1?"floor":"ceil"](c/h),k.deltaX=d,k.deltaY=c,k.deltaFactor=h,k.deltaMode=0,o.unshift(k,i,d,c),g&&clearTimeout(g),g=setTimeout(e,200),(a.event.dispatch||a.event.handle).apply(this,o)}}function e(){h=null}function f(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120==0}var g,h,b=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],j=Array.prototype.slice;if(a.event.fixHooks)for(var c=b.length;c;)a.event.fixHooks[b[--c]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var b=i.length;b;)this.addEventListener(i[--b],d,!1);else this.onmousewheel=d;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var a=i.length;a;)this.removeEventListener(i[--a],d,!1);else this.onmousewheel=null},getLineHeight:function(b){return parseInt(a(b)["offsetParent"in a.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],function($){return a($)}):"object"==typeof module&&"object"==typeof module.exports?exports=a(require("jquery")):a(jQuery)}(function($){$.easing.jswing=$.easing.swing;var d=Math.pow,e=Math.sqrt,f=Math.sin,g=Math.cos,a=Math.PI,b=1.70158,h=1.525*b,i=b+1,j=2*a/3,k=2*a/4.5;function c(a){var c=7.5625,b=2.75;return a<1/b?c*a*a:a<2/b?c*(a-=1.5/b)*a+.75:a<2.5/b?c*(a-=2.25/b)*a+.9375:c*(a-=2.625/b)*a+.984375}$.extend($.easing,{def:"easeOutQuad",swing:function(a){return $.easing[$.easing.def](a)},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return 1-(1-a)*(1-a)},easeInOutQuad:function(a){return a<.5?2*a*a:1-d(-2*a+2,2)/2},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1-d(1-a,3)},easeInOutCubic:function(a){return a<.5?4*a*a*a:1-d(-2*a+2,3)/2},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return 1-d(1-a,4)},easeInOutQuart:function(a){return a<.5?8*a*a*a*a:1-d(-2*a+2,4)/2},easeInQuint:function(a){return a*a*a*a*a},easeOutQuint:function(a){return 1-d(1-a,5)},easeInOutQuint:function(a){return a<.5?16*a*a*a*a*a:1-d(-2*a+2,5)/2},easeInSine:function(b){return 1-g(b*a/2)},easeOutSine:function(b){return f(b*a/2)},easeInOutSine:function(b){return-(g(a*b)-1)/2},easeInExpo:function(a){return 0===a?0:d(2,10*a-10)},easeOutExpo:function(a){return 1===a?1:1-d(2,-10*a)},easeInOutExpo:function(a){return 0===a?0:1===a?1:a<.5?d(2,20*a-10)/2:(2-d(2,-20*a+10))/2},easeInCirc:function(a){return 1-e(1-d(a,2))},easeOutCirc:function(a){return e(1-d(a-1,2))},easeInOutCirc:function(a){return a<.5?(1-e(1-d(2*a,2)))/2:(e(1-d(-2*a+2,2))+1)/2},easeInElastic:function(a){return 0===a?0:1===a?1:-d(2,10*a-10)*f((10*a-10.75)*j)},easeOutElastic:function(a){return 0===a?0:1===a?1:d(2,-10*a)*f((10*a-.75)*j)+1},easeInOutElastic:function(a){return 0===a?0:1===a?1:a<.5?-(d(2,20*a-10)*f((20*a-11.125)*k))/2:d(2,-20*a+10)*f((20*a-11.125)*k)/2+1},easeInBack:function(a){return i*a*a*a-b*a*a},easeOutBack:function(a){return 1+i*d(a-1,3)+b*d(a-1,2)},easeInOutBack:function(a){return a<.5?d(2*a,2)*((h+1)*2*a-h)/2:(d(2*a-2,2)*((h+1)*(2*a-2)+h)+2)/2},easeInBounce:function(a){return 1-c(1-a)},easeOutBounce:c,easeInOutBounce:function(a){return a<.5?(1-c(1-2*a))/2:(1+c(2*a-1))/2}})}),function(a,i){if(void 0===a.cssHooks)return!1;function j(a,c,d){var b=o[c.type]||{};return null==a?d||!c.def?null:c.def:isNaN(a=b.floor?~~a:parseFloat(a))?c.def:b.mod?(a+b.mod)%b.mod:0>a?0:b.max<a?b.max:a}function k(d){var h=b(),g=h._rgba=[];return d=d.toLowerCase(),e(n,function(j,a){var b,f=a.re.exec(d),i=f&&a.parse(f),e=a.space||"rgba";return i?(b=h[e](i),h[c[e].cache]=b[c[e].cache],g=h._rgba=b._rgba,!1):void 0}),g.length?("0,0,0,0"===g.join()&&a.extend(g,f.transparent),h):f[d]}function l(b,c,a){return 1>6*(a=(a+1)%1)?b+(c-b)*a*6:1>2*a?c:2>3*a?b+(c-b)*(2/3-a)*6:b}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",m=/^([\-+])=\s*(\d+\.?\d*)/,n=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],b=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},o={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=b.support={},d=a("<p>")[0],e=a.each;d.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=d.style.backgroundColor.indexOf("rgba")> -1,e(c,function(b,a){a.cache="_"+b,a.props.alpha={idx:3,type:"percent",def:1}}),b.fn=a.extend(b.prototype,{parse:function(d,g,l,m){if(d===i)return this._rgba=[null,null,null,null],this;(d.jquery||d.nodeType)&&(d=a(d).css(g),g=i);var n=this,h=a.type(d),o=this._rgba=[];return g!==i&&(d=[d,g,l,m],h="array"),"string"===h?this.parse(k(d)||f._default):"array"===h?(e(c.rgba.props,function(b,a){o[a.idx]=j(d[a.idx],a)}),this):"object"===h?(d instanceof b?e(c,function(b,a){d[a.cache]&&(n[a.cache]=d[a.cache].slice())}):e(c,function(f,b){var c=b.cache;e(b.props,function(a,e){if(!n[c]&&b.to){if("alpha"===a||null==d[a])return;n[c]=b.to(n._rgba)}n[c][e.idx]=j(d[a],e,!0)}),n[c]&&0>a.inArray(null,n[c].slice(0,3))&&(n[c][3]=1,b.from&&(n._rgba=b.from(n[c])))}),this):void 0},is:function(a){var f=b(a),d=!0,g=this;return e(c,function(h,a){var b,c=f[a.cache];return c&&(b=g[a.cache]||a.to&&a.to(g._rgba)||[],e(a.props,function(e,a){return null!=c[a.idx]?d=c[a.idx]===b[a.idx]:void 0})),d}),d},_space:function(){var a=[],b=this;return e(c,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(h,l){var d=b(h),f=d._space(),a=c[f],g=0===this.alpha()?b("transparent"):this,i=g[a.cache]||a.to(g._rgba),k=i.slice();return d=d[a.cache],e(a.props,function(g,f){var e=f.idx,a=i[e],b=d[e],c=o[f.type]||{};null!==b&&(null===a?k[e]=b:(c.mod&&(b-a>c.mod/2?a+=c.mod:a-b>c.mod/2&&(a-=c.mod)),k[e]=j((b-a)*l+a,f)))}),this[f](k)},blend:function(d){if(1===this._rgba[3])return this;var c=this._rgba.slice(),e=c.pop(),f=b(d)._rgba;return b(a.map(c,function(a,b){return(1-e)*f[b]+e*a}))},toRgbaString:function(){var c="rgba(",b=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===b[3]&&(b.pop(),c="rgb("),c+b.join()+")"},toHslaString:function(){var c="hsla(",b=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===b[3]&&(b.pop(),c="hsl("),c+b.join()+")"},toHexString:function(c){var b=this._rgba.slice(),d=b.pop();return c&&b.push(~~(255*d)),"#"+a.map(b,function(a){return 1===(a=(a||0).toString(16)).length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),b.fn.parse.prototype=b.fn,c.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var i,j,c=a[0]/255,d=a[1]/255,f=a[2]/255,k=a[3],e=Math.max(c,d,f),g=Math.min(c,d,f),b=e-g,h=e+g,l=.5*h;return i=g===e?0:c===e?60*(d-f)/b+360:d===e?60*(f-c)/b+120:60*(c-d)/b+240,j=0===b?0:.5>=l?b/h:b/(2-h),[Math.round(i)%360,j,l,null==k?1:k]},c.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var d=a[0]/360,e=a[1],b=a[2],g=a[3],c=.5>=b?b*(1+e):b+e-b*e,f=2*b-c;return[Math.round(255*l(f,c,d+1/3)),Math.round(255*l(f,c,d)),Math.round(255*l(f,c,d-1/3)),g]},e(c,function(d,c){var f=c.props,g=c.cache,h=c.to,k=c.from;b.fn[d]=function(c){if(h&&!this[g]&&(this[g]=h(this._rgba)),c===i)return this[g].slice();var l,m=a.type(c),n="array"===m||"object"===m?c:arguments,d=this[g].slice();return e(f,function(c,a){var b=n["object"===m?c:a.idx];null==b&&(b=d[a.idx]),d[a.idx]=j(b,a)}),k?((l=b(k(d)))[g]=d,l):b(d)},e(f,function(c,e){b.fn[c]||(b.fn[c]=function(b){var g,f=a.type(b),j="alpha"===c?this._hsla?"hsla":"rgba":d,h=this[j](),i=h[e.idx];return"undefined"===f?i:("function"===f&&(b=b.call(this,i),f=a.type(b)),null==b&&e.empty?this:("string"===f&&(g=m.exec(b))&&(b=i+parseFloat(g[2])*("+"===g[1]?1:-1)),h[e.idx]=b,this[j](h)))})})}),b.hook=function(c){e(c.split(" "),function(d,c){a.cssHooks[c]={set:function(g,d){var i,e,f="";if("transparent"!==d&&("string"!==a.type(d)||(i=k(d)))){if(d=b(i||d),!h.rgba&&1!==d._rgba[3]){for(e="backgroundColor"===c?g.parentNode:g;(""===f||"transparent"===f)&&e&&e.style;)try{f=a.css(e,"backgroundColor"),e=e.parentNode}catch(j){}d=d.blend(f&&"transparent"!==f?f:"_default")}d=d.toRgbaString()}try{g.style[c]=d}catch(l){}}},a.fx.step[c]=function(d){d.colorInit||(d.start=b(d.elem,c),d.end=b(d.end),d.colorInit=!0),a.cssHooks[c].set(d.elem,d.start.transition(d.end,d.pos))}})},b.hook(g),a.cssHooks.borderColor={expand:function(b){var a={};return e(["Top","Right","Bottom","Left"],function(d,c){a["border"+c+"Color"]=b}),a}},f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(a){function b(){try{var c=this===document?a(this):a(this).contents()}catch(d){return!1}c.mousemove(function(b){a.mlp={x:b.pageX,y:b.pageY}}),c.find("iframe").on("load",b)}a.mlp={x:0,y:0},a(b),a.fn.ismouseover=function(){var b=!1;return this.eq(0).each(function(){var d=a(this).is("iframe")?a(this).contents().find("body"):a(this),c=d.offset();b=c.left<=a.mlp.x&&c.left+d.outerWidth()>a.mlp.x&&c.top<=a.mlp.y&&c.top+d.outerHeight()>a.mlp.y}),b}}(jQuery);var g_ugFunctions=new UGFunctions;function UGThumbsGeneral(){var g_arrItems,g_objParent,g_objGallery,g_objects,g_objWrapper,t=this,g_objThis=jQuery(t),g_gallery=new UniteGalleryMain,g_functions=new UGFunctions;this.type={GET_THUMBS_ALL:"all",GET_THUMBS_RATIO:"ratio",GET_THUMBS_NO_RATIO:"no_ratio",GET_THUMBS_NEW:"new"},this.events={SETOVERSTYLE:"thumbmouseover",SETNORMALSTYLE:"thumbmouseout",SETSELECTEDSTYLE:"thumbsetselected",PLACEIMAGE:"thumbplaceimage",AFTERPLACEIMAGE:"thumb_after_place_image",IMAGELOADERROR:"thumbimageloaderror",THUMB_IMAGE_LOADED:"thumb_image_loaded"};var g_options={thumb_width:88,thumb_height:50,thumb_fixed_size:!0,thumb_resize_by:"height",thumb_border_effect:!0,thumb_border_width:0,thumb_border_color:"#000000",thumb_over_border_width:0,thumb_over_border_color:"#d9d9d9",thumb_selected_border_width:1,thumb_selected_border_color:"#d9d9d9",thumb_round_corners_radius:0,thumb_color_overlay_effect:!0,thumb_overlay_color:"#000000",thumb_overlay_opacity:.4,thumb_overlay_reverse:!1,thumb_image_overlay_effect:!1,thumb_image_overlay_type:"bw",thumb_transition_duration:200,thumb_transition_easing:"easeOutQuad",thumb_show_loader:!0,thumb_loader_type:"dark",thumb_wrapper_as_link:!1,thumb_link_newpage:!1},g_temp={touchEnabled:!1,num_thumbs_checking:0,customThumbs:!1,funcSetCustomThumbHtml:null,isEffectBorder:!1,isEffectOverlay:!1,isEffectImage:!1,colorOverlayOpacity:1,thumbInnerReduce:0,allowOnResize:!0,classNewThumb:"ug-new-thumb"},g_serviceParams={timeout_thumb_check:100,thumb_max_check_times:600,eventSizeChange:"thumb_size_change"};function appendHtmlThumbFromItem(itemIndex,imageEffectClass){var objItem=g_arrItems[itemIndex],classAddition="";!1==g_temp.customThumbs&&(classAddition=" ug-thumb-generated");var htmlThumb="<div class='ug-thumb-wrapper"+classAddition+"' "+("style='z-index:"+(objItem.index+1)+";'")+"></div>";if(!0==g_options.thumb_wrapper_as_link){var urlLink=objItem.link;""==objItem.link&&(urlLink="javascript:void(0)");var linkTarget="";!0==g_options.thumb_link_newpage&&objItem.link&&(linkTarget=" target='_blank'");var htmlThumb="<a href='"+urlLink+"'"+linkTarget+" class='ug-thumb-wrapper"+classAddition+"'></a>"}var objThumbWrapper=jQuery(htmlThumb),objImage=objItem.objThumbImage;if(!1==g_temp.customThumbs){if(!0==g_options.thumb_show_loader&&objImage){var loaderClass="ug-thumb-loader-dark";"bright"==g_options.thumb_loader_type&&(loaderClass="ug-thumb-loader-bright"),objThumbWrapper.append("<div class='ug-thumb-loader "+loaderClass+"'></div>"),objThumbWrapper.append("<div class='ug-thumb-error' style='display:none'></div>")}if(objImage){if(objImage.addClass("ug-thumb-image"),!0==g_options.thumb_image_overlay_effect){var objImageOverlay=objImage.clone().appendTo(objThumbWrapper);objImageOverlay.addClass("ug-thumb-image-overlay "+imageEffectClass).removeClass("ug-thumb-image"),objImageOverlay.fadeTo(0,0),objItem.objImageOverlay=objImageOverlay}objThumbWrapper.append(objImage)}}return g_temp.isEffectBorder&&objThumbWrapper.append("<div class='ug-thumb-border-overlay'></div>"),g_temp.isEffectOverlay&&objThumbWrapper.append("<div class='ug-thumb-overlay'></div>"),g_objParent.append(objThumbWrapper),g_temp.customThumbs&&g_temp.funcSetCustomThumbHtml(objThumbWrapper,objItem),g_arrItems[itemIndex].objThumbWrapper=objThumbWrapper,objThumbWrapper}function setThumbSize(width,height,objThumb,innerOnly){var objCss={width:width+"px",height:height+"px"},objCssInner={width:width-g_temp.thumbInnerReduce+"px",height:height-g_temp.thumbInnerReduce+"px"},selectorsString=".ug-thumb-loader, .ug-thumb-error, .ug-thumb-border-overlay, .ug-thumb-overlay";objThumb?(!0!==innerOnly&&objThumb.css(objCss),objThumb.find(selectorsString).css(objCssInner)):(g_objParent.children(".ug-thumb-wrapper").css(objCss),g_objParent.find(selectorsString).css(objCssInner))}function setThumbBorderEffect(objThumb,borderWidth,borderColor,noAnimation){if(!noAnimation)var noAnimation=!1;g_gallery.isFakeFullscreen()&&(noAnimation=!0);var objBorderOverlay=objThumb.children(".ug-thumb-border-overlay"),objCss={};objCss["border-width"]=borderWidth+"px",0!=borderWidth&&(objCss["border-color"]=borderColor),noAnimation&& !0===noAnimation?(objBorderOverlay.css(objCss),0==borderWidth?objBorderOverlay.hide():objBorderOverlay.show()):(0==borderWidth?objBorderOverlay.stop().fadeOut(g_options.thumb_transition_duration):objBorderOverlay.show().stop().fadeIn(g_options.thumb_transition_duration),animateThumb(objBorderOverlay,objCss))}function setThumbColorOverlayEffect(objThumb,isActive,noAnimation){var objOverlay=objThumb.children(".ug-thumb-overlay"),animationDuration=g_options.thumb_transition_duration;noAnimation&& !0===noAnimation&&(animationDuration=0),isActive?objOverlay.stop(!0).fadeTo(animationDuration,g_temp.colorOverlayOpacity):objOverlay.stop(!0).fadeTo(animationDuration,0)}function setThumbImageOverlayEffect(objThumb,isActive,noAnimation){var objImage=objThumb.children("img.ug-thumb-image"),objImageOverlay=objThumb.children("img.ug-thumb-image-overlay"),animationDuration=g_options.thumb_transition_duration;noAnimation&& !0===noAnimation&&(animationDuration=0),isActive?objImageOverlay.stop(!0).fadeTo(animationDuration,1):(objImage.fadeTo(0,1),objImageOverlay.stop(!0).fadeTo(animationDuration,0))}function setThumbSelectedStyle(objThumb,noAnimation){g_temp.isEffectBorder&&setThumbBorderEffect(objThumb,g_options.thumb_selected_border_width,g_options.thumb_selected_border_color,noAnimation),g_temp.isEffectOverlay&&setThumbColorOverlayEffect(objThumb,!0==g_options.thumb_overlay_reverse,noAnimation),g_temp.isEffectImage&&setThumbImageOverlayEffect(objThumb,!1,noAnimation),g_objThis.trigger(t.events.SETSELECTEDSTYLE,objThumb)}function setItemThumbLoadedError(objThumb){var objItem=t.getItemByThumb(objThumb);if(objItem.isLoaded=!0,objItem.isThumbImageLoaded=!1,!0==g_temp.customThumbs)return g_objThis.trigger(t.events.IMAGELOADERROR,objThumb),!0;objThumb.children(".ug-thumb-loader").hide(),objThumb.children(".ug-thumb-error").show()}function setThumbsBorderRadius(objThumbs){if(g_options.thumb_round_corners_radius<=0)return!1;var objCss={"border-radius":g_options.thumb_round_corners_radius+"px"};objThumbs?(objThumbs.css(objCss),objThumbs.find(".ug-thumb-border-overlay").css(objCss)):g_objParent.find(".ug-thumb-wrapper, .ug-thumb-wrapper .ug-thumb-border-overlay").css(objCss)}function animateThumb(objThumb,objThumbCss){objThumb.stop(!0).animate(objThumbCss,{duration:g_options.thumb_transition_duration,easing:g_options.thumb_transition_easing,queue:!1})}function redrawThumbStyle(objThumb){!0==isThumbSelected(objThumb)?setThumbSelectedStyle(objThumb,!0,"redraw"):t.setThumbNormalStyle(objThumb,!0,"redraw")}function placeThumbImage(objThumb,objImage,objItem){if(!0==g_options.thumb_fixed_size)g_functions.scaleImageCoverParent(objImage,objThumb);else{"height"==g_options.thumb_resize_by?g_functions.scaleImageByHeight(objImage,g_options.thumb_height):g_functions.scaleImageByWidth(objImage,g_options.thumb_width);var imageSize=g_functions.getElementSize(objImage);g_functions.placeElement(objImage,0,0),setThumbSize(imageSize.width,imageSize.height,objThumb)}objThumb.children(".ug-thumb-loader").hide(),objImage.show(),!1==g_options.thumb_image_overlay_effect?objImage.fadeTo(0,1):(!0==g_options.thumb_image_overlay_effect&&copyPositionToThumbOverlayImage(objImage),objImage.fadeTo(0,0),redrawThumbStyle(objThumb)),g_objThis.trigger(t.events.AFTERPLACEIMAGE,objThumb)}function copyPositionToThumbOverlayImage(objImage){var objImageBW=objImage.siblings(".ug-thumb-image-overlay");if(0==objImageBW.length)return!1;var objSize=g_functions.getElementSize(objImage),objCss={width:objSize.width+"px",height:objSize.height+"px",left:objSize.left+"px",top:objSize.top+"px"};objImageBW.css(objCss),!1==g_temp.customThumbs&&objImageBW.fadeTo(0,1)}function getImageEffectsClass(){var imageEffectClass="",arrEffects=g_options.thumb_image_overlay_type.split(",");for(var index in arrEffects){var effect=arrEffects[index];switch(effect){case"bw":imageEffectClass+=" ug-bw-effect";break;case"blur":imageEffectClass+=" ug-blur-effect";break;case"sepia":imageEffectClass+=" ug-sepia-effect"}}return imageEffectClass}function isThumbSelected(objThumbWrapper){return!!objThumbWrapper.hasClass("ug-thumb-selected")}function onThumbSizeChange(temp,objThumb){objThumb=jQuery(objThumb),t.getItemByThumb(objThumb);var objSize=g_functions.getElementSize(objThumb);setThumbSize(objSize.width,objSize.height,objThumb,!0),redrawThumbStyle(objThumb)}function onMouseOver(objThumb){if(!0==g_temp.touchEnabled)return objThumbs.off("mouseenter").off("mouseleave"),!0;!1==isThumbSelected(objThumb)&&t.setThumbOverStyle(objThumb)}function onMouseOut(objThumb){if(!0==g_temp.touchEnabled)return!0;!1==isThumbSelected(objThumb)&&t.setThumbNormalStyle(objThumb,!1)}function onImageLoaded(image,isForce){if(!isForce)var isForce=!1;var objImage=jQuery(image),objThumb=objImage.parents(".ug-thumb-wrapper");if(0==objThumb.parent().length|| !0==(objItem=t.getItemByThumb(objThumb)).isLoaded&& !1===isForce)return!1;t.triggerImageLoadedEvent(objThumb,objImage),!0==g_temp.customThumbs?g_objThis.trigger(t.events.PLACEIMAGE,[objThumb,objImage]):placeThumbImage(objThumb,objImage,objItem)}function onThumbImageLoaded(data,objThumb,objImage){(objItem=t.getItemByThumb(objThumb)).isLoaded=!0,objItem.isThumbImageLoaded=!0;var objSize=g_functions.getImageOriginalSize(objImage);objItem.thumbWidth=objSize.width,objItem.thumbHeight=objSize.height,objItem.thumbRatioByWidth=objSize.width/objSize.height,objItem.thumbRatioByHeight=objSize.height/objSize.width,objThumb.addClass("ug-thumb-ratio-set")}this.init=function(a,b){g_objects=a.getObjects(),g_gallery=a,g_objGallery=jQuery(a),g_objWrapper=g_objects.g_objWrapper,g_arrItems=g_objects.g_arrItems,g_options=jQuery.extend(g_options,b),g_temp.isEffectBorder=g_options.thumb_border_effect,g_temp.isEffectOverlay=g_options.thumb_color_overlay_effect,g_temp.isEffectImage=g_options.thumb_image_overlay_effect},this._____________EXTERNAL_SETTERS__________=function(){},this.setHtmlThumbs=function(b,c){if(g_objParent=b,!0==g_temp.isEffectImage)var d=getImageEffectsClass();if(!0!==c)for(var e=g_gallery.getNumItems(),a=0;a<e;a++)appendHtmlThumbFromItem(a,d);else{t.getThumbs().removeClass(g_temp.classNewThumb);var f=g_gallery.getNewAddedItemsIndexes();jQuery.each(f,function(b,a){appendHtmlThumbFromItem(a,d).addClass(g_temp.classNewThumb)})}},this.setThumbNormalStyle=function(a,b,c){!0==g_temp.customThumbs&&a.removeClass("ug-thumb-over"),g_temp.isEffectBorder&&setThumbBorderEffect(a,g_options.thumb_border_width,g_options.thumb_border_color,b),g_temp.isEffectOverlay&&setThumbColorOverlayEffect(a,!0!=g_options.thumb_overlay_reverse,b),g_temp.isEffectImage&&setThumbImageOverlayEffect(a,!0,b),g_objThis.trigger(t.events.SETNORMALSTYLE,a)},this.setThumbOverStyle=function(a){!0==g_temp.customThumbs&&a.addClass("ug-thumb-over"),g_temp.isEffectBorder&&setThumbBorderEffect(a,g_options.thumb_over_border_width,g_options.thumb_over_border_color),g_temp.isEffectOverlay&&setThumbColorOverlayEffect(a,!0==g_options.thumb_overlay_reverse),!0==g_temp.isEffectImage&&setThumbImageOverlayEffect(a,!1),g_objThis.trigger(t.events.SETOVERSTYLE,a)},this.setHtmlProperties=function(a){if(!a)var a=t.getThumbs();if(!1==g_temp.customThumbs&&(!0==g_options.thumb_fixed_size&&setThumbSize(g_options.thumb_width,g_options.thumb_height,a),setThumbsBorderRadius(a)),a.each(function(){var a=jQuery(this);redrawThumbStyle(a)}),g_temp.isEffectOverlay&&g_options.thumb_overlay_color){var b={};if(g_functions.isRgbaSupported()){var c=g_functions.convertHexToRGB(g_options.thumb_overlay_color,g_options.thumb_overlay_opacity);b["background-color"]=c}else b["background-color"]=g_options.thumb_overlay_color,g_temp.colorOverlayOpacity=g_options.thumb_overlay_opacity;a.find(".ug-thumb-overlay").css(b)}},this.setThumbSelected=function(a){if(!0==g_temp.customThumbs&&a.removeClass("ug-thumb-over"),!0==isThumbSelected(a))return!0;a.addClass("ug-thumb-selected"),setThumbSelectedStyle(a)},this.setThumbUnselected=function(a){a.removeClass("ug-thumb-selected"),t.setThumbNormalStyle(a,!1,"set unselected")},this.setOptions=function(a){g_options=jQuery.extend(g_options,a)},this.setThumbInnerReduce=function(a){g_temp.thumbInnerReduce=a},this.setCustomThumbs=function(a,b,c){if(g_temp.customThumbs=!0,"function"!=typeof a)throw new Error("The argument should be function");g_temp.funcSetCustomThumbHtml=a,-1==jQuery.inArray("overlay",b)&&(g_temp.isEffectOverlay=!1),-1==jQuery.inArray("border",b)&&(g_temp.isEffectBorder=!1),g_temp.isEffectImage=!1,c&& !1===c.allow_onresize&&(g_temp.allowOnResize=!1)},this._____________EXTERNAL_GETTERS__________=function(){},this.getOptions=function(){return g_options},this.getNumThumbs=function(){return g_arrItems.length},this.getThumbImage=function(a){return a.find(".ug-thumb-image")},this.getThumbByIndex=function(a){var b=t.getThumbs();if(a>=b.length||a<0)throw new Error("Wrong thumb index");return jQuery(b[a])},this.getThumbs=function(d){var b=".ug-thumb-wrapper",c=".ug-thumb-ratio-set";switch(d){default:case t.type.GET_THUMBS_ALL:var a=g_objParent.children(b);break;case t.type.GET_THUMBS_NO_RATIO:var a=g_objParent.children(b).not(c);break;case t.type.GET_THUMBS_RATIO:var a=g_objParent.children(b+c);break;case t.type.GET_THUMBS_NEW:var a=g_objParent.children("."+g_temp.classNewThumb)}return a},this.getItemByThumb=function(b){var a=b.data("index");return void 0===a&&(a=b.index()),g_arrItems[a]},this.isThumbLoaded=function(a){return t.getItemByThumb(a).isLoaded},this.getGlobalThumbSize=function(){return{width:g_options.thumb_width,height:g_options.thumb_height}},this._____________EXTERNAL_OTHERS__________=function(){},this.initEvents=function(){var a=".ug-thumb-wrapper";!0==g_temp.allowOnResize&&g_objWrapper.on(g_serviceParams.eventSizeChange,onThumbSizeChange),g_objThis.on(t.events.THUMB_IMAGE_LOADED,onThumbImageLoaded),g_objParent.on("touchstart",a,function(){g_temp.touchEnabled=!0,g_objParent.off("mouseenter").off("mouseleave")}),g_objParent.on("mouseenter",a,function(b){var a=jQuery(this);onMouseOver(a)}),g_objParent.on("mouseleave",a,function(b){var a=jQuery(this);onMouseOut(a)})},this.destroy=function(){var a=".ug-thumb-wrapper";g_objParent.off("touchstart",a),g_objWrapper.off(g_serviceParams.eventSizeChange),g_objParent.off("mouseenter",a),g_objParent.off("mouseleave",a),g_objThis.off(t.events.THUMB_IMAGE_LOADED)},this.loadThumbsImages=function(){var a=g_objParent.find(".ug-thumb-image");g_functions.checkImagesLoaded(a,null,function(a,b){if(!1==b)onImageLoaded(a,!0);else{var c=jQuery(a).parent();setItemThumbLoadedError(c)}})},this.triggerImageLoadedEvent=function(a,b){g_objThis.trigger(t.events.THUMB_IMAGE_LOADED,[a,b])},this.hideThumbs=function(){g_objParent.find(".ug-thumb-wrapper").hide()}}function UGThumbsStrip(){var g_objGallery,g_objects,g_objWrapper,g_arrItems,g_objStrip,g_objStripInner,g_aviaControl,g_touchThumbsControl,t=this,g_gallery=new UniteGalleryMain,g_functions=new UGFunctions,g_isVertical=!1,g_thumbs=new UGThumbsGeneral,g_functions=new UGFunctions,g_options={strip_vertical_type:!1,strip_thumbs_align:"left",strip_space_between_thumbs:6,strip_thumb_touch_sensetivity:15,strip_scroll_to_thumb_duration:500,strip_scroll_to_thumb_easing:"easeOutCubic",strip_control_avia:!0,strip_control_touch:!0,strip_padding_top:0,strip_padding_bottom:0,strip_padding_left:0,strip_padding_right:0},g_temp={isRunOnce:!1,is_placed:!1,isNotFixedThumbs:!1,handle:null},g_sizes={stripSize:0,stripActiveSize:0,stripInnerSize:0,thumbSize:0,thumbSecondSize:0};this.events={STRIP_MOVE:"stripmove",INNER_SIZE_CHANGE:"size_change"};var g_defaultsVertical={strip_thumbs_align:"top",thumb_resize_by:"width"};function initStrip(gallery,customOptions){g_objects=gallery.getObjects(),g_gallery=gallery,g_gallery.attachThumbsPanel("strip",t),g_objGallery=jQuery(gallery),g_objWrapper=g_objects.g_objWrapper,g_arrItems=g_objects.g_arrItems,g_options=jQuery.extend(g_options,customOptions),g_isVertical=g_options.strip_vertical_type,!0==g_isVertical&&(g_options=jQuery.extend(g_options,g_defaultsVertical),g_options=jQuery.extend(g_options,customOptions),customOptions.thumb_resize_by="width"),g_thumbs.init(gallery,customOptions),onAfterSetOptions()}function onAfterSetOptions(){var thumbsOptions=g_thumbs.getOptions();g_temp.isNotFixedThumbs=!1===thumbsOptions.thumb_fixed_size,g_isVertical=g_options.strip_vertical_type}function runStrip(){g_thumbs.setHtmlProperties(),initSizeParams(),fixSize(),positionThumbs(),!1==g_temp.isRunOnce&&(!0==g_options.strip_control_touch&&(g_touchThumbsControl=new UGTouchThumbsControl).init(t),!0==g_options.strip_control_avia&&(g_aviaControl=new UGAviaControl).init(t),checkControlsEnableDisable(),g_thumbs.loadThumbsImages(),initEvents()),g_temp.isRunOnce=!0}function storeStripSize(size){g_sizes.stripSize=size,!1==g_isVertical?g_sizes.stripActiveSize=g_sizes.stripSize-g_options.strip_padding_left-g_options.strip_padding_right:g_sizes.stripActiveSize=g_sizes.stripSize-g_options.strip_padding_top-g_options.strip_padding_bottom,g_sizes.stripActiveSize<0&&(g_sizes.stripActiveSize=0)}function initSizeParams(){var firstThumb=jQuery(g_objStripInner.children(".ug-thumb-wrapper")[0]),thumbsRealWidth=firstThumb.outerWidth(),thumbsRealHeight=firstThumb.outerHeight(),thumbs_options=g_thumbs.getOptions();!1==g_isVertical?(g_sizes.thumbSize=thumbsRealWidth,!0==thumbs_options.thumb_fixed_size?g_sizes.thumbSecondSize=thumbsRealHeight:g_sizes.thumbSecondSize=thumbs_options.thumb_height,storeStripSize(g_objStrip.width()),g_sizes.stripInnerSize=g_objStripInner.width()):(g_sizes.thumbSize=thumbsRealHeight,!0==thumbs_options.thumb_fixed_size?g_sizes.thumbSecondSize=thumbsRealWidth:g_sizes.thumbSecondSize=thumbs_options.thumb_width,storeStripSize(g_objStrip.height()),g_sizes.stripInnerSize=g_objStripInner.height())}function setInnerStripSize(innerSize){!1==g_isVertical?g_objStripInner.width(innerSize):g_objStripInner.height(innerSize),g_sizes.stripInnerSize=innerSize,checkControlsEnableDisable(),jQuery(t).trigger(t.events.INNER_SIZE_CHANGE)}function positionThumbs(){var arrThumbs=g_objStripInner.children(".ug-thumb-wrapper"),posx=0,posy=0;for(!1==g_isVertical&&(posy=g_options.strip_padding_top),i=0;i<arrThumbs.length;i++){var objThumb=jQuery(arrThumbs[i]);if(!0==g_temp.isNotFixedThumbs){if(!1==(objItem=g_thumbs.getItemByThumb(objThumb)).isLoaded)continue;objThumb.show()}g_functions.placeElement(objThumb,posx,posy),!1==g_isVertical?posx+=objThumb.outerWidth()+g_options.strip_space_between_thumbs:posy+=objThumb.outerHeight()+g_options.strip_space_between_thumbs}if(!1==g_isVertical)var innerStripSize=posx-g_options.strip_space_between_thumbs;else var innerStripSize=posy-g_options.strip_space_between_thumbs;setInnerStripSize(innerStripSize)}function fixSize(){if(!1==g_isVertical){var height=g_sizes.thumbSecondSize,objCssStrip={};objCssStrip.height=height+"px";var objCssInner={};objCssInner.height=height+"px"}else{var width=g_sizes.thumbSecondSize,objCssStrip={};objCssStrip.width=width+"px";var objCssInner={};objCssInner.width=width+"px"}g_objStrip.css(objCssStrip),g_objStripInner.css(objCssInner)}function scrollBy(scrollStep){var finalPos=t.getInnerStripPos()+scrollStep;finalPos=t.fixInnerStripLimits(finalPos),t.positionInnerStrip(finalPos,!0)}function scrollToThumbMin(objThumb){var scrollPos=-1*getThumbPos(objThumb).min;scrollPos=t.fixInnerStripLimits(scrollPos),t.positionInnerStrip(scrollPos,!0)}function scrollToThumbMax(objThumb){var scrollPos=-1*getThumbPos(objThumb).max+g_sizes.stripSize;scrollPos=t.fixInnerStripLimits(scrollPos),t.positionInnerStrip(scrollPos,!0)}function scrollToThumb(objThumb){if(!1==isStripMovingEnabled())return!1;var objBounds=getThumbsInsideBounds(),objThumbPos=getThumbPos(objThumb);if(objThumbPos.min<objBounds.minPosThumbs){var prevThumb=objThumb.prev();prevThumb.length?scrollToThumbMin(prevThumb):scrollToThumbMin(objThumb)}else if(objThumbPos.max>objBounds.maxPosThumbs){var nextThumb=objThumb.next();nextThumb.length?scrollToThumbMax(nextThumb):scrollToThumbMax(objThumb)}}function scrollToSelectedThumb(){var selectedItem=g_gallery.getSelectedItem();if(null==selectedItem)return!0;var objThumb=selectedItem.objThumbWrapper;objThumb&&scrollToThumb(objThumb)}function checkAndRepositionInnerStrip(){if(!1==isStripMovingEnabled())return!1;var pos=t.getInnerStripPos(),posFixed=t.fixInnerStripLimits(pos);pos!=posFixed&&t.positionInnerStrip(posFixed,!0)}function checkControlsEnableDisable(){!0==isStripMovingEnabled()?(g_aviaControl&&g_aviaControl.enable(),g_touchThumbsControl&&g_touchThumbsControl.enable()):(g_aviaControl&&g_aviaControl.disable(),g_touchThumbsControl&&g_touchThumbsControl.disable())}function alignInnerStrip(){if(isStripMovingEnabled())return!1;!1==g_isVertical?g_functions.placeElement(g_objStripInner,g_options.strip_thumbs_align,0):g_functions.placeElement(g_objStripInner,0,g_options.strip_thumbs_align)}function onThumbClick(objThumb){if(t.isTouchMotionActive()&& !0==g_touchThumbsControl.isSignificantPassed())return!0;var objItem=g_thumbs.getItemByThumb(objThumb);g_gallery.selectItem(objItem)}function onThumbPlaced(){clearTimeout(g_temp.handle),g_temp.handle=setTimeout(function(){positionThumbs()},50)}function onItemChange(){var objItem=g_gallery.getSelectedItem();g_thumbs.setThumbSelected(objItem.objThumbWrapper),scrollToThumb(objItem.objThumbWrapper)}function initEvents(){g_thumbs.initEvents(),g_objStrip.find(".ug-thumb-wrapper").on("click touchend",function(b){var a=jQuery(this);onThumbClick(a)}),g_objGallery.on(g_gallery.events.ITEM_CHANGE,onItemChange),g_temp.isNotFixedThumbs&&jQuery(g_thumbs).on(g_thumbs.events.AFTERPLACEIMAGE,onThumbPlaced)}function isStripMovingEnabled(){return g_sizes.stripInnerSize>g_sizes.stripActiveSize}function getThumbsInsideBounds(){var obj={},innerPos=t.getInnerStripPos();return obj.minPosThumbs=-1*innerPos+1,obj.maxPosThumbs=-1*innerPos+g_sizes.stripSize-1,obj}function getThumbPos(objThumb){var objReturn={},objPos=objThumb.position();return!1==g_isVertical?(objReturn.min=objPos.left,objReturn.max=objPos.left+g_sizes.thumbSize):(objReturn.min=objPos.top,objReturn.max=objPos.top+g_sizes.thumbSize),objReturn}this.setHtml=function(a){if(!a){var a=g_objWrapper;null!=g_options.parent_container&&(a=g_options.parent_container)}a.append("<div class='ug-thumbs-strip'><div class='ug-thumbs-strip-inner'></div></div>"),g_objStripInner=(g_objStrip=a.children(".ug-thumbs-strip")).children(".ug-thumbs-strip-inner"),g_thumbs.setHtmlThumbs(g_objStripInner),!0==g_temp.isNotFixedThumbs&&g_thumbs.hideThumbs()},this.destroy=function(){var a=g_objStrip.find(".ug-thumb-wrapper");a.off("click"),a.off("touchend"),g_objGallery.off(g_gallery.events.ITEM_CHANGE),jQuery(g_thumbs).off(g_thumbs.events.AFTERPLACEIMAGE),g_touchThumbsControl&&g_touchThumbsControl.destroy(),g_aviaControl&&g_aviaControl.destroy(),g_thumbs.destroy()},this.________EXTERNAL_GENERAL___________=function(){},this.init=function(a,b){initStrip(a,b)},this.run=function(){runStrip()},this.positionInnerStrip=function(c,a){if(void 0===a)var a=!1;if(!1==g_isVertical)var b={left:c+"px"};else var b={top:c+"px"};!1==a?(g_objStripInner.css(b),t.triggerStripMoveEvent()):(t.triggerStripMoveEvent(),g_objStripInner.stop(!0).animate(b,{duration:g_options.strip_scroll_to_thumb_duration,easing:g_options.strip_scroll_to_thumb_easing,queue:!1,progress:function(){t.triggerStripMoveEvent()},always:function(){t.triggerStripMoveEvent()}}))},this.triggerStripMoveEvent=function(){jQuery(t).trigger(t.events.STRIP_MOVE)},this.isTouchMotionActive=function(){return!!g_touchThumbsControl&&g_touchThumbsControl.isTouchActive()},this.isItemThumbVisible=function(h){var b=h.objThumbWrapper,a=b.position(),c=-1*t.getInnerStripPos();if(!1==g_isVertical)var d=c+g_sizes.stripSize,e=a.left,f=a.left+b.width();else var d=c+g_sizes.stripSize,e=a.top,f=a.top+b.height();var g=!1;return f>=c&&e<=d&&(g=!0),g},this.getInnerStripPos=function(){return!1==g_isVertical?g_objStripInner.position().left:g_objStripInner.position().top},this.getInnerStripLimits=function(){var a={};return!1==g_isVertical?a.maxPos=g_options.strip_padding_left:a.maxPos=g_options.strip_padding_top,a.minPos=-(g_sizes.stripInnerSize-g_sizes.stripActiveSize),a},this.fixInnerStripLimits=function(a){var b=t.getInnerStripLimits();return a>b.maxPos&&(a=b.maxPos),a<b.minPos&&(a=b.minPos),a},this.scrollForeward=function(){scrollBy(-g_sizes.stripSize)},this.scrollBack=function(){scrollBy(g_sizes.stripSize)},this.________EXTERNAL_SETTERS___________=function(){},this.setOptions=function(a){g_options=jQuery.extend(g_options,a),g_thumbs.setOptions(a),onAfterSetOptions()},this.setSizeVertical=function(c){if(!1==g_isVertical)throw new Error("setSizeVertical error, the strip size is not vertical");var d=g_sizes.thumbSecondSize,b={};b.width=d+"px",b.height=c+"px",g_objStrip.css(b),storeStripSize(c);var a={};a.width=d+"px",a.left="0px",a.top="0px",g_objStripInner.css(a),g_temp.is_placed=!0,checkControlsEnableDisable()},this.setSizeHorizontal=function(c){if(!0==g_isVertical)throw new Error("setSizeHorizontal error, the strip size is not horizontal");var d=g_sizes.thumbSecondSize+g_options.strip_padding_top+g_options.strip_padding_bottom,b={};b.width=c+"px",b.height=d+"px",g_objStrip.css(b),storeStripSize(c);var e=g_options.strip_padding_left,a={};a.height=d+"px",a.left=e+"px",a.top="0px",g_objStripInner.css(a),g_temp.is_placed=!0,checkControlsEnableDisable()},this.setPosition=function(a,b,c,d){g_functions.placeElement(g_objStrip,a,b,c,d)},this.resize=function(a){!1==g_isVertical?(g_objStrip.width(a),g_sizes.stripActiveSize=a-g_options.strip_padding_left-g_options.strip_padding_right):(g_objStrip.height(a),g_sizes.stripActiveSize=a-g_options.strip_padding_top-g_options.strip_padding_bottom),storeStripSize(a),checkControlsEnableDisable(),checkAndRepositionInnerStrip(),alignInnerStrip(),scrollToSelectedThumb(),g_aviaControl&&g_aviaControl.onResize()},this.setThumbUnselected=function(a){g_thumbs.setThumbUnselected(a)},this.setCustomThumbs=function(a){g_thumbs.setCustomThumbs(a)},this.________EXTERNAL_GETTERS___________=function(){},this.getObjects=function(){var a=g_thumbs.getOptions(),b=jQuery.extend(g_options,a);return{g_gallery:g_gallery,g_objGallery:g_objGallery,g_objWrapper:g_objWrapper,g_arrItems:g_arrItems,g_objStrip:g_objStrip,g_objStripInner:g_objStripInner,g_aviaControl:g_aviaControl,g_touchThumbsControl:g_touchThumbsControl,isVertical:g_isVertical,g_options:b,g_thumbs:g_thumbs}},this.getObjThumbs=function(){return g_thumbs},this.getSelectedThumb=function(){var a=g_gallery.getSelectedItemIndex();return -1==a?null:g_thumbs.getThumbByIndex(a)},this.getSizeAndPosition=function(){return g_functions.getElementSize(g_objStrip)},this.getHeight=function(){return g_objStrip.outerHeight()},this.getWidth=function(){return g_objStrip.outerWidth()},this.getSizes=function(){return g_sizes},this.isVertical=function(){return g_isVertical},this.isPlaced=function(){return g_temp.is_placed},this.isMoveEnabled=function(){return isStripMovingEnabled()}}function UGTouchThumbsControl(){var g_parent,g_gallery,g_objGallery,g_objects,g_objStrip,g_objStripInner,g_options,g_isVertical,g_functions=new UGFunctions,g_serviceParams={touch_portion_time:200,thumb_touch_slowFactor:0,minDeltaTime:70,minPath:10,limitsBreakAddition:30,returnAnimateSpeed:500,animationEasing:"easeOutCubic",returnAnimationEasing:"easeOutCubic"},g_temp={touch_active:!1,loop_active:!1,mousePos:0,innerPos:0,startPos:0,startTime:0,lastTime:0,buttonReleaseTime:0,lastPos:0,lastPortionPos:0,lastDeltaTime:0,lastDeltaPos:0,speed:0,handle:"",touchEnabled:!1,isControlEnabled:!0};function getActionVars(){var currentTime=jQuery.now(),obj={};return obj.passedTime=g_temp.lastTime-g_temp.startTime,obj.lastActiveTime=currentTime-g_temp.buttonReleaseTime,obj.passedDistance=g_temp.lastPos-g_temp.startPos,obj.passedDistanceAbs=Math.abs(obj.passedDistance),obj}function setServiceParams(){g_serviceParams.thumb_touch_slowFactor=g_functions.normalizeSetting(5e-5,.01,1,100,g_options.strip_thumb_touch_sensetivity,!0)}function getMouseOrientPosition(event){return!1==g_isVertical?g_functions.getMousePosition(event).pageX:g_functions.getMousePosition(event).pageY}function handleStripDrag(mousePos){var diff=g_temp.mousePos-mousePos,distPos=g_temp.innerPos-diff,objLimits=g_parent.getInnerStripLimits();if(distPos>objLimits.maxPos){var path=distPos-objLimits.maxPos;distPos=objLimits.maxPos+path/3}if(distPos<objLimits.minPos){var path=objLimits.minPos-distPos;distPos=objLimits.minPos-path/3}g_parent.positionInnerStrip(distPos)}function storeInitTouchValues(pagePos){var currentInnerPos=g_parent.getInnerStripPos();g_temp.mousePos=pagePos,g_temp.innerPos=currentInnerPos,g_temp.lastPortionPos=currentInnerPos,g_temp.lastDeltaTime=0,g_temp.lastDeltaPos=0,g_temp.startTime=jQuery.now(),g_temp.startPos=g_temp.innerPos,g_temp.lastTime=g_temp.startTime,g_temp.lastPos=g_temp.startPos,g_temp.speed=0}function storeTouchPortionData(){var currentTime=jQuery.now();currentTime-g_temp.lastTime>=g_serviceParams.touch_portion_time&&(g_temp.lastDeltaTime=currentTime-g_temp.lastTime,g_temp.lastDeltaTime>g_serviceParams.touch_portion_time&&(g_temp.lastDeltaTime=g_serviceParams.touch_portion_time),g_temp.lastDeltaPos=g_temp.lastPos-g_temp.lastPortionPos,g_temp.lastPortionPos=g_temp.lastPos,g_temp.lastTime=currentTime)}function continueTouchMotion(){var slowFactor=g_serviceParams.thumb_touch_slowFactor,minDeltaTime=g_serviceParams.minDeltaTime,minPath=g_serviceParams.minPath,currentInnerPos=g_parent.getInnerStripPos(),deltaTime=jQuery.now()-g_temp.lastTime,deltaPos=currentInnerPos-g_temp.lastPortionPos;deltaTime<minDeltaTime&&g_temp.lastDeltaTime>0&&(deltaTime=g_temp.lastDeltaTime,deltaPos=g_temp.lastDeltaPos+deltaPos),deltaTime<minDeltaTime&&(deltaTime=minDeltaTime);var dir=deltaPos>0?1:-1,speed=0;deltaTime>0&&(speed=deltaPos/deltaTime);var path=speed*speed/(2*slowFactor)*dir;Math.abs(path)<=minPath&&(path=0);var innerStripPos=g_parent.getInnerStripPos(),newPos=innerStripPos+path,correctPos=g_parent.fixInnerStripLimits(newPos),objLimits=g_parent.getInnerStripLimits(),limitsBreakAddition=g_serviceParams.limitsBreakAddition,doQueue=!1,returnPos=correctPos;if(newPos>objLimits.maxPos&&(doQueue=!0,correctPos=limitsBreakAddition,newPos<limitsBreakAddition&&(correctPos=newPos)),newPos<objLimits.minPos){doQueue=!0;var maxStopPos=objLimits.minPos-limitsBreakAddition;correctPos=maxStopPos,newPos>maxStopPos&&(correctPos=newPos)}var correctPath=correctPos-innerStripPos,animateSpeed=Math.abs(Math.round(speed/slowFactor));if(0!=path&&(animateSpeed=animateSpeed*correctPath/path),innerStripPos!=correctPos){var animateProps={left:correctPos+"px"};!0==g_isVertical&&(animateProps={top:correctPos+"px"}),g_objStripInner.animate(animateProps,{duration:animateSpeed,easing:g_serviceParams.animationEasing,queue:!0,progress:onAnimateProgress})}if(!0==doQueue){var returnAnimateSpeed=g_serviceParams.returnAnimateSpeed,returnAnimateProps={left:returnPos+"px"};!0==g_isVertical&&(returnAnimateProps={top:returnPos+"px"}),g_objStripInner.animate(returnAnimateProps,{duration:returnAnimateSpeed,easing:g_serviceParams.returnAnimationEasing,queue:!0,progress:onAnimateProgress})}}function onAnimateProgress(){g_temp.lastPos=g_parent.getInnerStripPos(),g_parent.triggerStripMoveEvent()}function startStripTouchLoop(){if(!0==g_temp.loop_active)return!0;g_temp.loop_active=!0,g_temp.handle=setInterval(storeTouchPortionData,10)}function endStripTouchLoop(event){if(!1==g_temp.loop_active)return!0;if(event){var pagePos=getMouseOrientPosition(event);continueTouchMotion(pagePos)}g_temp.loop_active=!1,g_temp.handle=clearInterval(g_temp.handle)}function onTouchEnd(event){return!1==g_temp.isControlEnabled||((g_temp.buttonReleaseTime=jQuery.now(),!1==g_temp.touch_active)?(endStripTouchLoop(event),!0):void(event.preventDefault(),g_temp.touch_active=!1,endStripTouchLoop(event),g_objStrip.removeClass("ug-dragging")))}function onTouchStart(event){if(!1==g_temp.isControlEnabled)return!0;event.preventDefault(),g_temp.touch_active=!0;var pagePos=getMouseOrientPosition(event);g_objStripInner.stop(!0),storeInitTouchValues(pagePos),startStripTouchLoop(),g_objStrip.addClass("ug-dragging")}function onTouchMove(event){if(!1==g_temp.isControlEnabled|| !1==g_temp.touch_active)return!0;if(event.preventDefault(),0==event.buttons)return g_temp.touch_active=!1,endStripTouchLoop(event),!0;var pagePos=getMouseOrientPosition(event);g_temp.lastPos=g_parent.getInnerStripPos(),handleStripDrag(pagePos),storeTouchPortionData()}function initEvents(){g_objStrip.bind("mousedown touchstart",onTouchStart),jQuery(window).add("body").bind("mouseup touchend",onTouchEnd),jQuery("body").bind("mousemove touchmove",onTouchMove)}this.enable=function(){g_temp.isControlEnabled=!0},this.disable=function(){g_temp.isControlEnabled=!1},this.init=function(a){g_parent=a,g_objects=a.getObjects(),g_gallery=g_objects.g_gallery,g_objGallery=g_objects.g_objGallery,g_objStrip=g_objects.g_objStrip,g_objStripInner=g_objects.g_objStripInner,g_options=g_objects.g_options,g_isVertical=g_objects.isVertical,setServiceParams(),initEvents()},this.isSignificantPassed=function(){var a=getActionVars();return a.passedTime>300||a.passedDistanceAbs>30},this.isTouchActive=function(){return!0==g_temp.touch_active|| !0==g_objStripInner.is(":animated")||getActionVars().lastActiveTime<50},this.destroy=function(){g_objStrip.unbind("mousedown"),g_objStrip.unbind("touchstart"),jQuery(window).add("body").unbind("mouseup").unbind("touchend"),jQuery("body").unbind("mousemove").unbind("touchmove")}}function UGPanelsBase(){var g_temp,g_panel,g_objPanel,g_options,g_objThis,g_objHandle,g_objGallery,g_gallery=new UniteGalleryMain,t=this,g_functions=new UGFunctions;function placePanelAnimation(panelDest,functionOnComplete){switch(g_temp.orientation){case"right":case"left":var objCss={left:panelDest+"px"};break;case"top":case"bottom":var objCss={top:panelDest+"px"}}g_objPanel.stop(!0).animate(objCss,{duration:300,easing:"easeInOutQuad",queue:!1,complete:function(){functionOnComplete&&functionOnComplete()}})}function placePanelNoAnimation(panelDest){switch(g_temp.orientation){case"right":case"left":g_functions.placeElement(g_objPanel,panelDest,null);break;case"top":case"bottom":g_functions.placeElement(g_objPanel,null,panelDest)}}function onPanelSlideFinish(){g_objThis.trigger(g_panel.events.FINISH_MOVE)}this.init=function(a,b,c,d,e){g_temp=b,g_panel=c,g_gallery=a,g_options=d,g_objThis=e,g_objGallery=jQuery(g_gallery)},this.setHtml=function(b){if(g_objPanel=b,"strip"==g_temp.panelType)var a=g_options.strippanel_enable_handle;else var a=g_options.gridpanel_enable_handle;if(!0==a&&((g_objHandle=new UGPanelHandle).init(g_panel,g_objPanel,g_options,g_temp.panelType,g_gallery),g_objHandle.setHtml()),!0===g_temp.isDisabledAtStart){var c="<div class='ug-overlay-disabled'></div>";g_objPanel.append(c),setTimeout(function(){g_objPanel.children(".ug-overlay-disabled").hide()},g_temp.disabledAtStartTimeout)}},this.placeElements=function(){g_objHandle&&g_objHandle.placeHandle()},this.initEvents=function(){g_objHandle&&(g_objHandle.initEvents(),g_objGallery.on(g_gallery.events.SLIDER_ACTION_START,function(){g_objHandle.hideHandle()}),g_objGallery.on(g_gallery.events.SLIDER_ACTION_END,function(){g_objHandle.showHandle()}))},this.destroy=function(){g_objHandle&&(g_objHandle.destroy(),g_objGallery.off(g_gallery.events.SLIDER_ACTION_START),g_objGallery.off(g_gallery.events.SLIDER_ACTION_END))},this.openPanel=function(a){if(!a)var a=!1;if(g_objPanel.is(":animated")|| !1==g_temp.isClosed)return!1;g_temp.isClosed=!1,g_objThis.trigger(g_panel.events.OPEN_PANEL),!1===a?placePanelAnimation(g_temp.originalPos,onPanelSlideFinish):(placePanelNoAnimation(g_temp.originalPos),onPanelSlideFinish())},this.closePanel=function(a){if(!a)var a=!1;if(g_objPanel.is(":animated")|| !0==g_temp.isClosed)return!1;var b=t.getClosedPanelDest();g_temp.isClosed=!0,g_objThis.trigger(g_panel.events.CLOSE_PANEL),!1===a?placePanelAnimation(b,onPanelSlideFinish):(placePanelNoAnimation(b),onPanelSlideFinish())},this.setClosedState=function(a){g_temp.originalPos=a,g_objThis.trigger(g_panel.events.CLOSE_PANEL),g_temp.isClosed=!0},this.setOpenedState=function(a){g_objThis.trigger(g_panel.events.OPEN_PANEL),g_temp.isClosed=!1},this.getClosedPanelDest=function(){var a,b=g_functions.getElementSize(g_objPanel);switch(g_temp.orientation){case"left":g_temp.originalPos=b.left,a=-g_temp.panelWidth;break;case"right":g_temp.originalPos=b.left;var c=g_gallery.getSize();a=c.width;break;case"top":g_temp.originalPos=b.top,a=-g_temp.panelHeight;break;case"bottom":g_temp.originalPos=b.top;var c=g_gallery.getSize();a=c.height}return a},this.isPanelClosed=function(){return g_temp.isClosed},this.setDisabledAtStart=function(a){if(a<=0)return!1;g_temp.isDisabledAtStart=!0,g_temp.disabledAtStartTimeout=a}}function UGPanelHandle(){var g_objPanel,g_panel,g_objHandleTip,g_functions=new UGFunctions,g_options={panel_handle_align:"top",panel_handle_offset:0,panel_handle_skin:0};function removeHoverState(){g_objHandleTip.removeClass("ug-button-hover")}function setClosedState(){g_objHandleTip.addClass("ug-button-closed")}function removeClosedState(){g_objHandleTip.removeClass("ug-button-closed")}function onHandleClick(event){if(event.stopPropagation(),event.stopImmediatePropagation(),!1==g_functions.validateClickTouchstartEvent(event.type))return!0;g_panel.isPanelClosed()?g_panel.openPanel():g_panel.closePanel()}function checkAndFixAlign(){var orientation=g_panel.getOrientation();switch(orientation){case"right":case"left":"top"!=g_options.panel_handle_align&&"bottom"!=g_options.panel_handle_align&&(g_options.panel_handle_align="top");break;case"bottom":"left"!=g_options.panel_handle_align&&"right"!=g_options.panel_handle_align&&(g_options.panel_handle_align="left");break;case"top":"left"!=g_options.panel_handle_align&&"right"!=g_options.panel_handle_align&&(g_options.panel_handle_align="right")}}this.init=function(c,d,a,b,e){switch(g_panel=c,g_objPanel=d,b){case"grid":g_options.panel_handle_align=a.gridpanel_handle_align,g_options.panel_handle_offset=a.gridpanel_handle_offset,g_options.panel_handle_skin=a.gridpanel_handle_skin;break;case"strip":g_options.panel_handle_align=a.strippanel_handle_align,g_options.panel_handle_offset=a.strippanel_handle_offset,g_options.panel_handle_skin=a.strippanel_handle_skin;break;default:throw new Error("Panel handle error: wrong panel type: "+b)}var f=e.getOptions().gallery_skin;""==g_options.panel_handle_skin&&(g_options.panel_handle_skin=f)},this.setHtml=function(){var b=g_panel.getOrientation(),a="ug-panel-handle-tip";switch(b){case"right":a+=" ug-handle-tip-left";break;case"left":a+=" ug-handle-tip-right";break;case"bottom":a+=" ug-handle-tip-top";break;case"top":a+=" ug-handle-tip-bottom"}g_objPanel.append("<div class='"+a+" ug-skin-"+g_options.panel_handle_skin+"'></div>"),g_objHandleTip=g_objPanel.children(".ug-panel-handle-tip")},this.initEvents=function(){g_functions.addClassOnHover(g_objHandleTip),g_objHandleTip.bind("click touchstart",onHandleClick),jQuery(g_panel).on(g_panel.events.OPEN_PANEL,function(){removeHoverState(),removeClosedState()}),jQuery(g_panel).on(g_panel.events.CLOSE_PANEL,function(){removeHoverState(),setClosedState()})},this.destroy=function(){g_functions.destroyButton(g_objHandleTip),jQuery(g_panel).off(g_panel.events.OPEN_PANEL),jQuery(g_panel).off(g_panel.events.CLOSE_PANEL)},this.placeHandle=function(){var a=g_functions.getElementSize(g_objHandleTip);checkAndFixAlign();var b=g_panel.getOrientation();switch(b){case"left":g_functions.placeElement(g_objHandleTip,"right",g_options.panel_handle_align,-a.width);break;case"right":g_functions.placeElement(g_objHandleTip,-a.width,g_options.panel_handle_align,0,g_options.panel_handle_offset);break;case"top":g_functions.placeElement(g_objHandleTip,g_options.panel_handle_align,"bottom",g_options.panel_handle_offset,-a.height);break;case"bottom":g_functions.placeElement(g_objHandleTip,g_options.panel_handle_align,"top",g_options.panel_handle_offset,-a.height);break;default:throw new Error("Wrong panel orientation: "+b)}},this.hideHandle=function(){!0==g_objHandleTip.is(":visible")&&g_objHandleTip.hide()},this.showHandle=function(){!1==g_objHandleTip.is(":visible")&&g_objHandleTip.show()}}function UGStripPanel(){var g_objButtonNext,g_objButtonPrev,g_objGallery,g_objWrapper,g_objPanel,t=this,g_objThis=jQuery(this),g_gallery=new UniteGalleryMain,g_functions=new UGFunctions,g_objStrip=new UGThumbsStrip,g_panelBase=new UGPanelsBase;this.events={FINISH_MOVE:"gridpanel_move_finish",OPEN_PANEL:"open_panel",CLOSE_PANEL:"close_panel"};var g_options={strippanel_vertical_type:!1,strippanel_padding_top:8,strippanel_padding_bottom:8,strippanel_padding_left:0,strippanel_padding_right:0,strippanel_enable_buttons:!0,strippanel_buttons_skin:"",strippanel_padding_buttons:2,strippanel_buttons_role:"scroll_strip",strippanel_enable_handle:!0,strippanel_handle_align:"top",strippanel_handle_offset:0,strippanel_handle_skin:"",strippanel_background_color:""},g_defaults_vertical={strip_vertical_type:!0,strippanel_padding_left:8,strippanel_padding_right:8,strippanel_padding_top:0,strippanel_padding_bottom:0},g_defaults_no_buttons={strippanel_padding_left:8,strippanel_padding_right:8,strippanel_padding_top:8,strippanel_padding_bottom:8},g_temp={panelType:"strip",panelWidth:0,panelHeight:0,isEventsInited:!1,isClosed:!1,orientation:null,originalPos:null,isFirstRun:!0};function initPanel(gallery,customOptions){g_objGallery=jQuery(g_gallery=gallery);var repeatCustomOptions=!1;!0==(g_options=jQuery.extend(g_options,customOptions)).strippanel_vertical_type&&(g_options=jQuery.extend(g_options,g_defaults_vertical),repeatCustomOptions=!0),!1==g_options.strippanel_enable_buttons&&(g_options=jQuery.extend(g_options,g_defaults_no_buttons),repeatCustomOptions=!0),!0==repeatCustomOptions&&(g_options=jQuery.extend(g_options,customOptions));var globalSkin=g_gallery.getOptions().gallery_skin;""==g_options.strippanel_buttons_skin&&(g_options.strippanel_buttons_skin=globalSkin),g_objWrapper=g_gallery.getElement(),g_panelBase.init(g_gallery,g_temp,t,g_options,g_objThis),(g_objStrip=new UGThumbsStrip).init(g_gallery,g_options)}function validatePanelBeforeRun(){if(!1==g_options.strippanel_vertical_type){if(0==g_temp.panelWidth)throw new Error("Strip panel error: The width not set, please set width")}else if(0==g_temp.panelHeight)throw new Error("Strip panel error: The height not set, please set height");if(null==g_temp.orientation)throw new Error("Wrong orientation, please set panel orientation before run");return!0}function runPanel(){if(!0==g_temp.isFirstRun&& !1==validatePanelBeforeRun())return!1;g_objStrip.run(),setElementsSize(),placeElements(),initEvents(),g_temp.isFirstRun=!1,checkSideButtons()}function setPanelHtml(parentContainer){if(!parentContainer)var parentContainer=g_objWrapper;if(parentContainer.append("<div class='ug-strip-panel'></div>"),g_objPanel=parentContainer.children(".ug-strip-panel"),!0==g_options.strippanel_enable_buttons){var arrowPrevClass="ug-strip-arrow-left",arrowNextClass="ug-strip-arrow-right";!0==g_options.strippanel_vertical_type&&(arrowPrevClass="ug-strip-arrow-up",arrowNextClass="ug-strip-arrow-down"),g_objPanel.append("<div class='ug-strip-arrow "+arrowPrevClass+" ug-skin-"+g_options.strippanel_buttons_skin+"'><div class='ug-strip-arrow-tip'></div></div>"),g_objPanel.append("<div class='ug-strip-arrow "+arrowNextClass+" ug-skin-"+g_options.strippanel_buttons_skin+"'><div class='ug-strip-arrow-tip'></div></div>")}g_panelBase.setHtml(g_objPanel),g_objStrip.setHtml(g_objPanel),!0==g_options.strippanel_enable_buttons&&(g_objButtonPrev=g_objPanel.children("."+arrowPrevClass),g_objButtonNext=g_objPanel.children("."+arrowNextClass)),setHtmlProperties()}function setHtmlProperties(){""!=g_options.strippanel_background_color&&g_objPanel.css("background-color",g_options.strippanel_background_color)}function setElementsSize_hor(){var stripHeight=g_objStrip.getHeight(),panelWidth=g_temp.panelWidth;if(g_objButtonNext){g_objButtonPrev.height(stripHeight),g_objButtonNext.height(stripHeight);var prevTip=g_objButtonPrev.children(".ug-strip-arrow-tip");g_functions.placeElement(prevTip,"center","middle");var nextTip=g_objButtonNext.children(".ug-strip-arrow-tip");g_functions.placeElement(nextTip,"center","middle")}var panelHeight=stripHeight+g_options.strippanel_padding_top+g_options.strippanel_padding_bottom;g_objPanel.width(panelWidth),g_objPanel.height(panelHeight),g_temp.panelHeight=panelHeight;var stripWidth=panelWidth-g_options.strippanel_padding_left-g_options.strippanel_padding_right;g_objButtonNext&&(stripWidth=stripWidth-2*g_objButtonNext.outerWidth()-2*g_options.strippanel_padding_buttons),g_objStrip.resize(stripWidth)}function setElementsSize_vert(){var stripWidth=g_objStrip.getWidth(),panelHeight=g_temp.panelHeight;if(g_objButtonNext){g_objButtonPrev.width(stripWidth),g_objButtonNext.width(stripWidth);var prevTip=g_objButtonPrev.children(".ug-strip-arrow-tip");g_functions.placeElement(prevTip,"center","middle");var nextTip=g_objButtonNext.children(".ug-strip-arrow-tip");g_functions.placeElement(nextTip,"center","middle")}var panelWidth=stripWidth+g_options.strippanel_padding_left+g_options.strippanel_padding_right;g_objPanel.width(panelWidth),g_objPanel.height(panelHeight),g_temp.panelWidth=panelWidth;var stripHeight=panelHeight-g_options.strippanel_padding_top-g_options.strippanel_padding_bottom;g_objButtonNext&&(stripHeight=stripHeight-2*g_objButtonNext.outerHeight()-2*g_options.strippanel_padding_buttons),g_objStrip.resize(stripHeight)}function setElementsSize(){!1==g_options.strippanel_vertical_type?setElementsSize_hor():setElementsSize_vert()}function placeElements_hor(){g_objButtonNext&&(g_functions.placeElement(g_objButtonPrev,"left","top",g_options.strippanel_padding_left,g_options.strippanel_padding_top),g_functions.placeElement(g_objButtonNext,"right","top",g_options.strippanel_padding_right,g_options.strippanel_padding_top));var stripX=g_options.strippanel_padding_left;g_objButtonNext&&(stripX+=g_objButtonNext.outerWidth()+g_options.strippanel_padding_buttons),g_objStrip.setPosition(stripX,g_options.strippanel_padding_top)}function placeElements_vert(){g_objButtonNext&&(g_functions.placeElement(g_objButtonPrev,"left","top",g_options.strippanel_padding_left,g_options.strippanel_padding_top),g_functions.placeElement(g_objButtonNext,"left","bottom",g_options.strippanel_padding_left,g_options.strippanel_padding_bottom));var stripY=g_options.strippanel_padding_top;g_objButtonNext&&(stripY+=g_objButtonNext.outerHeight()+g_options.strippanel_padding_buttons),g_objStrip.setPosition(g_options.strippanel_padding_left,stripY)}function placeElements(){!1==g_options.strippanel_vertical_type?placeElements_hor():placeElements_vert(),g_panelBase.placeElements()}function onNextButtonClick(objButton){if(g_functions.isButtonDisabled(objButton))return!0;"advance_item"==g_options.strippanel_buttons_role?g_gallery.nextItem():g_objStrip.scrollForeward()}function onPrevButtonClick(objButton){if(g_functions.isButtonDisabled(objButton))return!0;"advance_item"==g_options.strippanel_buttons_role?g_gallery.prevItem():g_objStrip.scrollBack()}function checkSideButtons(){if(!g_objButtonNext)return!0;if(!1==g_objStrip.isMoveEnabled())return g_functions.disableButton(g_objButtonPrev),g_functions.disableButton(g_objButtonNext),!0;var limits=g_objStrip.getInnerStripLimits(),pos=g_objStrip.getInnerStripPos();pos>=limits.maxPos?g_functions.disableButton(g_objButtonPrev):g_functions.enableButton(g_objButtonPrev),pos<=limits.minPos?g_functions.disableButton(g_objButtonNext):g_functions.enableButton(g_objButtonNext)}function onStripMove(){checkSideButtons()}function onItemChange(){g_gallery.isLastItem()?g_functions.disableButton(g_objButtonNext):g_functions.enableButton(g_objButtonNext),g_gallery.isFirstItem()?g_functions.disableButton(g_objButtonPrev):g_functions.enableButton(g_objButtonPrev)}function initEvents(){if(!0==g_temp.isEventsInited)return!1;g_temp.isEventsInited=!0,g_objButtonNext&&((g_functions.addClassOnHover(g_objButtonNext,"ug-button-hover"),g_functions.addClassOnHover(g_objButtonPrev,"ug-button-hover"),g_functions.setButtonOnClick(g_objButtonPrev,onPrevButtonClick),g_functions.setButtonOnClick(g_objButtonNext,onNextButtonClick),"advance_item"!=g_options.strippanel_buttons_role)?(jQuery(g_objStrip).on(g_objStrip.events.STRIP_MOVE,onStripMove),jQuery(g_objStrip).on(g_objStrip.events.INNER_SIZE_CHANGE,checkSideButtons),g_objGallery.on(g_gallery.events.SIZE_CHANGE,checkSideButtons)):!1==g_gallery.getOptions().gallery_carousel&&jQuery(g_gallery).on(g_gallery.events.ITEM_CHANGE,onItemChange)),g_panelBase.initEvents()}this.destroy=function(){g_objButtonNext&&(g_functions.destroyButton(g_objButtonNext),g_functions.destroyButton(g_objButtonPrev),jQuery(g_objStrip).off(g_objStrip.events.STRIP_MOVE),jQuery(g_gallery).off(g_gallery.events.ITEM_CHANGE),jQuery(g_gallery).off(g_gallery.events.SIZE_CHANGE)),g_panelBase.destroy(),g_objStrip.destroy()},this.getOrientation=function(){return g_temp.orientation},this.setOrientation=function(a){g_temp.orientation=a},this.init=function(a,b){initPanel(a,b)},this.run=function(){runPanel()},this.setHtml=function(a){setPanelHtml(a)},this.getElement=function(){return g_objPanel},this.getSize=function(){return g_functions.getElementSize(g_objPanel)},this.setWidth=function(a){g_temp.panelWidth=a},this.setHeight=function(a){g_temp.panelHeight=a},this.resize=function(a){t.setWidth(a),setElementsSize(),placeElements()},this.__________Functions_From_Base_____=function(){},this.isPanelClosed=function(){return g_panelBase.isPanelClosed()},this.getClosedPanelDest=function(){return g_panelBase.getClosedPanelDest()},this.openPanel=function(a){g_panelBase.openPanel(a)},this.closePanel=function(a){g_panelBase.closePanel(a)},this.setOpenedState=function(a){g_panelBase.setOpenedState(a)},this.setClosedState=function(a){g_panelBase.setClosedState(a)},this.setCustomThumbs=function(a){g_objStrip.setCustomThumbs(a)},this.setDisabledAtStart=function(a){g_panelBase.setDisabledAtStart(a)}}function UGGridPanel(){var g_objArrowNext,g_objArrowPrev,g_objWrapper,g_objPanel,t=this,g_objThis=jQuery(this),g_gallery=new UniteGalleryMain,g_functions=new UGFunctions,g_objGrid=new UGThumbsGrid,g_panelBase=new UGPanelsBase;this.events={FINISH_MOVE:"gridpanel_move_finish",OPEN_PANEL:"open_panel",CLOSE_PANEL:"close_panel"};var g_options={gridpanel_vertical_scroll:!0,gridpanel_grid_align:"middle",gridpanel_padding_border_top:10,gridpanel_padding_border_bottom:4,gridpanel_padding_border_left:10,gridpanel_padding_border_right:10,gridpanel_arrows_skin:"",gridpanel_arrows_align_vert:"middle",gridpanel_arrows_padding_vert:4,gridpanel_arrows_align_hor:"center",gridpanel_arrows_padding_hor:10,gridpanel_space_between_arrows:20,gridpanel_arrows_always_on:!1,gridpanel_enable_handle:!0,gridpanel_handle_align:"top",gridpanel_handle_offset:0,gridpanel_handle_skin:"",gridpanel_background_color:""},g_defaultsVertical={gridpanel_grid_align:"middle",gridpanel_padding_border_top:2,gridpanel_padding_border_bottom:2},g_defaultsHorType={gridpanel_grid_align:"center"},g_temp={panelType:"grid",isHorType:!1,arrowsVisible:!1,panelHeight:0,panelWidth:0,originalPosX:null,isEventsInited:!1,isClosed:!1,orientation:null};function initGridPanel(gallery,customOptions){g_gallery=gallery,validateOrientation(),customOptions&&customOptions.vertical_scroll&&(g_options.gridpanel_vertical_scroll=customOptions.vertical_scroll),g_options=jQuery.extend(g_options,customOptions),!0==g_temp.isHorType?(g_options=jQuery.extend(g_options,g_defaultsHorType),g_options=jQuery.extend(g_options,customOptions)):!0==g_options.gridpanel_vertical_scroll&&(g_options=jQuery.extend(g_options,g_defaultsVertical),g_options=jQuery.extend(g_options,customOptions),g_options.grid_panes_direction="bottom");var globalSkin=g_gallery.getOptions().gallery_skin;""==g_options.gridpanel_arrows_skin&&(g_options.gridpanel_arrows_skin=globalSkin),g_objWrapper=gallery.getObjects().g_objWrapper,g_panelBase.init(g_gallery,g_temp,t,g_options,g_objThis),(g_objGrid=new UGThumbsGrid).init(g_gallery,g_options)}function validateOrientation(){if(null==g_temp.orientation)throw new Error("Wrong orientation, please set panel orientation before run")}function runPanel(){validateOrientation(),processOptions(),g_objGrid.run(),setArrows(),setPanelSize(),placeElements(),initEvents()}function setHtmlPanel(){g_objWrapper.append("<div class='ug-grid-panel'></div>"),g_objPanel=g_objWrapper.children(".ug-grid-panel"),g_temp.isHorType?(g_objPanel.append("<div class='grid-arrow grid-arrow-left-hortype ug-skin-"+g_options.gridpanel_arrows_skin+"'></div>"),g_objPanel.append("<div class='grid-arrow grid-arrow-right-hortype ug-skin-"+g_options.gridpanel_arrows_skin+"'></div>"),g_objArrowPrev=g_objPanel.children(".grid-arrow-left-hortype"),g_objArrowNext=g_objPanel.children(".grid-arrow-right-hortype")):!1==g_options.gridpanel_vertical_scroll?(g_objPanel.append("<div class='grid-arrow grid-arrow-left ug-skin-"+g_options.gridpanel_arrows_skin+"'></div>"),g_objPanel.append("<div class='grid-arrow grid-arrow-right ug-skin-"+g_options.gridpanel_arrows_skin+"'></div>"),g_objArrowPrev=g_objPanel.children(".grid-arrow-left"),g_objArrowNext=g_objPanel.children(".grid-arrow-right")):(g_objPanel.append("<div class='grid-arrow grid-arrow-up ug-skin-"+g_options.gridpanel_arrows_skin+"'></div>"),g_objPanel.append("<div class='grid-arrow grid-arrow-down ug-skin-"+g_options.gridpanel_arrows_skin+"'></div>"),g_objArrowPrev=g_objPanel.children(".grid-arrow-up"),g_objArrowNext=g_objPanel.children(".grid-arrow-down")),g_panelBase.setHtml(g_objPanel),g_objArrowPrev.fadeTo(0,0),g_objArrowNext.fadeTo(0,0),g_objGrid.setHtml(g_objPanel),setHtmlProperties()}function setHtmlProperties(){""!=g_options.gridpanel_background_color&&g_objPanel.css("background-color",g_options.gridpanel_background_color)}function processOptions(){"center"==g_options.gridpanel_grid_align&&(g_options.gridpanel_grid_align="middle")}function getGridMaxHeight(){var spaceTaken=g_options.gridpanel_padding_border_top+g_options.gridpanel_padding_border_bottom,maxGridHeight=g_temp.panelHeight-spaceTaken;if(!1==g_options.gridpanel_arrows_always_on&&1==g_objGrid.getNumPanesEstimationByHeight(maxGridHeight))return maxGridHeight;var spaceTaken=g_functions.getElementSize(g_objArrowNext).height+g_options.gridpanel_arrows_padding_vert;return!0==g_options.gridpanel_vertical_scroll&&(spaceTaken*=2),spaceTaken+=g_options.gridpanel_padding_border_top+g_options.gridpanel_padding_border_bottom,maxGridHeight=g_temp.panelHeight-spaceTaken}function getGridMaxWidth(){var spaceTaken=g_options.gridpanel_padding_border_left+g_options.gridpanel_padding_border_right,maxGridWidth=g_temp.panelWidth-spaceTaken;if(!1==g_options.gridpanel_arrows_always_on&&1==g_objGrid.getNumPanesEstimationByWidth(maxGridWidth))return maxGridWidth;var arrowsWidth=g_functions.getElementSize(g_objArrowNext).width;return spaceTaken+=(arrowsWidth+g_options.gridpanel_arrows_padding_hor)*2,maxGridWidth=g_temp.panelWidth-spaceTaken}function setArrows(){var showArrows=!1;!0==g_options.gridpanel_arrows_always_on?showArrows=!0:g_objGrid.getNumPanes()>1&&(showArrows=!0),!0==showArrows?(g_objArrowNext.show().fadeTo(0,1),g_objArrowPrev.show().fadeTo(0,1),g_temp.arrowsVisible=!0):(g_objArrowNext.hide(),g_objArrowPrev.hide(),g_temp.arrowsVisible=!1)}function setPanelSize(){var gridSize=g_objGrid.getSize();!0==g_temp.isHorType?g_temp.panelHeight=gridSize.height+g_options.gridpanel_padding_border_top+g_options.gridpanel_padding_border_bottom:g_temp.panelWidth=gridSize.width+g_options.gridpanel_padding_border_left+g_options.gridpanel_padding_border_right,g_functions.setElementSize(g_objPanel,g_temp.panelWidth,g_temp.panelHeight)}function initEvents(){if(!0==g_temp.isEventsInited)return!1;g_temp.isEventsInited=!0,g_objArrowPrev&&(g_functions.addClassOnHover(g_objArrowPrev),g_objGrid.attachPrevPaneButton(g_objArrowPrev)),g_objArrowNext&&(g_functions.addClassOnHover(g_objArrowNext),g_objGrid.attachNextPaneButton(g_objArrowNext)),g_panelBase.initEvents()}function getGridPaddingLeft(){return g_options.gridpanel_padding_border_left}function placeElements_noarrows(){var gridY=g_options.gridpanel_grid_align,gridPaddingY=0;switch(gridY){case"top":gridPaddingY=g_options.gridpanel_padding_border_top;break;case"bottom":gridPaddingY=g_options.gridpanel_padding_border_bottom}var gridPanelLeft=getGridPaddingLeft(),gridElement=g_objGrid.getElement();g_functions.placeElement(gridElement,gridPanelLeft,gridY,0,gridPaddingY)}function placeElementsVert_arrows(){var gridY,prevArrowY,nextArrowY,nextArrowPaddingY,objArrowSize=g_functions.getElementSize(g_objArrowPrev),objGridSize=g_objGrid.getSize();switch(g_options.gridpanel_grid_align){default:case"top":gridY=g_options.gridpanel_padding_border_top+objArrowSize.height+g_options.gridpanel_arrows_padding_vert;break;case"middle":gridY="middle";break;case"bottom":gridY=g_temp.panelHeight-objGridSize.height-objArrowSize.height-g_options.gridpanel_padding_border_bottom-g_options.gridpanel_arrows_padding_vert}var gridPanelLeft=getGridPaddingLeft(),gridElement=g_objGrid.getElement();g_functions.placeElement(gridElement,gridPanelLeft,gridY);var objGridSize=g_objGrid.getSize();switch(g_options.gridpanel_arrows_align_vert){default:case"center":case"middle":prevArrowY=(objGridSize.top-objArrowSize.height)/2,nextArrowY=objGridSize.bottom+(g_temp.panelHeight-objGridSize.bottom-objArrowSize.height)/2,nextArrowPaddingY=0;break;case"grid":prevArrowY=objGridSize.top-objArrowSize.height-g_options.gridpanel_arrows_padding_vert_vert,nextArrowY=objGridSize.bottom+g_options.gridpanel_arrows_padding_vert,nextArrowPaddingY=0;break;case"border":case"borders":prevArrowY=g_options.gridpanel_padding_border_top,nextArrowY="bottom",nextArrowPaddingY=g_options.gridpanel_padding_border_bottom}g_functions.placeElement(g_objArrowPrev,"center",prevArrowY),g_functions.placeElement(g_objArrowNext,"center",nextArrowY,0,nextArrowPaddingY)}function placeElementsVert(){!0==g_temp.arrowsVisible?placeElementsVert_arrows():placeElements_noarrows()}function placeElementsHor_arrows(){var arrowsY,prevArrowPadding,arrowsPaddingY,nextArrowPadding,objArrowSize=g_functions.getElementSize(g_objArrowPrev),objGridSize=g_objGrid.getSize(),gridY=g_options.gridpanel_padding_border_top;switch(g_options.gridpanel_grid_align){case"middle":switch(g_options.gridpanel_arrows_align_vert){default:var elementsHeight=objGridSize.height+g_options.gridpanel_arrows_padding_vert+objArrowSize.height;gridY=(g_temp.panelHeight-elementsHeight)/2;break;case"border":case"borders":gridY=(g_temp.panelHeight-objArrowSize.height-g_options.gridpanel_padding_border_bottom-objGridSize.height)/2}break;case"bottom":var elementsHeight=objGridSize.height+objArrowSize.height+g_options.gridpanel_arrows_padding_vert;gridY=g_temp.panelHeight-elementsHeight-g_options.gridpanel_padding_border_bottom}var gridElement=g_objGrid.getElement(),gridPanelLeft=getGridPaddingLeft();g_functions.placeElement(gridElement,gridPanelLeft,gridY);var objGridSize=g_objGrid.getSize();switch(g_options.gridpanel_arrows_align_vert){default:case"center":case"middle":arrowsY=objGridSize.bottom+(g_temp.panelHeight-objGridSize.bottom-objArrowSize.height)/2,arrowsPaddingY=0;break;case"grid":arrowsY=objGridSize.bottom+g_options.gridpanel_arrows_padding_vert,arrowsPaddingY=0;break;case"border":case"borders":arrowsY="bottom",arrowsPaddingY=g_options.gridpanel_padding_border_bottom}prevArrowPadding=-objArrowSize.width/2-g_options.gridpanel_space_between_arrows/2,g_functions.placeElement(g_objArrowPrev,"center",arrowsY,prevArrowPadding,arrowsPaddingY);var nextArrowPadding=Math.abs(prevArrowPadding);g_functions.placeElement(g_objArrowNext,"center",arrowsY,nextArrowPadding,arrowsPaddingY)}function placeElementsHor(){!0==g_temp.arrowsVisible?placeElementsHor_arrows():placeElements_noarrows()}function placeElementsHorType_arrows(){var gridX,prevArrowX,nextArrowX,arrowsY,objArrowSize=g_functions.getElementSize(g_objArrowPrev),objGridSize=g_objGrid.getSize();switch(g_options.gridpanel_grid_align){default:case"left":gridX=g_options.gridpanel_padding_border_left+g_options.gridpanel_arrows_padding_hor+objArrowSize.width;break;case"middle":case"center":gridX="center";break;case"right":gridX=g_temp.panelWidth-objGridSize.width-objArrowSize.width-g_options.gridpanel_padding_border_right-g_options.gridpanel_arrows_padding_hor}var gridElement=g_objGrid.getElement();switch(g_functions.placeElement(gridElement,gridX,g_options.gridpanel_padding_border_top),objGridSize=g_objGrid.getSize(),g_options.gridpanel_arrows_align_vert){default:case"center":case"middle":arrowsY=(objGridSize.height-objArrowSize.height)/2+objGridSize.top;break;case"top":arrowsY=g_options.gridpanel_padding_border_top+g_options.gridpanel_arrows_padding_vert;break;case"bottom":arrowsY=g_temp.panelHeight-g_options.gridpanel_padding_border_bottom-g_options.gridpanel_arrows_padding_vert-objArrowSize.height}switch(g_options.gridpanel_arrows_align_hor){default:case"borders":prevArrowX=g_options.gridpanel_padding_border_left,nextArrowX=g_temp.panelWidth-g_options.gridpanel_padding_border_right-objArrowSize.width;break;case"grid":prevArrowX=objGridSize.left-g_options.gridpanel_arrows_padding_hor-objArrowSize.width,nextArrowX=objGridSize.right+g_options.gridpanel_arrows_padding_hor;break;case"center":prevArrowX=(objGridSize.left-objArrowSize.width)/2,nextArrowX=objGridSize.right+(g_temp.panelWidth-objGridSize.right-objArrowSize.width)/2}g_functions.placeElement(g_objArrowPrev,prevArrowX,arrowsY),g_functions.placeElement(g_objArrowNext,nextArrowX,arrowsY)}function placeElementHorType_noarrows(){var gridX,objGridSize=g_objGrid.getSize();switch(g_options.gridpanel_grid_align){default:case"left":gridX=g_options.gridpanel_padding_border_left;break;case"middle":case"center":gridX="center";break;case"right":gridX=g_temp.panelWidth-objGridSize.width-g_options.gridpanel_padding_border_right}var gridElement=g_objGrid.getElement();g_functions.placeElement(gridElement,gridX,g_options.gridpanel_padding_border_top)}function placeElementsHorType(){!0==g_temp.arrowsVisible?placeElementsHorType_arrows():placeElementHorType_noarrows()}function placeElements(){!1==g_temp.isHorType?!0==g_options.gridpanel_vertical_scroll?placeElementsVert():placeElementsHor():placeElementsHorType(),g_panelBase.placeElements()}this.destroy=function(){g_objArrowPrev&&g_functions.destroyButton(g_objArrowPrev),g_objArrowNext&&g_functions.destroyButton(g_objArrowNext),g_panelBase.destroy(),g_objGrid.destroy()},this.getOrientation=function(){return g_temp.orientation},this.setOrientation=function(a){switch(g_temp.orientation=a,a){case"right":case"left":g_temp.isHorType=!1;break;case"top":case"bottom":g_temp.isHorType=!0;break;default:throw new Error("Wrong grid panel orientation: "+a)}},this.setHeight=function(a){if(!0==g_temp.isHorType)throw new Error("setHeight is not appliable to this orientatio ("+g_temp.orientation+"). Please use setWidth");g_temp.panelHeight=a;var b=getGridMaxHeight();g_objGrid.setMaxHeight(b)},this.setWidth=function(a){if(!1==g_temp.isHorType)throw new Error("setWidth is not appliable to this orientatio ("+g_temp.orientation+"). Please use setHeight");g_temp.panelWidth=a;var b=getGridMaxWidth();g_objGrid.setMaxWidth(b)},this.init=function(a,b){initGridPanel(a,b)},this.setHtml=function(){setHtmlPanel()},this.run=function(){runPanel()},this.getElement=function(){return g_objPanel},this.getSize=function(){return g_functions.getElementSize(g_objPanel)},this.__________Functions_From_Base_____=function(){},this.isPanelClosed=function(){return g_panelBase.isPanelClosed()},this.getClosedPanelDest=function(){return g_panelBase.getClosedPanelDest()},this.openPanel=function(a){g_panelBase.openPanel(a)},this.closePanel=function(a){g_panelBase.closePanel(a)},this.setOpenedState=function(a){g_panelBase.setOpenedState(a)},this.setClosedState=function(a){g_panelBase.setClosedState(a)},this.setDisabledAtStart=function(a){g_panelBase.setDisabledAtStart(a)}}function UGThumbsGrid(){var g_objGallery,g_objects,g_objWrapper,g_arrItems,g_objGrid,g_objInner,t=this,g_objThis=jQuery(this),g_gallery=new UniteGalleryMain,g_functions=new UGFunctions,g_thumbs=new UGThumbsGeneral,g_tilesDesign=new UGTileDesign,g_options={grid_panes_direction:"left",grid_num_cols:2,grid_min_cols:2,grid_num_rows:2,grid_space_between_cols:10,grid_space_between_rows:10,grid_space_between_mobile:10,grid_transition_duration:300,grid_transition_easing:"easeInOutQuad",grid_carousel:!1,grid_padding:0,grid_vertical_scroll_ondrag:!1};this.events={PANE_CHANGE:"pane_change"};var g_temp={eventSizeChange:"thumb_size_change",isHorizontal:!1,isMaxHeight:!1,isMaxWidth:!1,gridHeight:0,gridWidth:0,innerWidth:0,innerHeight:0,numPanes:0,arrPanes:0,numThumbs:0,currentPane:0,numThumbsInPane:0,isNavigationVertical:!1,touchActive:!1,startScrollPos:0,isFirstTimeRun:!0,isTilesMode:!1,storedEventID:"thumbsgrid",tileMaxWidth:null,tileMaxHeight:null,spaceBetweenCols:null,spaceBetweenRows:null};function init(gallery,customOptions,isTilesMode){if(g_objects=gallery.getObjects(),g_gallery=gallery,g_gallery.attachThumbsPanel("grid",t),g_objGallery=jQuery(gallery),g_objWrapper=g_objects.g_objWrapper,g_arrItems=g_objects.g_arrItems,!0===isTilesMode&&(g_temp.isTilesMode=!0),g_temp.numThumbs=g_arrItems.length,setOptions(customOptions),!0==g_temp.isTilesMode){g_tilesDesign.setFixedMode(),g_tilesDesign.setApproveClickFunction(isApproveTileClick),g_tilesDesign.init(gallery,g_options);var options_td=g_tilesDesign.getOptions();g_temp.tileMaxHeight=options_td.tile_height,g_temp.tileMaxWidth=options_td.tile_width,g_thumbs=g_tilesDesign.getObjThumbs()}else customOptions.thumb_fixed_size=!0,g_thumbs.init(gallery,customOptions)}function setHtml(parentContainer){var objParent=g_objWrapper;parentContainer&&(objParent=parentContainer),objParent.append("<div class='ug-thumbs-grid'><div class='ug-thumbs-grid-inner'></div></div>"),g_objInner=(g_objGrid=objParent.children(".ug-thumbs-grid")).children(".ug-thumbs-grid-inner"),!0==g_temp.isTilesMode?g_tilesDesign.setHtml(g_objInner):g_thumbs.setHtmlThumbs(g_objInner)}function validateBeforeRun(){if(!1==g_temp.isHorizontal){if(0==g_temp.gridHeight)throw new Error("You must set height before run.")}else if(0==g_temp.gridWidth)throw new Error("You must set width before run.")}function run(){var selectedItem=g_gallery.getSelectedItem();if((validateBeforeRun(),!0==g_temp.isFirstTimeRun)?(initEvents(),!0==g_temp.isTilesMode?(initGridDynamicSize(),initSizeParams(),g_tilesDesign.run()):(g_thumbs.setHtmlProperties(),initSizeParams(),g_thumbs.loadThumbsImages())):!0==g_temp.isTilesMode&& !0==initGridDynamicSize()&&(initSizeParams(),g_tilesDesign.run()),positionThumbs(),!0==g_temp.isFirstTimeRun&&g_temp.isTilesMode){var objTiles=g_thumbs.getThumbs();objTiles.each(function(b,a){g_objWrapper.trigger(g_temp.eventSizeChange,jQuery(a))}),objTiles.fadeTo(0,1)}null!=selectedItem&&scrollToThumb(selectedItem.index),g_objThis.trigger(t.events.PANE_CHANGE,g_temp.currentPane),g_temp.isFirstTimeRun=!1}function getThumbsSize(){if(!0==g_temp.isTilesMode)var objThumbSize=g_tilesDesign.getGlobalTileSize();else var objThumbSize=g_thumbs.getGlobalThumbSize();return objThumbSize}function initGridDynamicSize(){if(!1==g_temp.isTilesMode)throw new Error("Dynamic size can be set only in tiles mode");var isChanged=!1,isMobile=g_gallery.isMobileMode(),spaceOld=g_temp.spaceBetweenCols;!0==isMobile?(g_temp.spaceBetweenCols=g_options.grid_space_between_mobile,g_temp.spaceBetweenRows=g_options.grid_space_between_mobile):(g_temp.spaceBetweenCols=g_options.grid_space_between_cols,g_temp.spaceBetweenRows=g_options.grid_space_between_rows),g_temp.spaceBetweenCols!=spaceOld&&(isChanged=!0);var lastThumbWidth=getThumbsSize().width,tileWidth=g_temp.tileMaxWidth;return g_functions.getNumItemsInSpace(g_temp.gridWidth,g_temp.tileMaxWidth,g_temp.spaceBetweenCols)<g_options.grid_min_cols&&(tileWidth=g_functions.getItemSizeInSpace(g_temp.gridWidth,g_options.grid_min_cols,g_temp.spaceBetweenCols)),g_tilesDesign.setTileSizeOptions(tileWidth),tileWidth!=lastThumbWidth&&(isChanged=!0),isChanged}function initSizeParamsHor(){var thumbsHeight=getThumbsSize().height,gridWidth=g_temp.gridWidth,gridHeight=g_options.grid_num_rows*thumbsHeight+(g_options.grid_num_rows-1)*g_temp.spaceBetweenRows+2*g_options.grid_padding;g_temp.gridHeight=gridHeight,g_functions.setElementSize(g_objGrid,gridWidth,gridHeight),g_functions.setElementSize(g_objInner,gridWidth,gridHeight),g_temp.innerWidth=gridWidth,g_temp.innerHeight=gridHeight}function initSizeParamsVert(){var thumbsWidth=getThumbsSize().width,gridWidth=g_options.grid_num_cols*thumbsWidth+(g_options.grid_num_cols-1)*g_temp.spaceBetweenCols+2*g_options.grid_padding,gridHeight=g_temp.gridHeight;g_temp.gridWidth=gridWidth,g_functions.setElementSize(g_objGrid,gridWidth,gridHeight),g_functions.setElementSize(g_objInner,gridWidth,gridHeight),g_temp.innerWidth=gridWidth,g_temp.innerHeight=gridHeight}function initSizeParams(){!1==g_temp.isHorizontal?initSizeParamsVert():initSizeParamsHor()}function scrollToThumb(thumbIndex){var paneIndex=getPaneIndexByThumbIndex(thumbIndex);if(-1==paneIndex)return!1;t.gotoPane(paneIndex,"scroll")}function setOptions(objOptions){g_options=jQuery.extend(g_options,objOptions),g_thumbs.setOptions(objOptions),g_temp.isNavigationVertical="top"==g_options.grid_panes_direction||"bottom"==g_options.grid_panes_direction,g_temp.spaceBetweenCols=g_options.grid_space_between_cols,g_temp.spaceBetweenRows=g_options.grid_space_between_rows}function positionThumb_hor(){var arrThumbs=g_objInner.children(".ug-thumb-wrapper"),posx=0,posy=0,counter=0,baseX=0,maxx=0,maxy=0;g_temp.innerWidth=0,g_temp.numPanes=1,g_temp.arrPanes=[],g_temp.numThumbsInPane=0,g_temp.arrPanes.push(baseX);var numThumbs=arrThumbs.length;for(i=0;i<numThumbs;i++){var objThumb=jQuery(arrThumbs[i]);g_functions.placeElement(objThumb,posx,posy);var thumbWidth=objThumb.outerWidth(),thumbHeight=objThumb.outerHeight();posx>maxx&&(maxx=posx);var endY=posy+thumbHeight;endY>maxy&&(maxy=endY);var endX=maxx+thumbWidth;endX>g_temp.innerWidth&&(g_temp.innerWidth=endX),posx+=thumbWidth+g_temp.spaceBetweenCols,++counter>=g_options.grid_num_cols&&(posy+=thumbHeight+g_temp.spaceBetweenRows,posx=baseX,counter=0),1==g_temp.numPanes&&g_temp.numThumbsInPane++,posy+thumbHeight>g_temp.gridHeight&&(posy=0,posx=baseX=g_temp.innerWidth+g_temp.spaceBetweenCols,counter=0,!0==g_temp.isMaxHeight&&1==g_temp.numPanes&&(g_temp.gridHeight=maxy,g_objGrid.height(g_temp.gridHeight)),i<numThumbs-1&&(g_temp.numPanes++,g_temp.arrPanes.push(baseX)))}g_objInner.width(g_temp.innerWidth),!0==g_temp.isMaxHeight&&1==g_temp.numPanes&&(g_temp.gridHeight=maxy,g_objGrid.height(maxy))}function positionThumb_vert(){var arrThumbs=g_objInner.children(".ug-thumb-wrapper"),posx=0,posy=0,maxy=0,counter=0,baseX=0,paneStartY=0;g_temp.innerWidth=0,g_temp.numPanes=1,g_temp.arrPanes=[],g_temp.numThumbsInPane=0,g_temp.arrPanes.push(baseX);var numThumbs=arrThumbs.length;for(i=0;i<numThumbs;i++){var objThumb=jQuery(arrThumbs[i]);g_functions.placeElement(objThumb,posx,posy);var thumbWidth=objThumb.outerWidth(),thumbHeight=objThumb.outerHeight();posx+=thumbWidth+g_temp.spaceBetweenCols;var endy=posy+thumbHeight;endy>maxy&&(maxy=endy),++counter>=g_options.grid_num_cols&&(posy+=thumbHeight+g_temp.spaceBetweenRows,posx=baseX,counter=0),1==g_temp.numPanes&&g_temp.numThumbsInPane++,endy=posy+thumbHeight;var paneMaxY=paneStartY+g_temp.gridHeight;endy>paneMaxY&&(!0==g_temp.isMaxHeight&&1==g_temp.numPanes&&(g_temp.gridHeight=maxy,g_objGrid.height(g_temp.gridHeight),paneMaxY=g_temp.gridHeight),paneStartY=posy=paneMaxY+g_temp.spaceBetweenRows,posx=baseX=0,counter=0,i<numThumbs-1&&(g_temp.numPanes++,g_temp.arrPanes.push(posy)))}g_objInner.height(maxy),g_temp.innerHeight=maxy,!0==g_temp.isMaxHeight&&1==g_temp.numPanes&&(g_temp.gridHeight=maxy,g_objGrid.height(maxy))}function positionThumb_hortype(){var arrThumbs=g_objInner.children(".ug-thumb-wrapper"),baseX=g_options.grid_padding,baseY=g_options.grid_padding,posy=baseY,posx=baseX,maxx=0,maxy=0,paneMaxY=0,gridMaxY=0,rowsCounter=0;g_temp.innerWidth=0,g_temp.numPanes=1,g_temp.arrPanes=[],g_temp.numThumbsInPane=0,g_temp.arrPanes.push(baseX-g_options.grid_padding);var numThumbs=arrThumbs.length;for(i=0;i<numThumbs;i++){var objThumb=jQuery(arrThumbs[i]),thumbWidth=objThumb.outerWidth(),thumbHeight=objThumb.outerHeight();posx-baseX+thumbWidth>g_temp.gridWidth&&(posy=0,++rowsCounter>=g_options.grid_num_rows?(rowsCounter=0,baseX=posx,posy=baseY,paneMaxY=0,1==g_temp.numPanes&&(g_temp.gridWidth=maxx+g_options.grid_padding,g_objGrid.width(g_temp.gridWidth),g_temp.gridHeight=gridMaxY+g_options.grid_padding,g_objGrid.height(g_temp.gridHeight)),g_temp.numPanes++,g_temp.arrPanes.push(baseX-g_options.grid_padding)):(posx=baseX,posy=paneMaxY+g_temp.spaceBetweenRows)),g_functions.placeElement(objThumb,posx,posy);var endX=posx+thumbWidth;endX>maxx&&(maxx=endX);var endY=posy+thumbHeight;endY>paneMaxY&&(paneMaxY=endY),endY>gridMaxY&&(gridMaxY=endY),endY>maxy&&(maxy=endY);var endX=maxx+thumbWidth;endX>g_temp.innerWidth&&(g_temp.innerWidth=endX),posx+=thumbWidth+g_temp.spaceBetweenCols,1==g_temp.numPanes&&g_temp.numThumbsInPane++}g_temp.innerWidth=maxx+g_options.grid_padding,g_temp.innerHeight=gridMaxY+g_options.grid_padding,g_objInner.width(g_temp.innerWidth),g_objInner.height(g_temp.innerHeight),1==g_temp.numPanes&&(g_temp.gridWidth=maxx+g_options.grid_padding,g_temp.gridHeight=gridMaxY+g_options.grid_padding,g_objGrid.width(g_temp.gridWidth),g_objGrid.height(g_temp.gridHeight))}function positionThumbs(){!1==g_temp.isHorizontal?g_temp.isNavigationVertical?positionThumb_vert():positionThumb_hor():positionThumb_hortype()}function validateThumbIndex(thumbIndex){if(thumbIndex<0||thumbIndex>=g_temp.numThumbs)throw new Error("Thumb not exists: "+thumbIndex);return!0}function validatePaneIndex(paneIndex){if(paneIndex>=g_temp.numPanes||paneIndex<0)throw new Error("Pane "+index+" doesn't exists.");return!0}function setInnerPos(pos){var objCss=getInnerPosObj(pos);if(!1==objCss)return!1;g_objInner.css(objCss)}function animateInnerTo(pos){var objCss=getInnerPosObj(pos);if(!1==objCss)return!1;g_objInner.stop(!0).animate(objCss,{duration:g_options.grid_transition_duration,easing:g_options.grid_transition_easing,queue:!1})}function animateToCurrentPane(){animateInnerTo(-g_temp.arrPanes[g_temp.currentPane])}function getPaneSize(){return!0==g_temp.isNavigationVertical?g_temp.gridHeight:g_temp.gridWidth}function getInnerPosObj(pos){var obj={};return!0==g_temp.isNavigationVertical?obj.top=pos+"px":obj.left=pos+"px",obj}function getInnerPos(){var objSize=g_functions.getElementSize(g_objInner);return!0==g_temp.isNavigationVertical?objSize.top:objSize.left}function getPaneIndexByThumbIndex(thumbIndex){return!1==validateThumbIndex(thumbIndex)?-1:Math.floor(thumbIndex/g_temp.numThumbsInPane)}function isSignificantPassed(){if(1==g_temp.numPanes)return!1;var objData=g_functions.getStoredEventData(g_temp.storedEventID),passedTime=objData.diffTime,passedDistanceAbs=Math.abs(getInnerPos()-objData.startInnerPos);return passedDistanceAbs>30||passedDistanceAbs>5&&passedTime>300}function isMovementValidForChange(){var objData=g_functions.getStoredEventData(g_temp.storedEventID),currentInnerPos=getInnerPos();diffPos=Math.abs(objData.startInnerPos-currentInnerPos);var breakSize=Math.round(3*getPaneSize()/8);return!!(diffPos>=breakSize||objData.diffTime<300&&diffPos>25)}function isApproveTileClick(){return 1==g_temp.numPanes||g_functions.isApproveStoredEventClick(g_temp.storedEventID,g_temp.isNavigationVertical)}function onThumbClick(event){if(!0==isSignificantPassed())return!0;var objThumb=jQuery(this),objItem=g_thumbs.getItemByThumb(objThumb);g_gallery.selectItem(objItem)}function onTouchStart(event){if(1==g_temp.numPanes|| !0==g_temp.touchActive)return!0;!1==g_temp.isTilesMode&&event.preventDefault(),g_temp.touchActive=!0;var addData={startInnerPos:getInnerPos()};g_functions.storeEventData(event,g_temp.storedEventID,addData)}function handleScrollTop(){return!1!=g_options.grid_vertical_scroll_ondrag&& !0!=g_temp.isNavigationVertical&&"vert"===g_functions.handleScrollTop(g_temp.storedEventID)}function onTouchMove(event){if(!1==g_temp.touchActive)return!0;event.preventDefault(),g_functions.updateStoredEventData(event,g_temp.storedEventID);var objData=g_functions.getStoredEventData(g_temp.storedEventID,g_temp.isNavigationVertical);if(handleScrollTop())return!0;var diff=objData.diffMousePos,innerPos=objData.startInnerPos+diff,direction=diff>0?"prev":"next",lastPaneSize=g_temp.arrPanes[g_temp.numPanes-1];!1==g_options.grid_carousel&&innerPos>0&&"prev"==direction&&(innerPos/=3),!1==g_options.grid_carousel&&innerPos< -lastPaneSize&&"next"==direction&&(innerPos=objData.startInnerPos+diff/3),setInnerPos(innerPos)}function onTouchEnd(event){if(!1==g_temp.touchActive)return!0;g_functions.updateStoredEventData(event,g_temp.storedEventID);var objData=g_functions.getStoredEventData(g_temp.storedEventID,g_temp.isNavigationVertical);if(g_temp.touchActive=!1,!1==isMovementValidForChange())return animateToCurrentPane(),!0;"next"==(getInnerPos()-objData.startInnerPos>0?"prev":"next")?!1==g_options.grid_carousel&&t.isLastPane()?animateToCurrentPane():t.nextPane():!1==g_options.grid_carousel&&t.isFirstPane()?animateToCurrentPane():t.prevPane()}function onItemChange(){var objItem=g_gallery.getSelectedItem();g_thumbs.setThumbSelected(objItem.objThumbWrapper),scrollToThumb(objItem.index)}function initEvents(){!1==g_temp.isTilesMode?(g_thumbs.initEvents(),g_objGrid.find(".ug-thumb-wrapper").on("click touchend",onThumbClick),g_objGallery.on(g_gallery.events.ITEM_CHANGE,onItemChange)):g_tilesDesign.initEvents(),g_objGrid.bind("mousedown touchstart",onTouchStart),jQuery("body").bind("mousemove touchmove",onTouchMove),jQuery(window).add("body").bind("mouseup touchend",onTouchEnd)}this.destroy=function(){if(!1==g_temp.isTilesMode){var a=g_objGrid.find(".ug-thumb-wrapper");a.off("click"),a.off("touchend"),g_objGallery.on(g_gallery.events.ITEM_CHANGE),g_thumbs.destroy()}else g_tilesDesign.destroy();g_objGrid.unbind("mousedown"),g_objGrid.unbind("touchstart"),jQuery("body").unbind("mousemove"),jQuery("body").unbind("touchmove"),jQuery(window).add("body").unbind("touchend"),jQuery(window).add("body").unbind("mouseup"),g_objThis.off(t.events.PANE_CHANGE)},this.__________EXTERNAL_GENERAL_________=function(){},this.setThumbUnselected=function(a){g_thumbs.setThumbUnselected(a)},this.isItemThumbVisible=function(a){return getPaneIndexByThumbIndex(a.index)==g_temp.currentPane},this.__________EXTERNAL_API_________=function(){},this.getNumPanesEstimationByHeight=function(c){if(!0==g_temp.isTilesMode)var a=g_options.tile_height;else var a=g_thumbs.getOptions().thumb_height;var b=Math.ceil(g_thumbs.getNumThumbs()/g_options.grid_num_cols);return Math.ceil((b*a+(b-1)*g_temp.spaceBetweenRows)/c)},this.getNumPanesEstimationByWidth=function(c){if(g_temp.isTilesMode)var a=g_options.tile_width;else var a=g_thumbs.getOptions().thumb_width;var b=Math.ceil(g_thumbs.getNumThumbs()/g_options.grid_num_rows);return Math.ceil((b*a+(b-1)*g_temp.spaceBetweenCols)/c)},this.getHeightEstimationByWidth=function(b){if(!1==g_temp.isTilesMode)throw new Error("This function works only with tiles mode");var e,c=g_thumbs.getNumThumbs(),d=g_functions.getNumItemsInSpace(b,g_options.tile_width,g_temp.spaceBetweenCols),a=Math.ceil(c/d);return a>g_options.grid_num_rows&&(a=g_options.grid_num_rows),g_functions.getSpaceByNumItems(a,g_options.tile_height,g_temp.spaceBetweenRows)+2*g_options.grid_padding},this.getElement=function(){return g_objGrid},this.getSize=function(){return g_functions.getElementSize(g_objGrid)},this.getNumPanes=function(){return g_temp.numPanes},this.isFirstPane=function(){return 0==g_temp.currentPane},this.isLastPane=function(){return g_temp.currentPane==g_temp.numPanes-1},this.getPaneInfo=function(){return{pane:g_temp.currentPane,total:g_temp.numPanes}},this.getPane=function(){return g_temp.currentPane},this.setWidth=function(a){g_temp.gridWidth=a,g_temp.isHorizontal=!0},this.setMaxWidth=function(a){g_temp.gridWidth=a,g_temp.isMaxWidth=!0,g_temp.isHorizontal=!0},this.setHeight=function(a){g_temp.gridHeight=a,g_temp.isHorizontal=!1},this.setMaxHeight=function(a){g_temp.gridHeight=a,g_temp.isMaxHeight=!0,g_temp.isHorizontal=!1},this.gotoPane=function(a,c){if(!1==validatePaneIndex(a)||a==g_temp.currentPane)return!1;var b=-g_temp.arrPanes[a];g_temp.currentPane=a,animateInnerTo(b),g_objThis.trigger(t.events.PANE_CHANGE,a)},this.nextPane=function(){var a=g_temp.currentPane+1;if(a>=g_temp.numPanes){if(!1==g_options.grid_carousel)return!0;a=0}t.gotoPane(a,"next")},this.prevPane=function(){var a=g_temp.currentPane-1;if(a<0&&(a=g_temp.numPanes-1,!1==g_options.grid_carousel))return!1;t.gotoPane(a,"prev")},this.attachNextPaneButton=function(a){if(g_functions.setButtonOnClick(a,t.nextPane),!0==g_options.grid_carousel)return!0;t.isLastPane()&&a.addClass("ug-button-disabled"),g_objThis.on(t.events.PANE_CHANGE,function(){t.isLastPane()?a.addClass("ug-button-disabled"):a.removeClass("ug-button-disabled")})},this.attachPrevPaneButton=function(a){if(g_functions.setButtonOnClick(a,t.prevPane),!0==g_options.grid_carousel)return!0;t.isFirstPane()&&a.addClass("ug-button-disabled"),g_objThis.on(t.events.PANE_CHANGE,function(){t.isFirstPane()?a.addClass("ug-button-disabled"):a.removeClass("ug-button-disabled")})},this.attachBullets=function(a){a.setActive(g_temp.currentPane),jQuery(a).on(a.events.BULLET_CLICK,function(c,b){t.gotoPane(b,"theme"),a.setActive(b)}),jQuery(t).on(t.events.PANE_CHANGE,function(c,b){a.setActive(b)})},this.getObjTileDesign=function(){return g_tilesDesign},this.init=function(a,b,c){init(a,b,c)},this.run=function(){run()},this.setHtml=function(a){setHtml(a)}}function UGTileDesign(){var g_objGallery,g_objParentWrapper,g_objWrapper,g_items,t=this,g_objThis=jQuery(this),g_gallery=new UniteGalleryMain,g_functions=new UGFunctions,g_thumbs=new UGThumbsGeneral;this.resizemode={FULL:"full",WRAPPER_ONLY:"wrapper_only",VISIBLE_ELEMENTS:"visible_elements"},this.sizeby={GLOBAL_RATIO:"global_ratio",TILE_RATIO:"tile_ratio",IMAGE_RATIO:"image_ratio",CUSTOM:"custom"},this.events={TILE_CLICK:"tile_click"};var g_options={tile_width:250,tile_height:200,tile_size_by:t.sizeby.IMAGE_RATIO,tile_visible_before_image:!1,tile_enable_background:!0,tile_background_color:"#F0F0F0",tile_enable_border:!1,tile_border_width:3,tile_border_color:"#F0F0F0",tile_border_radius:0,tile_enable_outline:!1,tile_outline_color:"#8B8B8B",tile_enable_shadow:!1,tile_shadow_h:1,tile_shadow_v:1,tile_shadow_blur:3,tile_shadow_spread:2,tile_shadow_color:"#8B8B8B",tile_enable_action:!0,tile_as_link:!1,tile_link_newpage:!0,tile_enable_overlay:!0,tile_overlay_opacity:.4,tile_overlay_color:"#000000",tile_enable_icons:!0,tile_show_link_icon:!1,tile_videoplay_icon_always_on:"never",tile_space_between_icons:26,tile_enable_image_effect:!1,tile_image_effect_type:"bw",tile_image_effect_reverse:!1,tile_enable_textpanel:!1,tile_textpanel_source:"title",tile_textpanel_always_on:!1,tile_textpanel_appear_type:"slide",tile_textpanel_position:"inside_bottom",tile_textpanel_offset:0},g_defaults={thumb_color_overlay_effect:!0,thumb_overlay_reverse:!0,thumb_image_overlay_effect:!1,tile_textpanel_enable_description:!1,tile_textpanel_bg_opacity:.6,tile_textpanel_padding_top:8,tile_textpanel_padding_bottom:8},g_temp={ratioByHeight:0,ratioByWidth:0,eventSizeChange:"thumb_size_change",funcCustomTileHtml:null,funcCustomPositionElements:null,funcParentApproveClick:null,isSaparateIcons:!1,tileInnerReduce:0,isTextpanelOutside:!1,hasImageContainer:!1,isVideoplayIconAlwaysOn:!1,isTextPanelHidden:!1};function init(gallery,customOptions){g_gallery=gallery,g_objGallery=jQuery(gallery),g_objWrapper=g_gallery.getObjects().g_objWrapper,g_items=g_gallery.getArrItems(),g_options=jQuery.extend(g_options,g_defaults),g_options=jQuery.extend(g_options,customOptions),modifyOptions(),g_thumbs.init(gallery,g_options);var objCustomOptions={allow_onresize:!1},customThumbsAdd=["overlay"];g_temp.funcCustomTileHtml&&(customThumbsAdd=[]),g_thumbs.setCustomThumbs(setHtmlThumb,customThumbsAdd,objCustomOptions);var thumbOptions=g_thumbs.getOptions();g_options=jQuery.extend(g_options,thumbOptions),g_temp.ratioByWidth=g_options.tile_width/g_options.tile_height,g_temp.ratioByHeight=g_options.tile_height/g_options.tile_width,g_options.tile_size_by==t.sizeby.GLOBAL_RATIO&&g_temp.isTextpanelOutside&&(g_temp.hasImageContainer=!0)}function modifyOptions(){if(!0==g_options.tile_enable_overlay?(g_options.thumb_overlay_opacity=g_options.tile_overlay_opacity,g_options.thumb_overlay_color=g_options.tile_overlay_color):!1==g_options.tile_enable_icons?g_options.thumb_color_overlay_effect=!1:g_options.thumb_overlay_opacity=0,g_options.tile_as_link&&(g_options.thumb_wrapper_as_link=!0,g_options.thumb_link_newpage=g_options.tile_link_newpage),!0==g_options.tile_enable_outline&& !1==g_options.tile_enable_border&&(g_options.tile_enable_outline=!1),g_temp.tileInnerReduce=0,g_options.tile_enable_border&&(g_temp.tileInnerReduce=2*g_options.tile_border_width,g_thumbs.setThumbInnerReduce(g_temp.tileInnerReduce)),g_temp.isSaparateIcons=!g_functions.isRgbaSupported(),!0==g_options.tile_enable_textpanel){switch(g_options.tile_textpanel_position){case"top":g_options.tile_textpanel_align="top";case"bottom":g_temp.isTextpanelOutside=!0,g_options.tile_textpanel_always_on=!0,g_options.tile_textpanel_offset=0;break;case"inside_top":g_options.tile_textpanel_align="top";break;case"middle":g_options.tile_textpanel_align="middle",g_options.tile_textpanel_appear_type="fade"}!1==g_options.tile_textpanel_always_on&&(g_temp.isSaparateIcons=!0)}0!=g_options.tile_textpanel_offset&&(g_options.tile_textpanel_appear_type="fade",g_options.tile_textpanel_margin=g_options.tile_textpanel_offset),"title_and_desc"==g_options.tile_textpanel_source&&(g_options.tile_textpanel_enable_description=!0,g_options.tile_textpanel_desc_style_as_title=!0)}function modifyOptionsBeforeRender(){var isMobile=g_gallery.isMobileMode();switch(g_temp.isTextPanelHidden=!1,!0==isMobile&& !1==g_options.tile_textpanel_always_on&&(g_temp.isTextPanelHidden=!0),g_temp.isVideoplayIconAlwaysOn=g_options.tile_videoplay_icon_always_on,g_options.tile_videoplay_icon_always_on){case"always":g_temp.isVideoplayIconAlwaysOn=!0;break;case"never":g_temp.isVideoplayIconAlwaysOn=!1;break;case"mobile_only":g_temp.isVideoplayIconAlwaysOn=!0==isMobile;break;case"desktop_only":g_temp.isVideoplayIconAlwaysOn=!1==isMobile}}function setHtmlThumb(objThumbWrapper,objItem){if(objThumbWrapper.addClass("ug-tile"),g_temp.funcCustomTileHtml)return g_temp.funcCustomTileHtml(objThumbWrapper,objItem),!1;var html="";!0==g_temp.hasImageContainer&&(html+="<div class='ug-image-container ug-trans-enabled'>");var classImage="ug-thumb-image";(!1==g_options.tile_enable_image_effect|| !0==g_options.tile_image_effect_reverse)&&(classImage+=" ug-trans-enabled");var imageAlt=g_functions.stripTags(objItem.title);imageAlt=g_functions.htmlentitles(imageAlt),html+='<img src="'+g_functions.escapeDoubleSlash(objItem.urlThumb)+"\" alt='"+imageAlt+"' class='"+classImage+"'>",!0==g_temp.hasImageContainer&&(html+="</div>"),objThumbWrapper.append(html),g_options.tile_size_by==t.sizeby.GLOBAL_RATIO&&objThumbWrapper.fadeTo(0,0);var objCss={};if(!0==g_options.tile_enable_background&&(objCss["background-color"]=g_options.tile_background_color),!0==g_options.tile_enable_border&&(objCss["border-width"]=g_options.tile_border_width+"px",objCss["border-style"]="solid",objCss["border-color"]=g_options.tile_border_color,g_options.tile_border_radius&&(objCss["border-radius"]=g_options.tile_border_radius+"px")),!0==g_options.tile_enable_outline&&(objCss.outline="1px solid "+g_options.tile_outline_color),!0==g_options.tile_enable_shadow){var htmlShadow=g_options.tile_shadow_h+"px ";htmlShadow+=g_options.tile_shadow_v+"px ",htmlShadow+=g_options.tile_shadow_blur+"px ",htmlShadow+=g_options.tile_shadow_spread+"px ",htmlShadow+=g_options.tile_shadow_color,objCss["box-shadow"]=htmlShadow}objThumbWrapper.css(objCss);var htmlAdd="";if(g_options.tile_enable_icons){if(!1==g_options.tile_as_link&& !0==g_options.tile_enable_action){var iconPlayClass="ug-button-play ug-icon-zoom";"image"!=objItem.type&&(iconPlayClass="ug-button-play ug-icon-play"),htmlAdd+="<div class='ug-tile-icon "+iconPlayClass+"' style='display:none'></div>"}if(objItem.link&& !0==g_options.tile_show_link_icon|| !0==g_options.tile_as_link){if(!1==g_options.tile_as_link){var linkTarget="";!0==g_options.tile_link_newpage&&(linkTarget=" target='_blank'"),htmlAdd+="<a href='"+objItem.link+"'"+linkTarget+" class='ug-tile-icon ug-icon-link'></a>"}else htmlAdd+="<div class='ug-tile-icon ug-icon-link' style='display:none'></div>"}var toSaparateIcon=g_temp.isSaparateIcons;if(!1==toSaparateIcon&&"image"!=objItem.type&& !0==g_temp.isVideoplayIconAlwaysOn&&(toSaparateIcon=!0),toSaparateIcon)var objOverlay=objThumbWrapper;else var objOverlay=objThumbWrapper.children(".ug-thumb-overlay");objOverlay.append(htmlAdd);var objButtonZoom=objOverlay.children("."+iconPlayClass);0==objButtonZoom.length?objButtonZoom=null:objButtonZoom.hide();var objButtonLink=objOverlay.children(".ug-icon-link");0==objButtonLink.length?objButtonLink=null:objButtonLink.hide(),objButtonLink|| !0!=g_options.tile_enable_action||objThumbWrapper.addClass("ug-tile-clickable")}else!0==g_options.tile_enable_action&&objThumbWrapper.addClass("ug-tile-clickable");if(!0==g_options.tile_enable_image_effect){var imageEffectClassAdd="";!1==g_options.tile_image_effect_reverse&&(imageEffectClassAdd=" ug-trans-enabled");var imageOverlayHtml="<div class='ug-tile-image-overlay"+imageEffectClassAdd+"' >",imageEffectClass=" ug-"+g_options.tile_image_effect_type+"-effect";imageOverlayHtml+='<img src="'+g_functions.escapeDoubleSlash(objItem.urlThumb)+"\" alt='"+objItem.title+"' class='"+imageEffectClass+imageEffectClassAdd+"'>",imageOverlayHtml+="</div>",objThumbWrapper.append(imageOverlayHtml),!0==g_options.tile_image_effect_reverse&&objThumbWrapper.children(".ug-tile-image-overlay").fadeTo(0,0)}if(!0==g_options.tile_enable_textpanel){var objTextPanel=new UGTextPanel;objTextPanel.init(g_gallery,g_options,"tile");var textpanelAddClass="";(!0==g_options.tile_textpanel_always_on|| !0==g_temp.isTextpanelOutside)&&(textpanelAddClass="ug-trans-enabled"),objTextPanel.appendHTML(objThumbWrapper,textpanelAddClass);var panelTitle=objItem.title,panelDesc="";switch(g_options.tile_textpanel_source){case"desc":case"description":panelTitle=objItem.description;break;case"desc_title":""!=objItem.description&&(panelTitle=objItem.description);break;case"title_and_desc":panelTitle=objItem.title,panelDesc=objItem.description}if(objTextPanel.setTextPlain(panelTitle,panelDesc),!1==g_options.tile_textpanel_always_on&&objTextPanel.getElement().fadeTo(0,0),objThumbWrapper.data("objTextPanel",objTextPanel),!0==g_options.tile_textpanel_always_on&&getTextPanelElement(objThumbWrapper).css("z-index",2),!0==g_temp.isTextpanelOutside){var htmlClone="<div class='ug-tile-cloneswrapper'></div>";objThumbWrapper.append(htmlClone);var objCloneWrapper=objThumbWrapper.children(".ug-tile-cloneswrapper"),objTextPanelClone=new UGTextPanel;objTextPanelClone.init(g_gallery,g_options,"tile"),objTextPanelClone.appendHTML(objCloneWrapper),objTextPanelClone.setTextPlain(panelTitle,panelDesc),objThumbWrapper.data("objTextPanelClone",objTextPanelClone)}}null!==objItem.addHtml&&objThumbWrapper.append(objItem.addHtml)}function getTileOverlayImage(objTile){return objTile.children(".ug-tile-image-overlay")}function getTileOverlay(objTile){return objTile.children(".ug-thumb-overlay")}function getTileImageContainer(objTile){return!1==g_temp.hasImageContainer?null:objTile.children(".ug-image-container")}function getTileImageEffect(objTile){return objTile.find(".ug-tile-image-overlay img")}function getTextPanel(objTile){return objTile.data("objTextPanel")}function getTextPanelClone(objTile){return objTile.data("objTextPanelClone")}function getTextPanelElement(objTile){return objTile.children(".ug-textpanel")}function getTextPanelCloneElement(objTile){var objTextPanel=objTile.find(".ug-tile-cloneswrapper .ug-textpanel");if(0==objTextPanel.length)throw new Error("text panel cloned element not found");return objTextPanel}function getTextPanelHeight(objTile){if(!0==g_temp.isTextpanelOutside)var objTextPanel=getTextPanelCloneElement(objTile);else var objTextPanel=getTextPanelElement(objTile);return objTextPanel?g_functions.getElementSize(objTextPanel).height:0}function getButtonLink(objTile){var objButton=objTile.find(".ug-icon-link");return 0==objButton.length?null:objButton}function getTileRatio(objTile){var ratio=g_temp.ratioByHeight;switch(g_options.tile_size_by){default:ratio=g_temp.ratioByHeight;break;case t.sizeby.IMAGE_RATIO:if(!objTile)throw new Error("tile should be given for tile ratio");var item=t.getItemByTile(objTile);if(void 0!==item.thumbRatioByHeight){if(0==item.thumbRatioByHeight)throw trace(item),new Error("the item ratio not inited yet");ratio=item.thumbRatioByHeight}break;case t.sizeby.CUSTOM:return null}return ratio}function getButtonZoom(objTile){var objButton=objTile.find(".ug-button-play");return 0==objButton.length?null:objButton}function isOverStyle(objTile){return!!objTile.hasClass("ug-thumb-over")}function isTileClickable(objTile){return objTile.hasClass("ug-tile-clickable")}function isItemIconAlwaysOn(objItem){return!0==g_options.tile_enable_icons&& !0==g_temp.isVideoplayIconAlwaysOn&&"image"!=objItem.type}function positionElements_images(objTile,width,height,visibleOnly){var objImageOverlay=getTileOverlayImage(objTile),objThumbImage=t.getTileImage(objTile),objImageEffect=getTileImageEffect(objTile);width-=g_temp.tileInnerReduce,height-=g_temp.tileInnerReduce;var imagePosy=null;if(!0==g_temp.isTextpanelOutside){var textHeight=getTextPanelHeight(objTile);if(height-=textHeight,"top"==g_options.tile_textpanel_position&&(imagePosy=textHeight),!0==g_temp.hasImageContainer){var objImageContainer=getTileImageContainer(objTile);g_functions.setElementSize(objImageContainer,width,height),null!==imagePosy&&g_functions.placeElement(objImageContainer,0,imagePosy)}}if(!1==g_options.tile_enable_image_effect)g_functions.scaleImageCoverParent(objThumbImage,width,height),!1==g_temp.hasImageContainer&&null!==imagePosy&&g_functions.placeElement(objThumbImage,0,imagePosy);else{var dontResize="nothing";!0===visibleOnly&& !1==g_temp.isTextpanelOutside&&(dontResize=!0==g_options.tile_image_effect_reverse?"effect":"image"),"effect"!=dontResize&&(g_functions.setElementSize(objImageOverlay,width,height),null!==imagePosy&&g_functions.placeElement(objImageOverlay,0,imagePosy),g_functions.scaleImageCoverParent(objImageEffect,width,height)),"image"!=dontResize&&(!0==g_temp.hasImageContainer?g_functions.scaleImageCoverParent(objThumbImage,width,height):"effect"==dontResize?(g_functions.scaleImageCoverParent(objThumbImage,width,height),null!==imagePosy&&g_functions.placeElement(objThumbImage,0,imagePosy)):g_functions.cloneElementSizeAndPos(objImageEffect,objThumbImage,!1,null,imagePosy))}}function positionElements_textpanel(objTile,panelType,tileWidth,tileHeight){var panelWidth=null;if(tileWidth&&(panelWidth=tileWidth-g_temp.tileInnerReduce),tileHeight&&(tileHeight-=g_temp.tileInnerReduce),"clone"==panelType)return getTextPanelClone(objTile).refresh(!0,!0,panelWidth),t.getItemByTile(objTile).textPanelCloneSizeSet=!0,!1;var objTextPanel=getTextPanel(objTile);if(!objTextPanel)return!1;var panelHeight=null;if(!0==g_temp.isTextpanelOutside&&(panelHeight=getTextPanelHeight(objTile)),objTextPanel.refresh(!1,!0,panelWidth,panelHeight),!0==g_options.tile_textpanel_always_on||"fade"==g_options.tile_textpanel_appear_type){if(!0==g_temp.isTextpanelOutside&&tileHeight&&"bottom"==g_options.tile_textpanel_position){var posy=tileHeight-panelHeight;objTextPanel.positionPanel(posy)}else objTextPanel.positionPanel()}}function positionElements(objTile){t.getItemByTile(objTile);var objButtonZoom=getButtonZoom(objTile),objButtonLink=getButtonLink(objTile),sizeTile=g_functions.getElementSize(objTile);positionElements_images(objTile,sizeTile.width,sizeTile.height),!0==g_options.tile_enable_textpanel&&positionElements_textpanel(objTile,"regular",sizeTile.width,sizeTile.height);var overlayWidth=sizeTile.width-g_temp.tileInnerReduce,overlayHeight=sizeTile.height-g_temp.tileInnerReduce,overlayY=0;if(!0==g_temp.isTextpanelOutside){var textHeight=getTextPanelHeight(objTile);overlayHeight-=textHeight,"top"==g_options.tile_textpanel_position&&(overlayY=textHeight)}var objOverlay=getTileOverlay(objTile);if(g_functions.setElementSizeAndPosition(objOverlay,0,overlayY,overlayWidth,overlayHeight),objButtonZoom||objButtonLink){var gapVert=0;if(!0==g_options.tile_enable_textpanel&& !1==g_temp.isTextPanelHidden&& !1==g_temp.isTextpanelOutside){var objTextPanelElement=getTextPanelElement(objTile),texPanelSize=g_functions.getElementSize(objTextPanelElement);texPanelSize.height>0&&(gapVert=Math.floor(-(texPanelSize.height/2*1)))}}if(objButtonZoom&&objButtonLink){var sizeZoom=g_functions.getElementSize(objButtonZoom),sizeLink=g_functions.getElementSize(objButtonLink),spaceBetween=g_options.tile_space_between_icons,buttonsWidth=sizeZoom.width+spaceBetween+sizeLink.width,buttonsX=Math.floor((sizeTile.width-buttonsWidth)/2);buttonsX<spaceBetween&&(spaceBetween=Math.floor((sizeTile.width-sizeZoom.width-sizeLink.width)/3),buttonsWidth=sizeZoom.width+spaceBetween+sizeLink.width,buttonsX=Math.floor((sizeTile.width-buttonsWidth)/2)),g_functions.placeElement(objButtonZoom,buttonsX,"middle",0,gapVert),g_functions.placeElement(objButtonLink,buttonsX+sizeZoom.width+spaceBetween,"middle",0,gapVert)}else objButtonZoom&&g_functions.placeElement(objButtonZoom,"center","middle",0,gapVert),objButtonLink&&g_functions.placeElement(objButtonLink,"center","middle",0,gapVert);objButtonZoom&&objButtonZoom.show(),objButtonLink&&objButtonLink.show()}function setImageOverlayEffect(objTile,isActive){t.getItemByTile(objTile);var objOverlayImage=getTileOverlayImage(objTile),animationDuration=g_options.thumb_transition_duration;if(!1==g_options.tile_image_effect_reverse){var objThumbImage=t.getTileImage(objTile);isActive?(objThumbImage.fadeTo(0,1),objOverlayImage.stop(!0).fadeTo(animationDuration,0)):objOverlayImage.stop(!0).fadeTo(animationDuration,1)}else isActive?objOverlayImage.stop(!0).fadeTo(animationDuration,1):objOverlayImage.stop(!0).fadeTo(animationDuration,0)}function setTextpanelEffect(objTile,isActive){var animationDuration=g_options.thumb_transition_duration,objTextPanel=getTextPanelElement(objTile);if(!objTextPanel)return!0;if("slide"==g_options.tile_textpanel_appear_type){var panelSize=g_functions.getElementSize(objTextPanel);if(0==panelSize.width)return!1;var startPos=-panelSize.height,endPos=0,startClass={},endClass={},posName="bottom";"inside_top"==g_options.tile_textpanel_position&&(posName="top"),startClass[posName]=startPos+"px",endClass[posName]=endPos+"px",!0==isActive?(objTextPanel.fadeTo(0,1),!1==objTextPanel.is(":animated")&&objTextPanel.css(startClass),endClass.opacity=1,objTextPanel.stop(!0).animate(endClass,animationDuration)):objTextPanel.stop(!0).animate(startClass,animationDuration)}else!0==isActive?objTextPanel.stop(!0).fadeTo(animationDuration,1):objTextPanel.stop(!0).fadeTo(animationDuration,0)}function setIconsEffect(objTile,isActive,noAnimation){var animationDuration=g_options.thumb_transition_duration;noAnimation&& !0===noAnimation&&(animationDuration=0);var g_objIconZoom=getButtonZoom(objTile),g_objIconLink=getButtonLink(objTile),opacity=isActive?1:0;g_objIconZoom&&g_objIconZoom.stop(!0).fadeTo(animationDuration,opacity),g_objIconLink&&g_objIconLink.stop(!0).fadeTo(animationDuration,opacity)}function setOverStyle(data,objTile){if(objTile=jQuery(objTile),g_options.tile_enable_image_effect&&setImageOverlayEffect(objTile,!0),!0==g_options.tile_enable_textpanel&& !1==g_options.tile_textpanel_always_on&& !1==g_temp.isTextPanelHidden&&setTextpanelEffect(objTile,!0),g_temp.isSaparateIcons&& !0==g_options.tile_enable_icons){var isSet=!0==g_options.thumb_overlay_reverse,objItem=t.getItemByTile(objTile);!1==isItemIconAlwaysOn(objItem)&&setIconsEffect(objTile,isSet,!1)}}function setNormalStyle(data,objTile){if(objTile=jQuery(objTile),g_options.tile_enable_image_effect&&setImageOverlayEffect(objTile,!1),!0==g_options.tile_enable_textpanel&& !1==g_options.tile_textpanel_always_on&&setTextpanelEffect(objTile,!1),!0==g_temp.isSaparateIcons&& !0==g_options.tile_enable_icons){var isSet=!0!=g_options.thumb_overlay_reverse,objItem=t.getItemByTile(objTile);!1==isItemIconAlwaysOn(objItem)?setIconsEffect(objTile,isSet,!1):setIconsEffect(objTile,!0,!0)}}function setAllTilesNormalStyle(objTileExcept){g_thumbs.getThumbs().not(objTileExcept).each(function(b,a){g_thumbs.setThumbNormalStyle(jQuery(a))})}function onSizeChange(data,objTile,forcePosition){if(objTile=jQuery(objTile),!0==g_options.tile_visible_before_image&& !0!==objTile.data("image_placed")&& !0!==forcePosition)return!0;positionElements(objTile),g_thumbs.setThumbNormalStyle(objTile)}function onPlaceImage(data,objTile,objImage){positionElements(objTile),objImage.fadeTo(0,1),objTile.data("image_placed",!0)}function onMobileClick(objTile){if(!0==isTileClickable(objTile))return g_objThis.trigger(t.events.TILE_CLICK,objTile),!0;!1==isOverStyle(objTile)&&(setAllTilesNormalStyle(objTile),g_thumbs.setThumbOverStyle(objTile))}function onTileClick(event){var objTile=jQuery(this),tagname=objTile.prop("tagName").toLowerCase(),isApproved=!0;if(g_temp.funcParentApproveClick&& !1==g_temp.funcParentApproveClick()&&(isApproved=!1),"a"==tagname)!1==isApproved&&event.preventDefault();else if(!1==isOverStyle(objTile))!0==isApproved&&onMobileClick(objTile);else{if(!1==isTileClickable(objTile))return!0;!0==isApproved&&g_objThis.trigger(t.events.TILE_CLICK,objTile)}}function onZoomButtonClick(event){event.stopPropagation();var objTile=jQuery(this).parents(".ug-tile"),isApproved=!0;return(g_temp.funcParentApproveClick&& !1==g_temp.funcParentApproveClick()&&(isApproved=!1),!1==isOverStyle(objTile))?(onMobileClick(objTile),!0):!0==isApproved?(g_objThis.trigger(t.events.TILE_CLICK,objTile),!1):void 0}function onLinkButtonClick(event){var objTile=jQuery(this).parents(".ug-tile");g_temp.funcParentApproveClick&& !1==g_temp.funcParentApproveClick()&&event.preventDefault(),!1==isOverStyle(objTile)&& !1==g_options.tile_as_link&&(event.preventDefault(),onMobileClick(objTile))}this.loadTileImage=function(a){var b=t.getTileImage(a);g_functions.checkImagesLoaded(b,null,function(b,c){onPlaceImage(null,a,jQuery(b))})},this.setHtml=function(a,b){g_objParentWrapper=a,!0!==b&&modifyOptionsBeforeRender(),g_thumbs.setHtmlThumbs(a,b)},this.initEvents=function(){g_thumbs.initEvents(),jQuery(g_thumbs).on(g_thumbs.events.SETOVERSTYLE,setOverStyle),jQuery(g_thumbs).on(g_thumbs.events.SETNORMALSTYLE,setNormalStyle),jQuery(g_thumbs).on(g_thumbs.events.PLACEIMAGE,onPlaceImage),g_objWrapper.on(g_temp.eventSizeChange,onSizeChange),g_objParentWrapper.on("click",".ug-tile",onTileClick),g_objParentWrapper.on("click",".ug-tile .ug-button-play",onZoomButtonClick),g_objParentWrapper.on("click",".ug-tile .ug-icon-link",onLinkButtonClick)},this.destroy=function(){if(g_objParentWrapper.off("click",".ug-tile"),g_objParentWrapper.off("click",".ug-tile .ug-button-play"),g_objParentWrapper.off("click",".ug-tile .ug-icon-link"),jQuery(g_thumbs).off(g_thumbs.events.SETOVERSTYLE),jQuery(g_thumbs).off(g_thumbs.events.SETNORMALSTYLE),jQuery(g_thumbs).off(g_thumbs.events.PLACEIMAGE),g_objWrapper.off(g_temp.eventSizeChange),!0==g_options.tile_enable_textpanel){var a=g_thumbs.getThumbs();jQuery.each(a,function(c,b){var a=getTextPanel(jQuery(b));a&&a.destroy()})}g_thumbs.destroy()},this.init=function(a,b,c){init(a,b,c)},this.setFixedMode=function(){g_options.tile_size_by=t.sizeby.GLOBAL_RATIO,g_options.tile_visible_before_image=!0},this.setApproveClickFunction=function(a){g_temp.funcParentApproveClick=a},this.resizeTile=function(b,a,c,d){if(!0==g_temp.isTextpanelOutside&&positionElements_textpanel(b,"clone",a),a){if(!c)var c=t.getTileHeightByWidth(a,b)}else var a=g_options.tile_width,c=g_options.tile_height;switch(g_functions.setElementSize(b,a,c),d){default:case t.resizemode.FULL:t.triggerSizeChangeEvent(b,!0);break;case t.resizemode.WRAPPER_ONLY:return!0;case t.resizemode.VISIBLE_ELEMENTS:if(g_temp.funcCustomTileHtml)return t.triggerSizeChangeEvent(b,!0),!0;positionElements_images(b,a,c,!0),!0==g_options.tile_enable_textpanel&& !0==g_options.tile_textpanel_always_on&&a&&positionElements_textpanel(b,"regular",a,c)}},this.resizeAllTiles=function(b,d,a){modifyOptionsBeforeRender();var c=null;if(g_options.tile_size_by==t.sizeby.GLOBAL_RATIO&&(c=t.getTileHeightByWidth(b)),!a)var a=g_thumbs.getThumbs();a.each(function(e,a){t.resizeTile(jQuery(a),b,c,d)})},this.triggerSizeChangeEvent=function(b,a){if(!b)return!1;if(!a)var a=!1;g_objWrapper.trigger(g_temp.eventSizeChange,[b,a])},this.triggerSizeChangeEventAllTiles=function(a){g_thumbs.getThumbs().each(function(){var b=jQuery(this);t.triggerSizeChangeEvent(b,a)})},this.disableEvents=function(){g_thumbs.getThumbs().css("pointer-events","none")},this.enableEvents=function(){g_thumbs.getThumbs().css("pointer-events","auto")},this.setOptions=function(a){g_options=jQuery.extend(g_options,a),g_thumbs.setOptions(a)},this.setTileSizeOptions=function(a){if(g_options.tile_size_by!==t.sizeby.GLOBAL_RATIO)throw new Error("setNewTileOptions works with global ration only");g_options.tile_width=a,g_options.tile_height=Math.floor(a*g_temp.ratioByHeight)},this.setCustomFunctions=function(a,b){g_temp.funcCustomTileHtml=a,g_temp.funcCustomPositionElements=b},this.run=function(c){var b=g_thumbs.type.GET_THUMBS_ALL;!0===c&&(b=g_thumbs.type.GET_THUMBS_NEW);var a=g_thumbs.getThumbs(b);g_options.tile_size_by==t.sizeby.GLOBAL_RATIO&&t.resizeAllTiles(g_options.tile_width,t.resizemode.WRAPPER_ONLY,a),!0==g_options.tile_enable_image_effect&& !1==g_options.tile_image_effect_reverse&&a.children(".ug-thumb-image").fadeTo(0,0),g_thumbs.setHtmlProperties(a),!0==g_options.tile_visible_before_image&&(a.children(".ug-thumb-image").fadeTo(0,0),g_thumbs.loadThumbsImages())},this._____________EXTERNAL_GETTERS____________=function(){},this.getObjThumbs=function(){return g_thumbs},this.getOptions=function(){return g_options},this.getTileImage=function(a){return a.find("img.ug-thumb-image")},this.getItemByTile=function(a){return g_thumbs.getItemByThumb(a)},this.getTileHeightByWidth=function(d,a){var b=getTileRatio(a);if(null===b)return null;var c=Math.floor((d-g_temp.tileInnerReduce)*b)+g_temp.tileInnerReduce;return a&& !0==g_temp.isTextpanelOutside&&g_options.tile_size_by==t.sizeby.IMAGE_RATIO&&(c+=getTextPanelHeight(a)),c},this.getTileImageSize=function(b){var a=t.getItemByTile(b);if(!a.thumbWidth||!a.thumbHeight)throw new Error("Can't get image size - image not inited.");return{width:a.thumbWidth,height:a.thumbHeight}},this.getGlobalTileSize=function(){if(g_options.tile_size_by!=t.sizeby.GLOBAL_RATIO)throw new Error("The size has to be global ratio");return{width:g_options.tile_width,height:g_options.tile_height}}}function UGTiles(){var g_arrNestedGridRow,g_arrNestedItems,g_objGallery,g_objWrapper,g_objParent,g_arrItems,t=this,g_objThis=jQuery(this),g_gallery=new UniteGalleryMain,g_functions=new UGFunctions,g_objTileDesign=new UGTileDesign,g_thumbs=new UGThumbsGeneral,g_vars={},g_options={tiles_type:"columns",tiles_col_width:250,tiles_align:"center",tiles_exact_width:!1,tiles_space_between_cols:3,tiles_space_between_cols_mobile:3,tiles_include_padding:!0,tiles_min_columns:2,tiles_max_columns:0,tiles_keep_order:!1,tiles_set_initial_height:!0,tiles_justified_row_height:150,tiles_justified_space_between:3,tiles_nested_optimal_tile_width:250,tiles_nested_col_width:null,tiles_nested_debug:!1,tiles_enable_transition:!0};this.events={THUMB_SIZE_CHANGE:"thumb_size_change",TILES_FIRST_PLACED:"tiles_first_placed",ALL_TILES_LOADED:"all_tiles_loaded"};var g_temp={isFirstTimeRun:!0,handle:null,isTransActive:!1,isTransInited:!1,isFirstPlaced:!0,isAllLoaded:!1},g_nestedWork={colWidth:null,nestedOptimalCols:5,gridY:0,maxColumns:0,columnsValueToEnableHeightResize:3,resizeLeftRightToColumn:!0,currentItem:0,currentGap:null,optimalTileWidth:null,maxGridY:0};function init(gallery,customOptions){g_objects=gallery.getObjects(),g_gallery=gallery,g_objGallery=jQuery(gallery),g_objWrapper=g_objects.g_objWrapper,g_arrItems=g_objects.g_arrItems,g_options=jQuery.extend(g_options,customOptions),modifyOptions(),g_objTileDesign.init(gallery,g_options),g_thumbs=g_objTileDesign.getObjThumbs()}function modifyOptions(){g_options.tiles_min_columns<1&&(g_options.tiles_min_columns=1),0!=g_options.tiles_max_columns&&g_options.tiles_max_columns<g_options.tiles_min_columns&&(g_options.tiles_max_columns=g_options.tiles_min_columns)}function setHtml(objParent){if(!objParent){if(g_objParent)objParent=g_objParent;else var objParent=g_objWrapper}g_objParent=objParent;var tilesType=g_options.tiles_type;objParent.addClass("ug-tiletype-"+tilesType),g_objTileDesign.setHtml(objParent),objParent.children(".ug-thumb-wrapper").hide()}function setTransition(){if(g_objParent.addClass("ug-tiles-rest-mode"),g_temp.isTransInited=!0,!0==g_options.tiles_enable_transition){g_objParent.addClass("ug-tiles-transit");var optionsTile=g_objTileDesign.getOptions();!0==optionsTile.tile_enable_image_effect&& !1==optionsTile.tile_image_effect_reverse&&g_objParent.addClass("ug-tiles-transit-overlays"),g_temp.isTransActive=!0}}function getParentWidth(){return g_functions.getElementSize(g_objParent).width}function doBeforeTransition(){return!1!=g_temp.isTransInited&&(g_objParent.addClass("ug-tiles-transition-active"),g_objParent.removeClass("ug-tiles-rest-mode"),!1!=g_temp.isTransActive&&void g_objTileDesign.disableEvents())}function doAfterTransition_setClasses(){if(!1==g_temp.isTransInited)return!1;g_objParent.removeClass("ug-tiles-transition-active"),g_objParent.addClass("ug-tiles-rest-mode")}function doAfterTransition(){!0==g_temp.isTransActive?(setTimeout(function(){g_objTileDesign.enableEvents(),g_objTileDesign.triggerSizeChangeEventAllTiles(),doAfterTransition_setClasses()},800),g_temp.handle&&clearTimeout(g_temp.handle),g_temp.handle=setTimeout(function(){doAfterTransition_setClasses(),g_objTileDesign.triggerSizeChangeEventAllTiles(),g_temp.handle=null},2e3)):(g_objTileDesign.triggerSizeChangeEventAllTiles(),doAfterTransition_setClasses())}function fillTilesVars_countWidthByCols(){g_vars.colWidth=(g_vars.availWidth-g_vars.colGap*(g_vars.numCols-1))/g_vars.numCols,g_vars.colWidth=Math.floor(g_vars.colWidth),g_vars.totalWidth=g_functions.getSpaceByNumItems(g_vars.numCols,g_vars.colWidth,g_vars.colGap)}function fillTilesVars(){if(g_vars.colWidth=g_options.tiles_col_width,g_vars.minCols=g_options.tiles_min_columns,g_vars.maxCols=g_options.tiles_max_columns,!1==g_gallery.isMobileMode()?g_vars.colGap=g_options.tiles_space_between_cols:g_vars.colGap=g_options.tiles_space_between_cols_mobile,g_vars.galleryWidth=getParentWidth(),g_vars.availWidth=g_vars.galleryWidth,!0==g_options.tiles_include_padding&&(g_vars.availWidth=g_vars.galleryWidth-2*g_vars.colGap),!0==g_options.tiles_exact_width)g_vars.numCols=g_functions.getNumItemsInSpace(g_vars.availWidth,g_vars.colWidth,g_vars.colGap),g_vars.maxCols>0&&g_vars.numCols>g_vars.maxCols&&(g_vars.numCols=g_vars.maxCols),g_vars.numCols<g_vars.minCols?(g_vars.numCols=g_vars.minCols,fillTilesVars_countWidthByCols()):g_vars.totalWidth=g_vars.numCols*(g_vars.colWidth+g_vars.colGap)-g_vars.colGap;else{var numCols=g_functions.getNumItemsInSpaceRound(g_vars.availWidth,g_vars.colWidth,g_vars.colGap);numCols<g_vars.minCols?numCols=g_vars.minCols:0!=g_vars.maxCols&&numCols>g_vars.maxCols&&(numCols=g_vars.maxCols),g_vars.numCols=numCols,fillTilesVars_countWidthByCols()}switch(g_options.tiles_align){case"center":default:g_vars.addX=Math.round((g_vars.galleryWidth-g_vars.totalWidth)/2);break;case"left":g_vars.addX=0;break;case"right":g_vars.addX=g_vars.galleryWidth-g_vars.totalWidth}for(col=0,g_vars.arrPosx=[];col<g_vars.numCols;col++){var colX=g_functions.getColX(col,g_vars.colWidth,g_vars.colGap);g_vars.arrPosx[col]=colX+g_vars.addX}}function initColHeights(){g_vars.maxColHeight=0,g_vars.colHeights=[0]}function getTilesMinCol(){var numCol=0,minHeight=999999999;for(col=0;col<g_vars.numCols;col++){if(void 0==g_vars.colHeights[col]||0==g_vars.colHeights[col])return col;g_vars.colHeights[col]<minHeight&&(numCol=col,minHeight=g_vars.colHeights[col])}return numCol}function placeTile(objTile,toShow,setGalleryHeight,numCol){if(null==numCol)var numCol=getTilesMinCol();var posy=0;void 0!==g_vars.colHeights[numCol]&&(posy=g_vars.colHeights[numCol]);var itemHeight=g_objTileDesign.getTileHeightByWidth(g_vars.colWidth,objTile);if(null===itemHeight){if(!0==g_options.tiles_enable_transition)throw new Error("Can't know tile height, please turn off transition");itemHeight=g_functions.getElementSize(objTile).height}var posx=g_vars.arrPosx[numCol];g_functions.placeElement(objTile,posx,posy);var realHeight=posy+itemHeight;g_vars.colHeights[numCol]=realHeight+g_vars.colGap,g_vars.maxColHeight<realHeight&&(g_vars.maxColHeight=realHeight),!0==toShow&&objTile.show().fadeTo(0,1),!0==setGalleryHeight&&g_objParent.height(g_vars.maxColHeight)}function placeTiles(toShow){toShow||(toShow=!1),fillTilesVars(),initColHeights();var objThumbs=g_thumbs.getThumbs(g_thumbs.type.GET_THUMBS_RATIO);doBeforeTransition(),g_objTileDesign.resizeAllTiles(g_vars.colWidth,g_objTileDesign.resizemode.VISIBLE_ELEMENTS,objThumbs);for(var index=0;index<objThumbs.length;index++){var objTile=jQuery(objThumbs[index]),col=void 0;!0==g_options.tiles_keep_order&&(col=g_functions.getColByIndex(g_vars.numCols,index)),placeTile(objTile,toShow,!1,col)}doAfterTransition();var galleryHeight=g_objParent.height();!0==g_temp.isTransActive&&galleryHeight>g_vars.maxColHeight?setTimeout(function(){g_objParent.height(g_vars.maxColHeight)},700):g_objParent.height(g_vars.maxColHeight)}function isOrderedTilePlaceAlowed(objTile){var index=objTile.index();if(!0===g_gallery.getItem(index).ordered_placed)return!1;var prevIndex=g_functions.getPrevRowSameColIndex(index,g_vars.numCols);return prevIndex<0|| !0===g_gallery.getItem(prevIndex).ordered_placed}function placeOrderedTile(objTile,isForce){if(!0!==isForce&& !1==isOrderedTilePlaceAlowed(objTile))return!1;var index=objTile.index(),col=g_functions.getColByIndex(g_vars.numCols,index),objItem=g_gallery.getItem(index);g_objTileDesign.resizeTile(objTile,g_vars.colWidth),placeTile(objTile,!0,!0,col),objItem.ordered_placed=!0;var numItems=g_gallery.getNumItems(),nextIndex=g_functions.getNextRowSameColIndex(index,g_vars.numCols);if(nextIndex>=numItems)return!1;var nextTile=g_thumbs.getThumbByIndex(nextIndex),nextItem=g_gallery.getItem(nextIndex);g_thumbs.isThumbLoaded(nextTile),g_thumbs.isThumbLoaded(nextTile)&&!nextItem.ordered_placed&&placeOrderedTile(nextTile,!0)}function onSingleImageLoad(objImage,isError){if(!0==isError)return!1;objImage=jQuery(objImage);var objTile=jQuery(objImage).parent();g_thumbs.triggerImageLoadedEvent(objTile,objImage),!0==g_options.tiles_keep_order?placeOrderedTile(objTile):(g_objTileDesign.resizeTile(objTile,g_vars.colWidth),placeTile(objTile,!0,!0))}function runColumnsType(){var objThumbs=g_thumbs.getThumbs(g_thumbs.type.GET_THUMBS_NO_RATIO);if(!objThumbs||0==objThumbs.length)return!1;if(g_temp.isAllLoaded=!1,!0==g_temp.isFirstPlaced){fillTilesVars(),initColHeights();var diffWidth=Math.abs(g_vars.galleryWidth-g_vars.totalWidth);if(!0==g_options.tiles_set_initial_height&& !1==g_functions.isScrollbarExists()&&diffWidth<25){objThumbs.length;var estimateHeight=Math.ceil(objThumbs.length/g_vars.numCols)*g_options.tiles_col_width*.75;g_objParent.height(estimateHeight),fillTilesVars()}}objThumbs.fadeTo(0,0);var objImages=objThumbs.find("img.ug-thumb-image"),initNumCols=g_vars.numCols,initWidth=g_vars.galleryWidth;g_functions.checkImagesLoaded(objImages,function(){fillTilesVars(),(initNumCols!=g_vars.numCols||initWidth!=g_vars.galleryWidth)&&placeTiles(!1),setTransition(),g_objThis.trigger(t.events.ALL_TILES_LOADED)},function(a,b){!0==g_temp.isFirstPlaced&&g_gallery.triggerEvent(t.events.TILES_FIRST_PLACED),onSingleImageLoad(a,b)})}function getJustifiedData(){var galleryWidth=getParentWidth(),objTiles=g_thumbs.getThumbs(!0),rowHeightOpt=g_options.tiles_justified_row_height,arrWidths=[],totalWidth=0,gap=g_options.tiles_justified_space_between,numTiles=objTiles.length;jQuery.each(objTiles,function(d,a){a=jQuery(a);var b=g_thumbs.getItemByThumb(a),c=b.thumbWidth;b.thumbHeight!==rowHeightOpt&&(c=Math.floor(b.thumbRatioByWidth*rowHeightOpt)),arrWidths[d]=c,totalWidth+=c});var numRows=Math.ceil(totalWidth/galleryWidth);numRows>numTiles&&(numRows=numTiles);var finalRowWidth=totalWidth/numRows,arrRows=[],eachRowWidth=0,rowsWidths=[],row=[],progressWidth=0,numRow=0;jQuery.each(objTiles,function(b,c){var a=arrWidths[b];progressWidth+a/2>(numRow+1)*finalRowWidth&&(rowsWidths[arrRows.length]=eachRowWidth,arrRows.push(row),row=[],eachRowWidth=0,numRow++),progressWidth+=a,eachRowWidth+=a,row.push(c)}),rowsWidths[arrRows.length]=eachRowWidth,arrRows.push(row);var arrRowWidths=[],arrRowHeights=[],totalHeight=0;return jQuery.each(arrRows,function(a,b){b.length;var f=rowsWidths[a],d=(b.length-1)*gap,c=Math.round(rowHeightOpt*((galleryWidth-d)/f));totalHeight+=c,a>0&&(totalHeight+=gap),arrRowHeights.push(c);var h=c/rowHeightOpt,e=[],g=d;jQuery.each(b,function(b,c){var a=Math.round(arrWidths[jQuery(c).index()]*h);e[b]=a,g+=a});var i=g-galleryWidth;jQuery.each(e,function(a,b){if(0==i)return!1;i<0?(e[a]=b+1,i++):(e[a]=b-1,i--),a==e.length-1&&0!=i&&(e[a]-=i)}),arrRowWidths[a]=e}),{arrRows:arrRows,arrRowWidths:arrRowWidths,arrRowHeights:arrRowHeights,gap:gap,totalHeight:totalHeight}}function placeJustified(toShow){if(!toShow)var toShow=!1;var parentWidth=getParentWidth(),objData=getJustifiedData();g_objParent.height(objData.totalHeight),getParentWidth()!=parentWidth&&(objData=getJustifiedData()),doBeforeTransition();var posy=0,totalWidth=0;jQuery.each(objData.arrRows,function(a,b){var d=objData.arrRowWidths[a],c=objData.arrRowHeights[a],e=0;jQuery.each(b,function(g,a){var b=jQuery(a),h=c,f=d[g];g_objTileDesign.resizeTile(b,f,h,g_objTileDesign.resizemode.VISIBLE_ELEMENTS),g_functions.placeElement(b,e,posy),(e+=f)>totalWidth&&(totalWidth=e),e+=objData.gap,!0==toShow&&jQuery(a).show()}),posy+=c+objData.gap}),doAfterTransition()}function runJustifiedType(){var objImages=jQuery(g_objWrapper).find("img.ug-thumb-image"),objTiles=g_thumbs.getThumbs();g_temp.isAllLoaded=!1,objTiles.fadeTo(0,0),g_functions.checkImagesLoaded(objImages,function(){setTimeout(function(){placeJustified(!0),objTiles.fadeTo(0,1),g_gallery.triggerEvent(t.events.TILES_FIRST_PLACED),setTransition(),g_objThis.trigger(t.events.ALL_TILES_LOADED)})},function(a,c){a=jQuery(a);var b=jQuery(a).parent();g_thumbs.triggerImageLoadedEvent(b,a)})}function runNestedType(){var objImages=jQuery(g_objWrapper).find("img.ug-thumb-image"),objTiles=g_thumbs.getThumbs();g_temp.isAllLoaded=!1,objTiles.fadeTo(0,0),g_functions.checkImagesLoaded(objImages,function(){!0==g_gallery.isMobileMode()?placeTiles(!0):placeNestedImages(!0),g_gallery.triggerEvent(t.events.TILES_FIRST_PLACED),setTransition(),g_objThis.trigger(t.events.ALL_TILES_LOADED)},function(a,c){a=jQuery(a);var b=jQuery(a).parent();g_thumbs.triggerImageLoadedEvent(b,a)})}function fillNestedVars(){var galleryWidth=getParentWidth();switch(g_nestedWork.galleryWidth=galleryWidth,g_arrNestedGridRow={},g_nestedWork.colWidth=g_options.tiles_nested_col_width,g_nestedWork.optimalTileWidth=g_options.tiles_nested_optimal_tile_width,g_nestedWork.currentGap=g_options.tiles_space_between_cols,!0==g_gallery.isMobileMode()&&(g_nestedWork.currentGap=g_options.tiles_space_between_cols_mobile),null==g_nestedWork.colWidth?g_nestedWork.colWidth=Math.floor(g_nestedWork.optimalTileWidth/g_nestedWork.nestedOptimalCols):g_nestedWork.optimalTileWidth>g_nestedWork.colWidth?g_nestedWork.nestedOptimalCols=Math.ceil(g_nestedWork.optimalTileWidth/g_nestedWork.colWidth):g_nestedWork.nestedOptimalCols=1,g_nestedWork.maxColumns=g_functions.getNumItemsInSpace(galleryWidth,g_nestedWork.colWidth,g_nestedWork.currentGap),g_nestedWork.colWidth=g_functions.getItemSizeInSpace(galleryWidth,g_nestedWork.maxColumns,g_nestedWork.currentGap),g_nestedWork.gridY=0,g_arrNestedItems=[],g_thumbs.getThumbs(!0).each(function(){var a=jQuery(this),b=setNestedSize(a);g_arrNestedItems.push(b)}),g_nestedWork.optimalTileWidth>g_nestedWork.colWidth?g_nestedWork.nestedOptimalCols=Math.ceil(g_nestedWork.optimalTileWidth/g_nestedWork.colWidth):g_nestedWork.nestedOptimalCols=1,g_nestedWork.totalWidth=g_nestedWork.maxColumns*(g_nestedWork.colWidth+g_nestedWork.currentGap)-g_nestedWork.currentGap,g_options.tiles_align){case"center":default:g_nestedWork.addX=Math.round((g_nestedWork.galleryWidth-g_nestedWork.totalWidth)/2);break;case"left":g_nestedWork.addX=0;break;case"right":g_nestedWork.addX=g_nestedWork.galleryWidth-g_nestedWork.totalWidth}g_nestedWork.maxGridY=0}function placeNestedImages(toShow){var parentWidth=getParentWidth();fillNestedVars(),placeNestedImagesCycle();var totalHeight=g_nestedWork.maxGridY*(g_nestedWork.colWidth+g_nestedWork.currentGap)-g_nestedWork.currentGap;g_objParent.height(totalHeight),getParentWidth()!=parentWidth&&(fillNestedVars(),placeNestedImagesCycle()),!1==g_options.tiles_nested_debug&&drawNestedImages(toShow)}function setNestedSize(objTile){var dimWidth,dimHeight,output={},colWidth=g_nestedWork.colWidth,gapWidth=g_nestedWork.currentGap,objImageSize=g_objTileDesign.getTileImageSize(objTile),maxDim=Math.ceil(getPresettedRandomByWidth(objTile.index())*(1*g_nestedWork.nestedOptimalCols/3)+2*g_nestedWork.nestedOptimalCols/3),imgWidth=objImageSize.width,imgHeight=objImageSize.height,ratio=imgWidth/imgHeight;return imgWidth>imgHeight?0==(dimHeight=Math.round((dimWidth=maxDim)/ratio))&&(dimHeight=1):0==(dimWidth=Math.round((dimHeight=maxDim)*ratio))&&(dimWidth=1),output.dimWidth=dimWidth,output.dimHeight=dimHeight,output.width=dimWidth*colWidth+gapWidth*(dimWidth-1),output.height=dimHeight*colWidth+gapWidth*(dimHeight-1),output.imgWidth=imgWidth,output.imgHeight=imgHeight,output.left=0,output.top=0,output}function getPresettedRandomByWidth(index){return Math.abs(Math.sin(Math.abs(1e3*Math.sin(index))))}function placeNestedImagesDebug(toShow,placeOne){if(!1==placeOne){for(var i=g_nestedWork.currentItem;i<g_arrNestedItems.length;i++)placeNestedImage(i,!0);g_nestedWork.currentItem=g_arrNestedItems.length-1}else placeNestedImage(g_nestedWork.currentItem,!0);for(var i=0;i<=g_nestedWork.currentItem;i++)drawNestedImage(i,!0);g_nestedWork.currentItem++}function placeNestedImagesCycle(placeOne){if(!0==g_options.tiles_nested_debug)return void 0===placeOne&&(placeOne=!0),placeNestedImagesDebug(!0,placeOne),!1;for(var i=0;i<g_arrNestedItems.length;i++)placeNestedImage(i,!0)}function placeNestedImage(tileID,toShow){if(!toShow)var toShow=!1;g_nestedWork.maxColHeight=0;for(var rowsValue=g_functions.getObjectLength(g_arrNestedGridRow),row=g_nestedWork.gridY;row<=rowsValue+1;row++){for(var column=0;column<g_nestedWork.maxColumns;column++)if(!1==isGridRowExists(g_nestedWork.gridY)|| !1==isGridCellTaken(g_nestedWork.gridY,column)){var totalFree=getTotalFreeFromPosition(column);calculateOptimalStretchAndPosition(tileID,totalFree,column);return}g_nestedWork.gridY++}}function calculateOptimalStretchAndPosition(tileID,totalFree,column){var sizes=jQuery.extend(!0,{},g_arrNestedItems[tileID]),currentWidth=sizes.dimWidth,placeForNextImage=totalFree-sizes.dimWidth,optimalWidth=g_nestedWork.nestedOptimalCols;if(totalFree<=sizes.dimWidth||placeForNextImage<=.33*optimalWidth||totalFree<=optimalWidth)resizeToNewWidth(tileID,totalFree);else if(placeForNextImage<=optimalWidth)optimalWidth>=4?!0==isGridImageAligned(Math.floor(totalFree/2),column)?resizeToNewWidth(tileID,Math.floor(totalFree/2)+1):resizeToNewWidth(tileID,Math.floor(totalFree/2)):resizeToNewWidth(objImage,totalFree);else if(!0==isGridImageAligned(currentWidth,column))switch(currentWidth>=optimalWidth){case!0:resizeToNewWidth(tileID,currentWidth-1);break;case!1:resizeToNewWidth(tileID,currentWidth+1)}sizes=jQuery.extend(!0,{},g_arrNestedItems[tileID]);var columnInfo=getGridColumnHeight(tileID,sizes.dimWidth,column);if(g_nestedWork.columnsValueToEnableHeightResize<=columnInfo[0]&&g_nestedWork.maxColumns>=2*g_nestedWork.nestedOptimalCols){var sideHelper=getGridImageVerticalDifference(column,sizes),columnSizes=resizeToNewHeight(tileID,sideHelper.newHeight,!0);g_arrNestedItems[tileID].dimHeight=columnSizes.dimHeight;var columnResizes=redistributeColumnItems(columnInfo,columnSizes.dimWidth,column),columnCrosshairs=getColumnCrosshairsCount(columnResizes),disableColumnResizes=!1;columnCrosshairs>=2&&(disableColumnResizes=!0),sideHelper.newHeight>=sizes.dimHeight&&(sizes=resizeToNewHeight(tileID,sideHelper.newHeight,!0));var sideResizes=getSideResizeInfo(sideHelper.idToResize,sideHelper.newHeight,sizes.dimHeight);sizes.top=g_nestedWork.gridY,sizes.left=column,sideResizes.push({tileID:tileID,sizes:sizes});var sideResizesVal=calcResizeRatio(sideResizes),columnResizesVal=calcResizeRatio(columnResizes);if(sideResizesVal<columnResizesVal|| !0==disableColumnResizes){applyResizes(sideResizes);return}applyResizes(columnResizes);return}sizes.left=column,sizes.top=g_nestedWork.gridY,g_arrNestedItems[tileID]=sizes,putImageToGridRow(tileID,sizes,column,g_nestedWork.gridY),g_nestedWork.maxGridY=sizes.top+sizes.dimHeight}function getColumnCrosshairsCount(tilesAndSizes){for(var crosshairsCountR=0,crosshairsCountL=0,i=0;i<tilesAndSizes.length-1;i++){var sizes=tilesAndSizes[i].sizes,topItem=-1,bottomItem=-1;isGridRowExists(sizes.top+sizes.dimHeight)&&g_nestedWork.maxColumns>sizes.left+sizes.dimWidth&&(topItem=g_arrNestedGridRow[sizes.top+sizes.dimHeight-1][sizes.left+sizes.dimWidth],bottomItem=g_arrNestedGridRow[sizes.top+sizes.dimHeight][sizes.left+sizes.dimWidth]),topItem!=bottomItem&&crosshairsCountR++}for(var i=0;i<tilesAndSizes.length-1;i++){var sizes=tilesAndSizes[i].sizes,topItem=-1,bottomItem=-1;isGridRowExists(sizes.top+sizes.dimHeight)&&sizes.left-1>=0&&(topItem=g_arrNestedGridRow[sizes.top+sizes.dimHeight-1][sizes.left-1],bottomItem=g_arrNestedGridRow[sizes.top+sizes.dimHeight][sizes.left-1]),topItem!=bottomItem&&crosshairsCountL++}return Math.max(crosshairsCountL,crosshairsCountR)}function getSideResizeInfo(idToResize,newHeight,dimHeight){var currentTile=g_arrNestedItems[idToResize],tileHeight=currentTile.dimHeight;currentTile.dimWidth;var tileLeft=currentTile.left,tileTop=currentTile.top;parseInt(tileTop/(g_nestedWork.colWidth+g_nestedWork.currentGap)),parseInt(tileLeft/(g_nestedWork.colWidth+g_nestedWork.currentGap));var newSideHeight=tileHeight-newHeight+dimHeight,sideSizes=resizeToNewHeight(idToResize,newSideHeight,!0),output=[];return output.push({tileID:idToResize,sizes:sideSizes}),output}function applyResizes(resizeTilesAndSizes){for(var i=0;i<resizeTilesAndSizes.length;i++){var sizes=resizeTilesAndSizes[i].sizes,tileID=resizeTilesAndSizes[i].tileID;g_arrNestedItems[tileID]=jQuery.extend(!0,{},sizes),putImageToGridRow(tileID,sizes,sizes.left,sizes.top)}}function redistributeColumnItems(columnInfo,columnWidth){for(var originalHeight=0,columnHeight=0,objTiles=[],cordX=0,cordY=0,i=0;i<columnInfo[1].length;i++){var tileID=columnInfo[1][i],currentTile=g_arrNestedItems[columnInfo[1][i]];if(columnHeight+=currentTile.dimHeight,0==i){var sizes=resizeToNewWidth(tileID,columnWidth,!0);originalHeight+=sizes.dimHeight,objTiles.push([columnInfo[1][i],sizes.dimHeight]);continue}originalHeight+=currentTile.dimHeight,objTiles.push([tileID,currentTile.dimHeight])}cordX=currentTile.left,cordY=currentTile.top;for(var tempHeight=columnHeight,output=[],i=objTiles.length-1;i>=0;i--){var newHeight,tileID=objTiles[i][0];0!=i?(tempHeight-=newHeight=Math.max(Math.round(1*columnHeight/3),Math.floor(objTiles[i][1]*(columnHeight/originalHeight))),sizes=resizeToNewHeight(tileID,newHeight,!0),sizes.left=cordX,sizes.top=cordY,output.push({tileID:tileID,sizes:sizes}),cordY+=sizes.dimHeight):((sizes=resizeToNewHeight(tileID,newHeight=tempHeight,!0)).left=cordX,sizes.top=cordY,output.push({tileID:tileID,sizes:sizes}))}return output}function getGridColumnHeight(tileID,dimWidth,column){var tempY=g_nestedWork.gridY-1,curImage=0,prevImage=0,columnHeight=1,imagesIDs=[],toReturn=[];if(imagesIDs.push(tileID),tempY>=0){for(prevImage=0;tempY>=0&&(curImage=g_arrNestedGridRow[tempY][column],(void 0===g_arrNestedGridRow[tempY][column-1]||g_arrNestedGridRow[tempY][column-1]!=g_arrNestedGridRow[tempY][column])&&(void 0===g_arrNestedGridRow[tempY][column+dimWidth]||g_arrNestedGridRow[tempY][column+dimWidth-1]!=g_arrNestedGridRow[tempY][column+dimWidth])&&g_arrNestedGridRow[tempY][column]==g_arrNestedGridRow[tempY][column+dimWidth-1]);)prevImage!=curImage&&(columnHeight++,imagesIDs.push(curImage)),tempY--,prevImage=curImage;return toReturn.push(columnHeight),toReturn.push(imagesIDs),toReturn}return[0,[]]}function getGridImageVerticalDifference(column,sizes){var newHeightR=0,newHeightL=0,dimWidth=sizes.dimWidth,dimHeight=sizes.dimHeight,leftID=0,rightID=0,array=jQuery.map(g_arrNestedGridRow,function(a,b){return[a]});if(void 0===array[g_nestedWork.gridY]|| void 0===array[g_nestedWork.gridY][column-1])newHeightL=0;else for(var tempY=0;;)if(void 0!==g_arrNestedGridRow[g_nestedWork.gridY+tempY]&& -1!=g_arrNestedGridRow[g_nestedWork.gridY+tempY][column-1])leftID=g_arrNestedGridRow[g_nestedWork.gridY+tempY][column-2],tempY++,newHeightL++;else break;if(void 0===array[g_nestedWork.gridY]|| void 0===array[g_nestedWork.gridY][column+dimWidth])newHeightR=0;else for(tempY=0;;)if(void 0!==g_arrNestedGridRow[g_nestedWork.gridY+tempY]&& -1!=g_arrNestedGridRow[g_nestedWork.gridY+tempY][column+dimWidth])rightID=g_arrNestedGridRow[g_nestedWork.gridY+tempY][column+dimWidth+1],tempY++,newHeightR++;else break;var newHeight=0,idToResize=0;return Math.abs(dimHeight-newHeightL)<Math.abs(dimHeight-newHeightR)&&0!=newHeightL?(newHeight=newHeightL,idToResize=leftID):0!=newHeightR?(newHeight=newHeightR,idToResize=rightID):newHeight=dimHeight,{newHeight:newHeight,idToResize:idToResize}}function resizeToNewWidth(tileID,newDimWidth,toReturn){toReturn||(toReturn=!1);var colWidth=g_nestedWork.colWidth,gapWidth=g_nestedWork.currentGap,currentTile=g_arrNestedItems[tileID],imgWidth=currentTile.imgWidth,imgHeight=currentTile.imgHeight,ratio=imgWidth/imgHeight;if(dimHeight=Math.round((dimWidth=newDimWidth)/ratio),!0==toReturn){var sizes=jQuery.extend(!0,{},currentTile);return sizes.dimWidth=dimWidth,sizes.dimHeight=dimHeight,sizes.width=dimWidth*colWidth+gapWidth*(dimWidth-1),sizes.height=dimHeight*colWidth+gapWidth*(dimHeight-1),sizes}currentTile.dimWidth=dimWidth,currentTile.dimHeight=dimHeight,currentTile.width=dimWidth*colWidth+gapWidth*(dimWidth-1),currentTile.height=dimHeight*colWidth+gapWidth*(dimHeight-1)}function resizeToNewHeight(tileID,newDimHeight,toReturn){toReturn||(toReturn=!1);var currentTile=g_arrNestedItems[tileID],dimWidth=currentTile.dimWidth,colWidth=g_nestedWork.colWidth,gapWidth=g_nestedWork.currentGap;if(!0==toReturn){var sizes=jQuery.extend(!0,{},currentTile);return sizes.dimHeight=newDimHeight,sizes.width=dimWidth*colWidth+gapWidth*(dimWidth-1),sizes.height=newDimHeight*colWidth+gapWidth*(newDimHeight-1),sizes}currentTile.dimHeight=newDimHeight,currentTile.width=dimWidth*colWidth+gapWidth*(dimWidth-1),currentTile.height=newDimHeight*colWidth+gapWidth*(newDimHeight-1)}function calcResizeRatio(objTilesAndSizes){for(var tempResizes=0,tempNum=0,i=0;i<objTilesAndSizes.length;i++){var sizes=g_arrNestedItems[objTilesAndSizes[i].tileID];if(0==sizes.dimHeight||0==sizes.height)return;(resizeVal=sizes.dimWidth/sizes.dimHeight/(sizes.imgWidth/sizes.imgHeight))<1&&(resizeVal=1/resizeVal),tempResizes+=resizeVal,tempNum++}return tempResizes/tempNum}function isGridImageAligned(dimWidth,column){var y=g_nestedWork.gridY-1;return!(y<=0)&& !1!=isGridRowExists(y)&&g_arrNestedGridRow[y][column+dimWidth-1]!=g_arrNestedGridRow[y][column+dimWidth]}function getTotalFreeFromPosition(column){var x=column,totalFree=0;if(!0==isGridRowExists(g_nestedWork.gridY))for(;!1==isGridCellTaken(g_nestedWork.gridY,x);)totalFree++,x++;else totalFree=g_nestedWork.maxColumns;return totalFree}function isGridRowExists(y){return void 0!==g_arrNestedGridRow[y]}function putImageToGridRow(id,sizes,gridX,gridY){for(var y=0;y<sizes.dimHeight;y++)for(var x=0;x<sizes.dimWidth;x++)0==isGridRowExists(gridY+y)&&addGridRow(gridY+y),setGridCellValue(gridY+y,gridX+x,id)}function addGridRow(y){g_arrNestedGridRow[y]=new Object;for(var t=0;t<g_nestedWork.maxColumns;t++)g_arrNestedGridRow[y][t]=-1}function isGridCellTaken(y,x){return -1!=g_arrNestedGridRow[y][x]}function setGridCellValue(y,x,value){g_arrNestedGridRow[y][x]=value}function drawNestedImages(toShow){if(!toShow)var toShow=!1;doBeforeTransition();for(var i=0;i<g_arrNestedItems.length;i++)drawNestedImage(i,toShow);g_objParent.height(g_nestedWork.maxColHeight),doAfterTransition()}function drawNestedImage(i,toShow){var objTile=g_thumbs.getThumbByIndex(i),sizes=g_arrNestedItems[i],newY=sizes.top*(g_nestedWork.colWidth+g_nestedWork.currentGap),newX=g_nestedWork.addX+sizes.left*(g_nestedWork.colWidth+g_nestedWork.currentGap);g_objTileDesign.resizeTile(objTile,sizes.width,sizes.height,g_objTileDesign.resizemode.VISIBLE_ELEMENTS),g_functions.placeElement(objTile,newX,newY),newY+sizes.height>g_nestedWork.maxColHeight&&(g_nestedWork.maxColHeight=newY+sizes.height),!0==toShow&&objTile.fadeTo(0,1)}function onResize(){if(!0==g_temp.isFirstTimeRun)return!0;if(!1==g_temp.isAllLoaded)return!1;switch(g_options.tiles_type){case"columns":placeTiles(!1);break;case"justified":placeJustified(!1);break;case"nested":!0==g_gallery.isMobileMode()?placeTiles(!1):placeNestedImages(!1)}}function initEvents(){g_objThis.on(t.events.ALL_TILES_LOADED,function(){g_temp.isAllLoaded=!0}),g_objGallery.on(g_gallery.events.SIZE_CHANGE,onResize),g_objGallery.on(t.events.TILES_FIRST_PLACED,function(){g_temp.isFirstPlaced=!1}),g_objTileDesign.initEvents()}function run(){switch(g_objWrapper.children(".ug-tile").show(),!0==g_temp.isFirstTimeRun&&initEvents(),g_objTileDesign.run(),g_options.tiles_type){default:case"columns":runColumnsType();break;case"justified":runJustifiedType();break;case"nested":runNestedType()}g_temp.isFirstTimeRun=!1}this.destroy=function(){g_objGallery.off(g_gallery.events.SIZE_CHANGE),g_objTileDesign.destroy(),g_objGallery.off(t.events.TILES_FIRST_PLACED)},this.init=function(a,b){init(a,b)},this.setHtml=function(a){setHtml(a)},this.getObjTileDesign=function(){return g_objTileDesign},this.run=function(){run()},this.runNewItems=function(){if(!g_objParent)throw new Error("Can't run new items - parent not set");if(g_objTileDesign.setHtml(g_objParent,!0),g_objTileDesign.run(!0),"columns"===g_options.tiles_type)runColumnsType();else throw new Error("Tiles type: "+g_options.tiles_type+" not support load more yet")}}function UGAviaControl(){var g_parent,g_gallery,g_objects,g_objStrip,g_objStripInner,g_options,g_isVertical,g_temp={touchEnabled:!1,isMouseInsideStrip:!1,strip_finalPos:0,handle_timeout:"",isStripMoving:!1,isControlEnabled:!0,maxDpos:1e3};function setScrollType(){}function getMousePos(event){return!1==g_isVertical?event.pageX:event.pageY}function onMouseMove(event){if(!1==g_temp.isControlEnabled)return!0;if(!0==g_temp.touchEnabled)return jQuery("body").off("mousemove"),!0;g_temp.isMouseInsideStrip=g_objStrip.ismouseover();var strip_touch_active=g_parent.isTouchMotionActive();!0==g_temp.isMouseInsideStrip&& !1==strip_touch_active?moveStripToMousePosition(getMousePos(event)):stopStripMovingLoop()}function initEvents(event){jQuery("body").on("touchstart",function(a){if(!1==g_temp.isControlEnabled)return!0;g_temp.touchEnabled=!0}),jQuery("body").mousemove(onMouseMove)}function getInnerPosY(mouseY){var innerOffsetTop=g_options.strip_padding_top;g_options.strip_padding_bottom;var stripHeight=g_objStrip.height(),innerHeight=g_objStripInner.height();if(stripHeight>innerHeight)return null;var posy=mouseY-g_objStrip.offset().top-innerOffsetTop;if(posy<0)return null;var mlineStart=g_options.thumb_height,mlineEnd=stripHeight-g_options.thumb_height,mLineSize=mlineEnd-mlineStart;posy<mlineStart&&(posy=mlineStart),posy>mlineEnd&&(posy=mlineEnd);var ratio=(posy-mlineStart)/mLineSize,innerPosY=(innerHeight-stripHeight)*ratio;return -1*Math.round(innerPosY)+innerOffsetTop}function getInnerPosX(mouseX){var innerOffsetLeft=g_options.strip_padding_left,innerOffsetRight=g_options.strip_padding_right,stripWidth=g_objStrip.width()-innerOffsetLeft-innerOffsetRight,innerWidth=g_objStripInner.width();if(stripWidth>innerWidth)return null;var posx=mouseX-g_objStrip.offset().left-innerOffsetLeft,mlineStart=g_options.thumb_width,mlineEnd=stripWidth-g_options.thumb_width,mLineSize=mlineEnd-mlineStart;posx<mlineStart&&(posx=mlineStart),posx>mlineEnd&&(posx=mlineEnd);var ratio=(posx-mlineStart)/mLineSize,innerPosX=(innerWidth-stripWidth)*ratio;return -1*Math.round(innerPosX)+innerOffsetLeft}function moveStripStep(){if(!1==g_temp.is_strip_moving)return!1;var dpos,maxDpos=g_temp.maxDpos,innerPos=g_parent.getInnerStripPos();Math.floor(innerPos)==Math.floor(g_temp.strip_finalPos)&&stopStripMovingLoop();var diff=Math.abs(g_temp.strip_finalPos-innerPos);diff<1?dpos=diff:(dpos=diff/4)>0&&dpos<1&&(dpos=1),g_temp.strip_finalPos<innerPos&&(dpos*=-1),dpos>maxDpos&&(dpos=maxDpos),dpos< -maxDpos&&(dpos=-maxDpos);var newPos=innerPos+dpos;g_parent.positionInnerStrip(newPos)}function startStripMovingLoop(){if(!0==g_temp.isStripMoving)return!1;g_temp.isStripMoving=!0,g_temp.handle_timeout=setInterval(moveStripStep,10)}function stopStripMovingLoop(){if(!1==g_temp.isStripMoving)return!1;g_temp.isStripMoving=!1,g_temp.handle_timeout=clearInterval(g_temp.handle_timeout)}function getInnerPos(mousePos){return!1==g_isVertical?getInnerPosX(mousePos):getInnerPosY(mousePos)}function moveStripToMousePosition(mousePos){var innerPos=getInnerPos(mousePos);if(null===innerPos)return!1;g_temp.is_strip_moving=!0,g_temp.strip_finalPos=innerPos,startStripMovingLoop()}this.enable=function(){g_temp.isControlEnabled=!0},this.disable=function(){g_temp.isControlEnabled=!1},this.onResize=function(){setScrollType()},this.init=function(a){g_parent=a,g_objects=a.getObjects(),g_gallery=g_objects.g_gallery,g_objStrip=g_objects.g_objStrip,g_objStripInner=g_objects.g_objStripInner,g_options=g_objects.g_options,g_isVertical=g_objects.isVertical,initEvents(),setScrollType()},this.destroy=function(){jQuery("body").off("touchstart"),jQuery("body").off("mousemove")}}function UGSlider(){var g_objGallery,g_objWrapper,g_objThumbs,g_objSlider,g_objInner,g_objSlide1,g_objSlide2,g_objSlide3,g_objArrowLeft,g_objArrowRight,g_objTouchSlider,g_objZoomSlider,g_objZoomPanel,g_optionsPrefix,t=this,g_objThis=jQuery(t),g_gallery=new UniteGalleryMain,g_objButtonPlay=null,g_objButtonFullscreen=null,g_objBullets=null,g_objVideoPlayer=new UGVideoPlayer,g_functions=new UGFunctions,g_objProgress=null,g_objTextPanel=null;this.events={ITEM_CHANGED:"item_changed",BEFORE_SWITCH_SLIDES:"before_switch",BEFORE_RETURN:"before_return",AFTER_RETURN:"after_return",ZOOM_START:"slider_zoom_start",ZOOM_END:"slider_zoom_end",ZOOMING:"slider_zooming",ZOOM_CHANGE:"slider_zoom_change",START_DRAG:"start_drag",AFTER_DRAG_CHANGE:"after_drag_change",ACTION_START:"action_start",ACTION_END:"action_end",CLICK:"slider_click",TRANSITION_START:"slider_transition_start",TRANSITION_END:"slider_transition_end",AFTER_PUT_IMAGE:"after_put_image",IMAGE_MOUSEENTER:"slider_image_mouseenter",IMAGE_MOUSELEAVE:"slider_image_mouseleave",CURRENTSLIDE_LOAD_START:"slider_current_loadstart",CURRENTSLIDE_LOAD_END:"slider_current_loadend"};var g_options={slider_scale_mode:"fill",slider_scale_mode_media:"fill",slider_scale_mode_fullscreen:"down",slider_item_padding_top:0,slider_item_padding_bottom:0,slider_item_padding_left:0,slider_item_padding_right:0,slider_background_color:"",slider_background_opacity:1,slider_image_padding_top:0,slider_image_padding_bottom:0,slider_image_padding_left:0,slider_image_padding_right:0,slider_image_border:!1,slider_image_border_width:10,slider_image_border_color:"#ffffff",slider_image_border_radius:0,slider_image_border_maxratio:.35,slider_image_shadow:!1,slider_video_constantsize:!1,slider_video_constantsize_scalemode:"fit",slider_video_constantsize_width:854,slider_video_constantsize_height:480,slider_video_padding_top:0,slider_video_padding_bottom:0,slider_video_padding_left:0,slider_video_padding_right:0,slider_video_enable_closebutton:!0,slider_transition:"slide",slider_transition_speed:300,slider_transition_easing:"easeInOutQuad",slider_control_swipe:!0,slider_control_zoom:!0,slider_zoom_mousewheel:!0,slider_vertical_scroll_ondrag:!1,slider_loader_type:1,slider_loader_color:"white",slider_enable_links:!0,slider_links_newpage:!1,slider_enable_bullets:!1,slider_bullets_skin:"",slider_bullets_space_between:-1,slider_bullets_align_hor:"center",slider_bullets_align_vert:"bottom",slider_bullets_offset_hor:0,slider_bullets_offset_vert:10,slider_enable_arrows:!0,slider_arrows_skin:"",slider_arrow_left_align_hor:"left",slider_arrow_left_align_vert:"middle",slider_arrow_left_offset_hor:10,slider_arrow_left_offset_vert:0,slider_arrow_right_align_hor:"right",slider_arrow_right_align_vert:"middle",slider_arrow_right_offset_hor:10,slider_arrow_right_offset_vert:0,slider_enable_progress_indicator:!0,slider_progress_indicator_type:"pie",slider_progress_indicator_align_hor:"right",slider_progress_indicator_align_vert:"top",slider_progress_indicator_offset_hor:10,slider_progress_indicator_offset_vert:10,slider_enable_play_button:!0,slider_play_button_skin:"",slider_play_button_align_hor:"left",slider_play_button_align_vert:"top",slider_play_button_offset_hor:40,slider_play_button_offset_vert:8,slider_play_button_mobilehide:!1,slider_enable_fullscreen_button:!0,slider_fullscreen_button_skin:"",slider_fullscreen_button_align_hor:"left",slider_fullscreen_button_align_vert:"top",slider_fullscreen_button_offset_hor:11,slider_fullscreen_button_offset_vert:9,slider_fullscreen_button_mobilehide:!1,slider_enable_zoom_panel:!0,slider_zoompanel_skin:"",slider_zoompanel_align_hor:"left",slider_zoompanel_align_vert:"top",slider_zoompanel_offset_hor:12,slider_zoompanel_offset_vert:92,slider_zoompanel_mobilehide:!1,slider_controls_always_on:!1,slider_controls_appear_ontap:!0,slider_controls_appear_duration:300,slider_enable_text_panel:!0,slider_textpanel_always_on:!0,slider_videoplay_button_type:"square"},g_defaultsProgressBar={slider_progress_indicator_align_hor:"left",slider_progress_indicator_align_vert:"bottom",slider_progress_indicator_offset_hor:0,slider_progress_indicator_offset_vert:0},g_temp={isRunOnce:!1,isTextPanelSaparateHover:!1,numPrev:1,numCurrent:2,numNext:3,isControlsVisible:!0,currentControlsMode:"image"};function initSlider(objGallery,objOptions,optionsPrefix){g_gallery=objGallery,optionsPrefix&&(g_optionsPrefix=optionsPrefix,objOptions=g_functions.convertCustomPrefixOptions(objOptions,g_optionsPrefix,"slider")),g_objGallery=jQuery(objGallery);var objects=g_gallery.getObjects();if(g_objWrapper=objects.g_objWrapper,g_objThumbs=objects.g_objThumbs,objOptions.hasOwnProperty("slider_progress_indicator_type")&&(g_options.slider_progress_indicator_type=objOptions.slider_progress_indicator_type),"bar"==g_options.slider_progress_indicator_type&&(g_options=jQuery.extend(g_options,g_defaultsProgressBar)),objOptions&&t.setOptions(objOptions),processOptions(),!0==g_options.slider_enable_bullets){g_objBullets=new UGBullets;var bulletsOptions={bullets_skin:g_options.slider_bullets_skin,bullets_space_between:g_options.slider_bullets_space_between};g_objBullets.init(g_gallery,bulletsOptions)}g_options.slider_enable_text_panel&&(g_objTextPanel=new UGTextPanel).init(g_gallery,g_options,"slider"),g_options.slider_enable_zoom_panel&&(g_objZoomPanel=new UGZoomButtonsPanel).init(t,g_options);var galleryID=g_gallery.getGalleryID();g_objVideoPlayer.init(g_options,!1,galleryID)}function runSlider(){if(!0==g_temp.isRunOnce)return!1;if(g_temp.isRunOnce=!0,g_options.slider_background_color){var bgColor=g_options.slider_background_color;1!=g_options.slider_background_opacity&&(bgColor=g_functions.convertHexToRGB(bgColor,g_options.slider_background_opacity)),g_objSlider.css("background-color",bgColor)}else 1!=g_options.slider_background_opacity&&(bgColor=g_functions.convertHexToRGB("#000000",g_options.slider_background_opacity),g_objSlider.css("background-color",bgColor));!0==g_options.slider_control_swipe&&(g_objTouchSlider=new UGTouchSliderControl).init(t,g_options),!0==g_options.slider_control_zoom&&(g_objZoomSlider=new UGZoomSliderControl).init(t,g_options),g_objTextPanel&&g_objTextPanel.run(),initEvents()}function processOptions(){var galleryOptions=g_gallery.getOptions(),globalSkin=galleryOptions.gallery_skin;""==g_options.slider_bullets_skin&&(g_options.slider_bullets_skin=globalSkin),""==g_options.slider_arrows_skin&&(g_options.slider_arrows_skin=globalSkin),""==g_options.slider_zoompanel_skin&&(g_options.slider_zoompanel_skin=globalSkin),""==g_options.slider_play_button_skin&&(g_options.slider_play_button_skin=globalSkin),""==g_options.slider_fullscreen_button_skin&&(g_options.slider_fullscreen_button_skin=globalSkin),g_options.video_enable_closebutton=g_options.slider_video_enable_closebutton,"zoom"!=galleryOptions.gallery_mousewheel_role&&(g_options.slider_zoom_mousewheel=!1)}function getHtmlSlide(loaderClass,numSlide){var classVideoplay="ug-type-square";"round"==g_options.slider_videoplay_button_type&&(classVideoplay="ug-type-round");var html="";return html+="<div class='ug-slide-wrapper ug-slide"+numSlide+"'>",html+="<div class='ug-item-wrapper'></div>",html+="<div class='ug-slider-preloader "+loaderClass+"'></div>",html+="<div class='ug-button-videoplay "+classVideoplay+"' style='display:none'></div>",html+="</div>"}function setHtmlSlider(objParent){objParent&&(g_objWrapper=objParent);var loaderClass=getLoaderClass();g_gallery.getOptions();var html="<div class='ug-slider-wrapper'>";if(html+="<div class='ug-slider-inner'>",html+=getHtmlSlide(loaderClass,1),html+=getHtmlSlide(loaderClass,2),html+=getHtmlSlide(loaderClass,3),html+="</div>",!0==g_options.slider_enable_arrows){var svgArrowLeft='<svg x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32"><g stroke-width="1" transform="translate(0.5, 0.5)"><polyline fill="none" stroke="#ffffff" stroke-width="1" stroke-linecap="square" stroke-miterlimit="10" points="21,2 11,16 21,30 " stroke-linejoin="miter"></polyline></g></svg>',svgArrowRight='<svg x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32"><g stroke-width="1" transform="translate(0.5, 0.5)"><polyline fill="none" stroke="#ffffff" stroke-width="1" stroke-linecap="square" stroke-miterlimit="10" points="11,2 21,16 11,30 " stroke-linejoin="miter"></polyline></g></svg>';html+="<div class='ug-slider-control ug-arrow-left ug-skin-"+g_options.slider_arrows_skin+"'>"+svgArrowLeft+"</div>",html+="<div class='ug-slider-control ug-arrow-right ug-skin-"+g_options.slider_arrows_skin+"'>"+svgArrowRight+"</div>"}!0==g_options.slider_enable_play_button&&(html+="<div class='ug-slider-control ug-button-play ug-skin-"+g_options.slider_play_button_skin+"'></div>"),!0==g_options.slider_enable_fullscreen_button&&(html+="<div class='ug-slider-control ug-button-fullscreen ug-skin-"+g_options.slider_fullscreen_button_skin+"'></div>"),html+="</div>",g_objWrapper.append(html),g_objSlide1=(g_objInner=(g_objSlider=g_objWrapper.children(".ug-slider-wrapper")).children(".ug-slider-inner")).children(".ug-slide1"),g_objSlide2=g_objInner.children(".ug-slide2"),g_objSlide3=g_objInner.children(".ug-slide3"),g_objSlide1.data("slidenum",1),g_objSlide2.data("slidenum",2),g_objSlide3.data("slidenum",3),g_objBullets&&g_objBullets.appendHTML(g_objSlider),!0==g_options.slider_enable_arrows&&(g_objArrowLeft=g_objSlider.children(".ug-arrow-left"),g_objArrowRight=g_objSlider.children(".ug-arrow-right")),!0==g_options.slider_enable_play_button&&(g_objButtonPlay=g_objSlider.children(".ug-button-play")),!0==g_options.slider_enable_fullscreen_button&&(g_objButtonFullscreen=g_objSlider.children(".ug-button-fullscreen")),!0==g_options.slider_enable_progress_indicator&&("bar"==(g_objProgress=g_functions.initProgressIndicator(g_options.slider_progress_indicator_type,g_options,g_objSlider)).getType()&&"pie"==g_options.slider_progress_indicator_type&&(g_options.slider_progress_indicator_type="bar",g_options=jQuery.extend(g_options,g_defaultsProgressBar)),g_gallery.setProgressIndicator(g_objProgress)),!0==g_options.slider_enable_text_panel&&(g_objTextPanel.appendHTML(g_objSlider),!1==g_options.slider_textpanel_always_on)&&(g_objTextPanel.getElement().hide().data("isHidden",!0),g_temp.isTextPanelSaparateHover=!0),!0==g_options.slider_enable_zoom_panel&&g_objZoomPanel.appendHTML(g_objSlider),g_objVideoPlayer.setHtml(g_objInner)}function positionSlideElements(objSlide){var objPreloader=getSlidePreloader(objSlide);g_functions.placeElementInParentCenter(objPreloader);var objVideoPlayButton=getSlideVideoPlayButton(objSlide);g_functions.placeElementInParentCenter(objVideoPlayButton)}function positionElements(){if(g_objBullets&&(objBullets=g_objBullets.getElement(),g_functions.placeElement(objBullets,g_options.slider_bullets_align_hor,g_options.slider_bullets_align_vert,g_options.slider_bullets_offset_hor,g_options.slider_bullets_offset_vert),g_functions.placeElement(objBullets,g_options.slider_bullets_align_hor,g_options.slider_bullets_align_vert,g_options.slider_bullets_offset_hor,g_options.slider_bullets_offset_vert)),!0==g_options.slider_enable_arrows&&(g_functions.placeElement(g_objArrowLeft,g_options.slider_arrow_left_align_hor,g_options.slider_arrow_left_align_vert,g_options.slider_arrow_left_offset_hor,g_options.slider_arrow_left_offset_vert),g_functions.placeElement(g_objArrowRight,g_options.slider_arrow_right_align_hor,g_options.slider_arrow_left_align_vert,g_options.slider_arrow_right_offset_hor,g_options.slider_arrow_right_offset_vert)),!1==g_options.slider_controls_always_on&&hideControls(!0),g_objProgress){var objProgressElement=g_objProgress.getElement();if("bar"==g_options.slider_progress_indicator_type){var sliderWidth=g_objSlider.width();g_objProgress.setSize(sliderWidth),g_functions.placeElement(objProgressElement,"left",g_options.slider_progress_indicator_align_vert,0,g_options.slider_progress_indicator_offset_vert)}else g_functions.placeElement(objProgressElement,g_options.slider_progress_indicator_align_hor,g_options.slider_progress_indicator_align_vert,g_options.slider_progress_indicator_offset_hor,g_options.slider_progress_indicator_offset_vert)}g_objTextPanel&&g_objTextPanel.positionPanel(),placeControlsElements(),positionSlideElements(g_objSlide1),positionSlideElements(g_objSlide2),positionSlideElements(g_objSlide3),checkMobileModify()}function placeControlsElements(){if(g_objButtonPlay&&g_functions.placeElement(g_objButtonPlay,g_options.slider_play_button_align_hor,g_options.slider_play_button_align_vert,g_options.slider_play_button_offset_hor,g_options.slider_play_button_offset_vert),g_objButtonFullscreen&&g_functions.placeElement(g_objButtonFullscreen,g_options.slider_fullscreen_button_align_hor,g_options.slider_fullscreen_button_align_vert,g_options.slider_fullscreen_button_offset_hor,g_options.slider_fullscreen_button_offset_vert),g_objZoomPanel){var zoomPanelElement=g_objZoomPanel.getElement();g_functions.placeElement(zoomPanelElement,g_options.slider_zoompanel_align_hor,g_options.slider_zoompanel_align_vert,g_options.slider_zoompanel_offset_hor,g_options.slider_zoompanel_offset_vert)}}function positionSlides(){var innerWidth,posXNext,nextHasItem,prevHasItem,slides=t.getSlidesReference(),posY=0,posXPrev=0,posXCurrent=0;nextHasItem=t.isSlideHasItem(slides.objNextSlide),prevHasItem=t.isSlideHasItem(slides.objPrevSlide),prevHasItem?(posXCurrent=slides.objPrevSlide.outerWidth(),slides.objPrevSlide.css("z-index",1)):slides.objPrevSlide.hide(),posXNext=posXCurrent+slides.objCurrentSlide.outerWidth(),innerWidth=posXNext,nextHasItem?(innerWidth=posXNext+slides.objNextSlide.outerWidth(),slides.objPrevSlide.css("z-index",2)):slides.objNextSlide.hide(),slides.objCurrentSlide.css("z-index",3),g_functions.placeElement(slides.objCurrentSlide,posXCurrent,posY),g_objInner.css({left:-posXCurrent+"px",width:innerWidth+"px"}),prevHasItem&&(g_functions.placeElement(slides.objPrevSlide,posXPrev,posY),g_functions.showElement(slides.objPrevSlide)),nextHasItem&&(g_functions.showElement(slides.objNextSlide),g_functions.placeElement(slides.objNextSlide,posXNext,posY))}function resizeSlideItem(objSlide){var index=objSlide.data("index");if(void 0===index||null==index)return!1;var objItem=g_gallery.getItem(index);if(!objItem)return!1;setItemToSlide(objSlide,objItem)}function showPreloader(objPreloader){objPreloader.stop(!0).show(100)}function hidePreloader(objPreloader){objPreloader.stop(!0).hide(100)}function getImageBorderWidth(objImage,imageData){var borderWidth=g_options.slider_image_border_width;if(borderWidth<=10)return borderWidth;var imageSize=g_functions.getElementSize(objImage),imageWidth=imageSize.width,imageHeight=imageSize.height;if(imageData&&(imageData.hasOwnProperty("imageWidth")&&(imageWidth=imageData.imageWidth),imageData.hasOwnProperty("imageHeight")&&(imageHeight=imageData.imageHeight)),imageWidth<=0)return borderWidth;var totalSize=imageWidth<imageHeight?imageWidth:imageHeight;if(2*borderWidth/totalSize<g_options.slider_image_border_maxratio)return borderWidth;var borderWidth=totalSize*g_options.slider_image_border_maxratio/2;return Math.round(borderWidth)}function setImageDesign(objImage,slideType,imageData){var css={};if(!0==g_options.slider_image_border){css["border-style"]="solid";var borderWidth=getImageBorderWidth(objImage,imageData);css["border-width"]=borderWidth+"px",css["border-color"]=g_options.slider_image_border_color,css["border-radius"]=g_options.slider_image_border_radius}"image"!=slideType&& !0==g_options.slider_video_constantsize&&(css["background-color"]="#000000"),!0==g_options.slider_image_shadow&&(css["box-shadow"]="3px 3px 10px 0px #353535"),objImage.css(css)}function scaleImageConstantSize(objImage,objItem){var constantWidth=g_options.slider_video_constantsize_width,constantHeight=g_options.slider_video_constantsize_height,scaleMode=g_options.slider_video_constantsize_scalemode,objSize=g_functions.scaleImageExactSizeInParent(objImage,objItem.imageWidth,objItem.imageHeight,constantWidth,constantHeight,scaleMode);return objSize}function setImageToSlide(objSlide,objItem,isForce){var objItemWrapper=objSlide.children(".ug-item-wrapper"),objPreloader=getSlidePreloader(objSlide);if(void 0===objItem.urlImage||""==objItem.urlImage)throw new Error("The slide don't have big image defined ( data-image='imageurl' ). Please check gallery items.","showbig");var urlImage=objItem.urlImage,currentImage=objSlide.data("urlImage");objSlide.data("urlImage",urlImage);var scaleMode=t.getScaleMode(objSlide),slideType=t.getSlideType(objSlide);objPadding=t.getObjImagePadding();var imageAlt="";if("string"==typeof objItem.description&&(imageAlt=objItem.description),currentImage==urlImage&& !0!==isForce){var objImage=objItemWrapper.children("img");objImage.attr("alt",imageAlt),(0==objItem.imageWidth||0==objItem.imageHeight)&&g_gallery.checkFillImageSize(objImage,objItem);var objImageData={};objImageData="image"!=slideType&& !0==g_options.slider_video_constantsize?scaleImageConstantSize(objImage,objItem):g_functions.scaleImageFitParent(objImage,objItem.imageWidth,objItem.imageHeight,scaleMode,objPadding),setImageDesign(objImage,slideType,objImageData),g_objThis.trigger(t.events.AFTER_PUT_IMAGE,objSlide)}else{var objImage=g_functions.placeImageInsideParent(urlImage,objItemWrapper,objItem.imageWidth,objItem.imageHeight,scaleMode,objPadding);if(objImage.attr("alt",imageAlt),!0==objItem.isBigImageLoaded){if(objImage.fadeTo(0,1),hidePreloader(objPreloader),"image"!=slideType&& !0==g_options.slider_video_constantsize)var objImageData=scaleImageConstantSize(objImage,objItem);else var objImageData=g_functions.getImageInsideParentData(objItemWrapper,objItem.imageWidth,objItem.imageHeight,scaleMode,objPadding);objImage.css("width",objImageData.imageWidth+"px"),setImageDesign(objImage,slideType,objImageData),g_objThis.trigger(t.events.AFTER_PUT_IMAGE,objSlide)}else objImage.fadeTo(0,0),showPreloader(objPreloader),objSlide.data("isLoading",!0),t.isSlideCurrent(objSlide)&&g_objThis.trigger(t.events.CURRENTSLIDE_LOAD_START),objImage.data("itemIndex",objItem.index),objImage.on("load",function(){var a=jQuery(this),f=a.data("itemIndex");a.fadeTo(0,1);var b=a.parent().parent(),d=t.getSlideType(b),g=getSlidePreloader(b),h=t.getObjImagePadding(),i=t.getScaleMode(b);hidePreloader(g),b.data("isLoading",!1),t.isSlideCurrent(b)&&g_objThis.trigger(t.events.CURRENTSLIDE_LOAD_END),g_gallery.onItemBigImageLoaded(null,a);var c=g_gallery.getItem(f),e={};"image"!=d&& !0==g_options.slider_video_constantsize?scaleImageConstantSize(a,c):e=g_functions.scaleImageFitParent(a,c.imageWidth,c.imageHeight,i,h),a.fadeTo(0,1),setImageDesign(a,d,e),g_objThis.trigger(t.events.AFTER_PUT_IMAGE,b)})}}function setItemToSlide(objSlide,objItem){try{var objItemWrapper=objSlide.children(".ug-item-wrapper");if(null==objItem)return objItemWrapper.html(""),objSlide.removeData("index"),objSlide.removeData("type"),objSlide.removeData("urlImage"),!1;objSlide.data("index"),objSlide.data("index",objItem.index),objSlide.data("type",objItem.type),!0==g_options.slider_enable_links&&"image"==objItem.type&&(objItem.link?objSlide.addClass("ug-slide-clickable"):objSlide.removeClass("ug-slide-clickable")),setImageToSlide(objSlide,objItem);var objVideoPlayButton=getSlideVideoPlayButton(objSlide);"image"===objItem.type?objVideoPlayButton.hide():objVideoPlayButton.show()}catch(error){throw void 0!==error.fileName&&"showbig"==error.fileName&&g_gallery.showErrorMessageReplaceGallery(error.message),objItemWrapper.html(""),new Error(error)}}function hideTextPanel(){if(!g_objTextPanel|| !0==isTextPanelHidden())return!1;var panelElement=g_objTextPanel.getElement(),animationTime=0;(!0==g_temp.isTextPanelSaparateHover|| !0==g_options.slider_textpanel_always_on)&&(animationTime=g_options.slider_controls_appear_duration),panelElement.stop().fadeTo(animationTime,0),panelElement.data("isHidden",!0)}function showTextPanel(){if(!g_objTextPanel|| !1==isTextPanelHidden())return!1;var panelElement=g_objTextPanel.getElement(),animationTime=0;(!0==g_temp.isTextPanelSaparateHover|| !0==g_options.slider_textpanel_always_on)&&(panelElement.show(),g_objTextPanel.positionElements(),animationTime=g_options.slider_controls_appear_duration),panelElement.stop().show().fadeTo(animationTime,1),panelElement.data("isHidden",!1)}function isTextPanelHidden(){return!1!==g_objTextPanel.getElement().data("isHidden")}function validateSlideType(type,objSlide){if(void 0==objSlide)var objSlide=t.getCurrentSlide();var slideType=t.getSlideType(objSlide);if(slideType!=type)throw new Error("Wrong slide type: "+slideType+", should be: "+type);return!0}function setVideoPlayerPosition(){var objCurrentSlide=t.getCurrentSlide(),objImage=t.getSlideImage(objCurrentSlide),slideSize=g_functions.getElementSize(objCurrentSlide),left=slideSize.left,top=slideSize.top;if(!0==g_options.slider_video_constantsize){var imageSize=g_functions.getElementSize(objImage);left+=imageSize.left,top+=imageSize.top}else left+=g_options.slider_video_padding_left,top+=g_options.slider_video_padding_top;g_objVideoPlayer.setPosition(left,top)}function setVideoPlayerConstantSize(){var videoWidth=g_options.slider_video_constantsize_width,videoHeight=g_options.slider_video_constantsize_height;g_objVideoPlayer.setSize(videoWidth,videoHeight);var videoElement=g_objVideoPlayer.getObject();setImageDesign(videoElement,"video")}function doTransition(direction,objItem,forceTransition){g_objThis.trigger(t.events.TRANSITION_START);var transition=g_options.slider_transition;switch(forceTransition&&(transition=forceTransition),t.stopSlideAction(null,!0),transition){default:case"fade":transitionFade(objItem);break;case"slide":transitionSlide(direction,objItem);break;case"lightbox_open":transitionFade(objItem,!1,!0)}}function transitionSlide(direction,objItem){if(!0==t.isAnimating())return g_temp.itemWaiting=objItem,!0;null!=g_temp.itemWaiting&&(g_temp.itemWaiting=null);var slides=t.getSlidesReference();switch(direction){case"right":setItemToSlide(slides.objPrevSlide,objItem),positionSlides();var destX=-g_functions.getElementSize(slides.objPrevSlide).left;t.switchSlideNums("right");break;case"left":setItemToSlide(slides.objNextSlide,objItem),positionSlides();var destX=-g_functions.getElementSize(slides.objNextSlide).left;t.switchSlideNums("left");break;default:throw new Error("wrong direction: "+direction)}var transSpeed=g_options.slider_transition_speed,transEasing=g_options.slider_transition_easing,animateParams={duration:transSpeed,easing:transEasing,queue:!1,always:function(){if(t.stopSlideAction(),g_objVideoPlayer.hide(),null!=g_temp.itemWaiting){var a=getSlideDirection(g_temp.itemWaiting);transitionSlide(a,g_temp.itemWaiting)}else t.placeNabourItems(),g_objThis.trigger(t.events.TRANSITION_END)}};g_objInner.animate({left:destX+"px"},animateParams)}function animateOpacity(objItem,opacity,completeFunction){completeFunction?objItem.fadeTo(g_options.slider_transition_speed,opacity,completeFunction):objItem.fadeTo(g_options.slider_transition_speed,opacity)}function transitionFade(objItem,noAnimation,noHidePlayer){if(!noAnimation)var noAnimation=!1;var slides=t.getSlidesReference();setItemToSlide(slides.objNextSlide,objItem);var objCurrentPos=g_functions.getElementSize(slides.objCurrentSlide);g_functions.placeElement(slides.objNextSlide,objCurrentPos.left,objCurrentPos.top);var currentNum=g_temp.numCurrent;(g_temp.numCurrent=g_temp.numNext,g_temp.numNext=currentNum,g_objThis.trigger(t.events.ITEM_CHANGED),slides.objNextSlide.stop(!0),slides.objCurrentSlide.stop(!0),!0==noAnimation)?(slides.objCurrentSlide.fadeTo(0,0),slides.objNextSlide.fadeTo(0,1),t.placeNabourItems(),g_objThis.trigger(t.events.TRANSITION_END),!0!==noHidePlayer&&g_objVideoPlayer.hide()):(slides.objNextSlide.fadeTo(0,0),animateOpacity(slides.objCurrentSlide,0,function(){t.placeNabourItems(),g_objThis.trigger(t.events.TRANSITION_END),!0!==noHidePlayer&&g_objVideoPlayer.hide()}),!0==g_objVideoPlayer.isVisible()&&animateOpacity(g_objVideoPlayer.getObject(),0),animateOpacity(slides.objNextSlide,1))}function modifyForMobile(){!0==g_options.slider_fullscreen_button_mobilehide&&g_objButtonFullscreen&&g_objButtonFullscreen.hide(),!0==g_options.slider_play_button_mobilehide&&g_objButtonPlay&&g_objButtonPlay.hide(),!0==g_options.slider_zoompanel_mobilehide&&g_objZoomPanel&&g_objZoomPanel.getElement().hide()}function modifyForDesctop(){!0==g_options.slider_fullscreen_button_mobilehide&&g_objButtonFullscreen&&g_objButtonFullscreen.show(),!0==g_options.slider_play_button_mobilehide&&g_objButtonPlay&&g_objButtonPlay.show(),!0==g_options.slider_zoompanel_mobilehide&&g_objZoomPanel&&g_objZoomPanel.getElement().show()}function checkMobileModify(){g_gallery.isMobileMode()?modifyForMobile():modifyForDesctop()}function getControlsObjects(){return g_objSlider.children(".ug-slider-control")}function hideControls(noAnimation){if(!1==g_functions.isTimePassed("sliderControlsToggle")|| !1==g_temp.isControlsVisible)return!1;if(!noAnimation)var noAnimation=!1;var objControls=getControlsObjects();!0===noAnimation?objControls.stop().fadeTo(0,0).hide():objControls.stop().fadeTo(g_options.slider_controls_appear_duration,0,function(){objControls.hide()}),g_temp.isControlsVisible=!1}function showControls(noAnimation){if(!1==g_functions.isTimePassed("sliderControlsToggle"))return!1;if(!0==g_temp.isControlsVisible)return!0;if(!noAnimation)var noAnimation=!1;var objControls=getControlsObjects();!0===noAnimation?objControls.stop().show():(objControls.stop().show().fadeTo(0,0),objControls.fadeTo(g_options.slider_controls_appear_duration,1)),g_temp.isControlsVisible=!0}function toggleControls(){!1==g_temp.isControlsVisible?showControls():hideControls()}function setControlsMode(mode){if(mode==g_temp.currentControlsMode)return!1;switch(mode){case"image":g_objZoomPanel&&g_objZoomPanel.getElement().show();break;case"video":g_objZoomPanel&&g_objZoomPanel.getElement().hide();break;default:throw new Error("wrong controld mode: "+mode)}g_temp.currentControlsMode=mode}function onItemChange(data,arg_objItem,role){var objItem=g_gallery.getSelectedItem();t.setItem(objItem,!1,role);var itemIndex=objItem.index;g_objBullets&&g_objBullets.setActive(itemIndex),g_objTextPanel&& !1==g_temp.isTextPanelSaparateHover&&showTextPanel(),"image"==objItem.type?setControlsMode("image"):setControlsMode("video")}function onBulletClick(event,bulletIndex){g_gallery.selectItem(bulletIndex)}function onClick(event){if(g_objTouchSlider&& !1==g_objTouchSlider.isTapEventOccured(event))return!0;g_objThis.trigger(t.events.CLICK,event)}function onActualClick(){var isClickable=t.getCurrentSlide().hasClass("ug-slide-clickable"),objItem=t.getCurrentItem();if(isClickable)return!1==g_options.slider_links_newpage?location.href=objItem.link:window.open(objItem.link,"_blank"),!0;!1==g_options.slider_controls_always_on&& !0==g_options.slider_controls_appear_ontap&& !0==t.isCurrentSlideType("image")&&(toggleControls(),g_objTextPanel&& !0==g_options.slider_textpanel_always_on&&t.isCurrentSlideType("image")&&t.isCurrentSlideImageFit()&&showTextPanel())}function onZoomChange(event){g_objTextPanel&&t.isCurrentSlideType("image")&& !1==t.isCurrentSlideImageFit()&&hideTextPanel()}function onMouseEnter(){showControls()}function onMouseLeave(){hideControls()}function objVideoPlayClick(objButton){var objSlide=objButton.parent();t.startSlideAction(objSlide)}function onVideoPlayerShow(){g_gallery.isPlayMode()&&g_gallery.pausePlaying(),g_objThis.trigger(t.events.ACTION_START)}function onVideoPlayerHide(){g_gallery.isPlayMode()&&g_gallery.continuePlaying(),g_objThis.trigger(t.events.ACTION_END)}function onItemImageUpdate(event,index,urlImage){g_objSlide1.data("index")==index&&setImageToSlide(g_objSlide1,objItem=g_gallery.getItem(index),!0),g_objSlide2.data("index")==index&&setImageToSlide(g_objSlide2,objItem=g_gallery.getItem(index),!0),g_objSlide3.data("index")==index&&setImageToSlide(g_objSlide3,objItem=g_gallery.getItem(index),!0)}function onSlideImageLoaded(data,objSlide){objSlide=jQuery(objSlide);var objImage=t.getSlideImage(objSlide),objButtonVideoPlay=getSlideVideoPlayButton(objSlide),objSize=g_functions.getElementSize(objImage);g_functions.placeElement(objButtonVideoPlay,"center","middle",objSize.left,objSize.top,objImage)}function initSlideEvents(objSlide){var objVideoPlayButton=getSlideVideoPlayButton(objSlide);g_functions.addClassOnHover(objVideoPlayButton),g_functions.setButtonOnClick(objVideoPlayButton,objVideoPlayClick)}function initEvents(){g_objGallery.on(g_gallery.events.ITEM_IMAGE_UPDATED,onItemImageUpdate),g_objGallery.on(g_gallery.events.ITEM_CHANGE,onItemChange),g_objBullets&&jQuery(g_objBullets).on(g_objBullets.events.BULLET_CLICK,onBulletClick),!0==g_options.slider_enable_arrows&&(g_functions.addClassOnHover(g_objArrowRight,"ug-arrow-hover"),g_functions.addClassOnHover(g_objArrowLeft,"ug-arrow-hover"),g_gallery.setNextButton(g_objArrowRight),g_gallery.setPrevButton(g_objArrowLeft)),!1==g_options.slider_controls_always_on&&g_objSlider.hover(onMouseEnter,onMouseLeave),g_objSlider.on("touchend click",onClick),g_objThis.on(t.events.CLICK,onActualClick),g_objTextPanel&& !0==g_temp.isTextPanelSaparateHover&&g_objSlider.hover(showTextPanel,hideTextPanel),g_objButtonPlay&&(g_functions.addClassOnHover(g_objButtonPlay,"ug-button-hover"),g_gallery.setPlayButton(g_objButtonPlay)),g_objButtonFullscreen&&(g_functions.addClassOnHover(g_objButtonFullscreen,"ug-button-hover"),g_gallery.setFullScreenToggleButton(g_objButtonFullscreen)),g_objZoomSlider&&g_objThis.on(t.events.ZOOM_CHANGE,onZoomChange),g_objZoomPanel&&g_objZoomPanel.initEvents(),g_objVideoPlayer.initEvents(),jQuery(g_objVideoPlayer).on(g_objVideoPlayer.events.SHOW,onVideoPlayerShow),jQuery(g_objVideoPlayer).on(g_objVideoPlayer.events.HIDE,onVideoPlayerHide),initSlideEvents(g_objSlide1),initSlideEvents(g_objSlide2),initSlideEvents(g_objSlide3),g_objThis.on(t.events.AFTER_PUT_IMAGE,onSlideImageLoaded),g_objSlider.on("mouseenter",".ug-item-wrapper img",function(a){g_objThis.trigger(t.events.IMAGE_MOUSEENTER)}),g_objSlider.on("mouseleave",".ug-item-wrapper img",function(a){!1==t.isMouseInsideSlideImage(a)&&g_objThis.trigger(t.events.IMAGE_MOUSELEAVE)})}function getLoaderClass(){var loaderClass;switch(g_options.slider_loader_type){default:case 1:loaderClass="ug-loader1";break;case 2:loaderClass="ug-loader2";break;case 3:loaderClass="ug-loader3";break;case 4:loaderClass="ug-loader4";break;case 5:loaderClass="ug-loader5";break;case 6:loaderClass="ug-loader6";break;case 7:loaderClass="ug-loader7";break;case 8:loaderClass="ug-loader8";break;case 9:loaderClass="ug-loader9"}return"black"==g_options.slider_loader_color&&(loaderClass+=" ug-loader-black"),loaderClass}function getSlideByNum(num){switch(num){case 1:return g_objSlide1;case 2:return g_objSlide2;case 3:return g_objSlide3;default:throw new Error("wrong num: "+num)}}function getSlideDirection(objItem){var currentIndex=t.getSlidesReference().objCurrentSlide.data("index"),nextIndex=objItem.index,direction="left";return currentIndex>nextIndex&&(direction="right"),direction}function getSlidePreloader(objSlide){if(!objSlide)var objSlide=t.getCurrentSlide();return objSlide.children(".ug-slider-preloader")}function getSlideVideoPlayButton(objSlide){return objSlide.children(".ug-button-videoplay")}function getSlideItem(objSlide){if(!objSlide)var objSlide=t.getCurrentSlide();var index=objSlide.data("index");return void 0==index?null:g_gallery.getItem(index)}this.switchSlideNums=function(b){switch(g_objThis.trigger(t.events.BEFORE_SWITCH_SLIDES),b){case"left":var a=g_temp.numCurrent;g_temp.numCurrent=g_temp.numNext,g_temp.numNext=g_temp.numPrev,g_temp.numPrev=a;break;case"right":var a=g_temp.numCurrent;g_temp.numCurrent=g_temp.numPrev,g_temp.numPrev=g_temp.numNext,g_temp.numNext=a;break;default:throw new Error("wrong direction: "+b)}g_objThis.trigger(t.events.ITEM_CHANGED)},this.destroy=function(){g_objThis.off(t.events.AFTER_PUT_IMAGE),g_objGallery.off(g_gallery.events.ITEM_IMAGE_UPDATED),g_objGallery.off(g_gallery.events.ITEM_CHANGE),g_objBullets&&jQuery(g_objBullets).on(g_objBullets.events.BULLET_CLICK),g_objSlider.off("mouseenter"),g_objSlider.off("mouseleave"),g_objSlider.off("touchend"),g_objSlider.off("click"),g_objThis.off(t.events.CLICK),g_objZoomSlider&&g_objThis.off(t.events.ZOOM_CHANGE),g_objThis.off(t.events.BEFORE_SWITCH_SLIDES),jQuery(g_objVideoPlayer).off(g_objVideoPlayer.events.SHOW),jQuery(g_objVideoPlayer).off(g_objVideoPlayer.events.HIDE),g_objVideoPlayer.destroy(),g_objSlider.off("mouseenter",".ug-item-wrapper img"),g_objSlider.off("mouseleave",".ug-item-wrapper img")},this.________EXTERNAL_GENERAL___________=function(){},this.init=function(a,b,c){initSlider(a,b,c)},this.getSlideImage=function(a){if(!a)var a=t.getCurrentSlide();return a.find(".ug-item-wrapper img")},this.setHtml=function(a){setHtmlSlider(a)},this.run=function(){runSlider()},this.isInnerInPlace=function(){var a=t.getSlidesReference(),b=-g_functions.getElementSize(a.objCurrentSlide).left,c=g_functions.getElementSize(g_objInner);return b==c.left},this.isAnimating=function(){return g_objInner.is(":animated")},this.isSlideCurrent=function(a){var b=a.data("slidenum");return g_temp.numCurrent==b},this.isSlideHasItem=function(a){var b;return null!=a.data("index")},this.getObjImagePadding=function(){return{padding_top:g_options.slider_image_padding_top,padding_bottom:g_options.slider_image_padding_bottom,padding_left:g_options.slider_image_padding_left,padding_right:g_options.slider_image_padding_right}},this.getSlidesReference=function(){return{objPrevSlide:getSlideByNum(g_temp.numPrev),objNextSlide:getSlideByNum(g_temp.numNext),objCurrentSlide:getSlideByNum(g_temp.numCurrent)}},this.getCurrentSlide=function(){return t.getSlidesReference().objCurrentSlide},this.getCurrentItemIndex=function(){var a=t.getSlidesReference().objCurrentSlide.data("index");return null==a&&(a=-1),a},this.getCurrentItem=function(){var a=t.getCurrentItemIndex();return -1==a?null:g_gallery.getItem(a)},this.getSlideType=function(a){return void 0==a&&(a=t.getCurrentSlide()),a.data("type")},this.isMouseInsideSlideImage=function(c){var b=t.getSlideImage(),a=g_functions.getMousePosition(c);void 0===a.pageX&&(a=g_objTouchSlider.getLastMousePos());var d=g_functions.getMouseElementPoint(a,b),e=g_functions.getElementSize(b);return g_functions.isPointInsideElement(d,e)},this.isCurrentSlideType=function(a){return t.getSlideType()==a},this.isCurrentSlideLoadingImage=function(){return!0===t.getCurrentSlide().data("isLoading")},this.setItem=function(c,g,e){var f=t.getSlidesReference(),a=f.objCurrentSlide.data("index"),d=c.index;if(d==a)return!0;if(void 0==a)setItemToSlide(f.objCurrentSlide,c),t.placeNabourItems();else{var b="left";g_gallery.getNumItems(),"next"==e?b="left":"prev"==e||a>d?b="right":a>d&&(b="right"),doTransition(b,c,g)}},this.placeNabourItems=function(){var a=t.getSlidesReference(),b=a.objCurrentSlide.data("index"),c=g_gallery.getPrevItem(b),d=g_gallery.getNextItem(b);setItemToSlide(a.objNextSlide,d),setItemToSlide(a.objPrevSlide,c),positionSlides()},this.________EXTERNAL_API___________=function(){},this.stopSlideAction=function(a,b){a||(a=t.getCurrentSlide()),!0===b?g_objVideoPlayer.pause():g_objVideoPlayer.hide()},this.startSlideAction=function(b){b||(b=t.getCurrentSlide());var a=getSlideItem(b);if("image"==a.type)return!0;switch(!0==g_options.slider_video_constantsize&&setVideoPlayerConstantSize(),setVideoPlayerPosition(),g_objVideoPlayer.show(),a.type){case"youtube":g_objVideoPlayer.playYoutube(a.videoid,!0,a.video_start);break;case"vimeo":g_objVideoPlayer.playVimeo(a.videoid);break;case"html5video":g_objVideoPlayer.playHtml5Video(a.videoogv,a.videowebm,a.videomp4,a.urlImage);break;case"soundcloud":g_objVideoPlayer.playSoundCloud(a.trackid);break;case"wistia":g_objVideoPlayer.playWistia(a.videoid)}},this.getScaleMode=function(a){if(!a)var a=t.getCurrentSlide();return"image"!=t.getSlideType(a)?g_options.slider_scale_mode_media:g_options.slider_scale_mode==g_options.slider_scale_mode_fullscreen?g_options.slider_scale_mode:!0==g_gallery.isFullScreen()?g_options.slider_scale_mode_fullscreen:g_options.slider_scale_mode},this.getObjects=function(){return{g_objSlider:g_objSlider,g_objInner:g_objInner,g_options:g_options,g_objZoomSlider:g_objZoomSlider}},this.getObjZoom=function(){return g_objZoomSlider},this.getOptions=function(){return g_options},this.getElement=function(){return g_objSlider},this.getVideoObject=function(){return g_objVideoPlayer},this.isCurrentSlideImageFit=function(){var a=t.getCurrentSlide();t.getSlideType(a),validateSlideType("image",a);var b=t.getSlideImage(a);return 0!=b.length&&g_functions.isImageFitParent(b)},this.isCurrentImageInPlace=function(){var a=t.getSlideImage();if(0==a.length)return!1;var d=t.getScaleMode(),e=t.getObjImagePadding(),b=getSlideItem(),f=a.parent(),g=g_functions.getImageInsideParentData(f,b.imageWidth,b.imageHeight,d,e),h=g_functions.getElementSize(a),c=!1;return g.imageWidth==h.width&&(c=!0),c},this.isSlideActionActive=function(){return g_objVideoPlayer.isVisible()},this.isSwiping=function(){return!!g_objTouchSlider&&g_objTouchSlider.isTouchActive()},this.isPreloading=function(){return!!getSlidePreloader().is(":visible")},this.setOptions=function(a){g_optionsPrefix&&(a=g_functions.convertCustomPrefixOptions(a,g_optionsPrefix,"slider")),g_options=jQuery.extend(g_options,a)},this.setSize=function(b,a){if(b<0||a<0)return!0;var f={};f.width=b+"px",f.height=a+"px",g_objSlider.css(f);var e={};e.height=a+"px",e.top="0px",e.left="0px",g_objInner.css(e);var c={};c.height=a+"px",c.width=b+"px",g_objSlide1.css(c),g_objSlide2.css(c),g_objSlide3.css(c);var g=b-g_options.slider_item_padding_left-g_options.slider_item_padding_right,h=a-g_options.slider_item_padding_top-g_options.slider_item_padding_bottom,d={};d.width=g+"px",d.height=h+"px",d.top=g_options.slider_item_padding_top+"px",d.left=g_options.slider_item_padding_left+"px",g_objSlider.find(".ug-item-wrapper").css(d),g_objTextPanel&&g_objTextPanel.setSizeByParent(),positionElements(),resizeSlideItem(g_objSlide1),resizeSlideItem(g_objSlide2),resizeSlideItem(g_objSlide3),positionSlides();var i=t.getSlideType();if("image"!=i&& !0==g_options.slider_video_constantsize)setVideoPlayerConstantSize();else{var j=b-g_options.slider_video_padding_left-g_options.slider_video_padding_right,k=a-g_options.slider_video_padding_top-g_options.slider_video_padding_bottom;g_objVideoPlayer.setSize(j,k)}setVideoPlayerPosition()},this.refreshSlideItems=function(){if(!0==t.isAnimating())return!0;resizeSlideItem(g_objSlide1),resizeSlideItem(g_objSlide2),resizeSlideItem(g_objSlide3),positionSlides()},this.isMouseOver=function(){return g_objSlider.ismouseover()},this.setPosition=function(a,b){g_functions.placeElement(g_objSlider,a,b)},this.zoomIn=function(){if(!g_objZoomSlider)return!0;g_objZoomSlider.zoomIn()},this.zoomOut=function(){if(!g_objZoomSlider)return!0;g_objZoomSlider.zoomOut()},this.zoomBack=function(){if(!g_objZoomSlider)return!0;g_objZoomSlider.zoomBack()}}function UGTextPanel(){var g_objPanel,g_objParent,g_objTitle,g_objDesc,g_objBG,g_objTextWrapper,g_gallery,t=this,g_functions=new UGFunctions,g_optionsPrefix="",g_options={textpanel_align:"bottom",textpanel_margin:0,textpanel_text_valign:"middle",textpanel_padding_top:10,textpanel_padding_bottom:10,textpanel_height:null,textpanel_padding_title_description:5,textpanel_padding_right:11,textpanel_padding_left:11,textpanel_fade_duration:200,textpanel_enable_title:!0,textpanel_enable_description:!0,textpanel_title_as_link:!1,textpanel_title_link_newtab:!0,textpanel_enable_bg:!0,textpanel_bg_color:"#000000",textpanel_bg_opacity:.4,textpanel_title_color:null,textpanel_title_font_family:null,textpanel_title_text_align:null,textpanel_title_font_size:null,textpanel_title_bold:null,textpanel_css_title:{},textpanel_desc_color:null,textpanel_desc_font_family:null,textpanel_desc_text_align:null,textpanel_desc_font_size:null,textpanel_desc_bold:null,textpanel_css_description:{},textpanel_desc_style_as_title:!1,textpanel_bg_css:{}},g_temp={isFirstTime:!0,setInternalHeight:!0,lastTitleBottom:0,lastDescHeight:0};function positionElementsTop(animateHeight,startY){if(!startY)var startY=g_options.textpanel_padding_top;var maxy=startY;if(g_objTitle){var titleY=maxy;if(g_functions.placeElement(g_objTitle,0,titleY),!0==g_objTitle.is(":visible")){var maxy=g_functions.getElementSize(g_objTitle).bottom;maxy>0&&(g_temp.lastTitleBottom=maxy)}else{var maxy=20;g_temp.lastTitleBottom>0&&(maxy=g_temp.lastTitleBottom)}}var textDesc="";if(g_objDesc&&(textDesc=jQuery.trim(g_objDesc.text())),""!=textDesc){var descY=maxy;if(g_objTitle&&(descY+=g_options.textpanel_padding_title_description),g_functions.placeElement(g_objDesc,0,descY),!0==jQuery(g_objDesc).is(":visible")){var objDescSize=g_functions.getElementSize(g_objDesc);maxy=objDescSize.bottom,objDescSize.height>0&&(g_temp.lastDescHeight=objDescSize.height)}else{var descHeight=16;g_temp.lastDescHeight>0&&(descHeight=g_temp.lastDescHeight),maxy=descY+descHeight}}g_options.textpanel_height|| !0!=g_temp.setInternalHeight||setHeight(maxy+g_options.textpanel_padding_bottom,animateHeight)}function getTotalTextHeight(){var totalHeight=0;if(g_objTitle&&(totalHeight+=g_objTitle.outerHeight()),g_objDesc){var textDesc="";g_objDesc&&(textDesc=jQuery.trim(g_objDesc.text())),""!=textDesc&&(g_objTitle&&(totalHeight+=g_options.textpanel_padding_title_description),totalHeight+=g_objDesc.outerHeight())}return totalHeight}function positionElementsMiddle(){var totalTextHeight=getTotalTextHeight();positionElementsTop(!1,(g_objTextWrapper.height()-totalTextHeight)/2)}function positionElementBottom(){var totalTextHeight=getTotalTextHeight();positionElementsTop(!1,g_objTextWrapper.height()-totalTextHeight-g_options.textpanel_padding_bottom)}function setHeight(height,animateHeight){if(!animateHeight)var animateHeight=!1;if(!0==animateHeight){g_objBG&&height>g_objBG.height()&&g_objBG.height(height);var objCss={height:height+"px"};g_objPanel.add(g_objTextWrapper).animate(objCss,g_options.textpanel_fade_duration)}else g_objBG&&g_objBG.height(height),g_objPanel.add(g_objTextWrapper).height(height)}function setCss(){if(!0==g_options.textpanel_enable_bg){(g_objBG=g_objPanel.children(".ug-textpanel-bg")).fadeTo(0,g_options.textpanel_bg_opacity);var objCssBG={"background-color":g_options.textpanel_bg_color};objCssBG=jQuery.extend(objCssBG,g_options.textpanel_bg_css),g_objBG.css(objCssBG)}if(!0==g_options.textpanel_enable_title){g_objTitle=g_objTextWrapper.children(".ug-textpanel-title");var objCssTitle={};null!==g_options.textpanel_title_color&&(objCssTitle.color=g_options.textpanel_title_color),null!==g_options.textpanel_title_font_family&&(objCssTitle["font-family"]=g_options.textpanel_title_font_family),null!==g_options.textpanel_title_text_align&&(objCssTitle["text-align"]=g_options.textpanel_title_text_align),null!==g_options.textpanel_title_font_size&&(objCssTitle["font-size"]=g_options.textpanel_title_font_size+"px"),null!==g_options.textpanel_title_bold&&(!0===g_options.textpanel_title_bold?objCssTitle["font-weight"]="bold":objCssTitle["font-weight"]="normal"),g_options.textpanel_css_title&&(objCssTitle=jQuery.extend(objCssTitle,g_options.textpanel_css_title)),g_objTitle.css(objCssTitle)}if(!0==g_options.textpanel_enable_description){g_objDesc=g_objTextWrapper.children(".ug-textpanel-description");var objCssDesc={};null!==g_options.textpanel_desc_color&&(objCssDesc.color=g_options.textpanel_desc_color),null!==g_options.textpanel_desc_font_family&&(objCssDesc["font-family"]=g_options.textpanel_desc_font_family),null!==g_options.textpanel_desc_text_align&&(objCssDesc["text-align"]=g_options.textpanel_desc_text_align),null!==g_options.textpanel_desc_font_size&&(objCssDesc["font-size"]=g_options.textpanel_desc_font_size+"px"),null!==g_options.textpanel_desc_bold&&(!0===g_options.textpanel_desc_bold?objCssDesc["font-weight"]="bold":objCssDesc["font-weight"]="normal"),g_options.textpanel_css_title&&(objCssDesc=jQuery.extend(objCssDesc,g_options.textpanel_css_description)),g_objDesc.css(objCssDesc)}}function onItemChange(){var objItem=g_gallery.getSelectedItem();t.setText(objItem.title,objItem.description,objItem.link)}function initEvents(){jQuery(g_gallery).on(g_gallery.events.ITEM_CHANGE,onItemChange)}this.positionElements=function(a){if(!g_options.textpanel_height||"top"==g_options.textpanel_text_valign)return positionElementsTop(a),!1;switch(g_options.textpanel_text_valign){default:case"top":positionElementsTop(!1);break;case"bottom":positionElementBottom();break;case"center":case"middle":positionElementsMiddle()}},this.init=function(c,a,b){if(g_gallery=c,b&&(g_optionsPrefix=b,a=g_functions.convertCustomPrefixOptions(a,g_optionsPrefix,"textpanel")),a&&(g_options=jQuery.extend(g_options,a)),!1==g_options.textpanel_enable_title&& !1==g_options.textpanel_enable_description)throw new Error("Textpanel Error: The title or description must be enabled");g_options.textpanel_height&&g_options.textpanel_height<0&&(g_options.textpanel_height=null),!0!=g_options.textpanel_desc_style_as_title||(g_options.textpanel_desc_color||(g_options.textpanel_desc_color=g_options.textpanel_title_color),g_options.textpanel_desc_bold||(g_options.textpanel_desc_bold=g_options.textpanel_title_bold),g_options.textpanel_desc_font_family||(g_options.textpanel_desc_font_family=g_options.textpanel_title_font_family),g_options.textpanel_desc_font_size||(g_options.textpanel_desc_font_size=g_options.textpanel_title_font_size),g_options.textpanel_desc_text_align||(g_options.textpanel_desc_text_align=g_options.textpanel_title_text_align))},this.appendHTML=function(c,a){g_objParent=c;var b="<div class='ug-textpanel"+(a=a?" "+a:"")+"'>";!0==g_options.textpanel_enable_bg&&(b+="<div class='ug-textpanel-bg"+a+"'></div>"),b+="<div class='ug-textpanel-textwrapper"+a+"'>",!0==g_options.textpanel_enable_title&&(b+="<div class='ug-textpanel-title"+a+"'></div>"),!0==g_options.textpanel_enable_description&&(b+="<div class='ug-textpanel-description"+a+"'></div>"),b+="</div></div>",c.append(b),g_objTextWrapper=(g_objPanel=c.children(".ug-textpanel")).children(".ug-textpanel-textwrapper"),setCss()},this.destroy=function(){jQuery(g_gallery).off(g_gallery.events.ITEM_CHANGE)},this.run=function(){t.setSizeByParent(),initEvents()},this.setPanelSize=function(b,a){if(g_temp.setInternalHeight=!0,a)g_temp.setInternalHeight=!1;else var a=80;g_options.textpanel_height&&(a=g_options.textpanel_height),g_objPanel.width(b),g_objPanel.height(a),g_objBG&&(g_objBG.width(b),g_objBG.height(a));var c=b-g_options.textpanel_padding_left-g_options.textpanel_padding_right,d=g_options.textpanel_padding_left;g_functions.setElementSizeAndPosition(g_objTextWrapper,d,0,c,a),g_objTitle&&g_objTitle.width(c),g_objDesc&&g_objDesc.width(c),!1==g_temp.isFirstTime&&t.positionElements(!1)},this.setSizeByParent=function(){var a=g_functions.getElementSize(g_objParent);t.setPanelSize(a.width)},this.setTextPlain=function(a,d,b){if(!0==g_options.textpanel_title_as_link&&a&&b){var c="";!0==g_options.textpanel_title_link_newtab&&(c+=' target="blank"'),a='<a class="ug-textpanel-link" href="'+b+'" '+c+">"+a+"</a>"}g_objTitle&&g_objTitle.html(a),g_objDesc&&g_objDesc.html(d)},this.setText=function(a,b,c){!0==g_temp.isFirstTime?(t.setTextPlain(a,b,c),g_temp.isFirstTime=!1,t.positionElements(!1)):g_objTextWrapper.stop().fadeTo(g_options.textpanel_fade_duration,0,function(){t.setTextPlain(a,b,c),t.positionElements(!0),jQuery(this).fadeTo(g_options.textpanel_fade_duration,1)})},this.positionPanel=function(b,c){var a={};if(null!=b)a.top=b,a.bottom="auto";else switch(g_options.textpanel_align){case"top":a.top=g_options.textpanel_margin+"px";break;case"bottom":a.top="auto",a.bottom=g_options.textpanel_margin+"px";break;case"middle":a.top=g_functions.getElementRelativePos(g_objPanel,"middle",g_options.textpanel_margin)}null!=c&&(a.left=c),g_objPanel.css(a)},this.setOptions=function(a){g_optionsPrefix&&(a=g_functions.convertCustomPrefixOptions(a,g_optionsPrefix,"textpanel")),g_options=jQuery.extend(g_options,a)},this.getElement=function(){return g_objPanel},this.getSize=function(){return g_functions.getElementSize(g_objPanel)},this.refresh=function(b,c,a,d){setCss(),a?t.setPanelSize(a,d):t.setSizeByParent(),t.positionElements(!1),!0!==c&&t.positionPanel(),!0===b&&t.show()},this.hide=function(){g_objPanel.hide()},this.show=function(){g_objPanel.show()},this.getOptions=function(){return g_options},this.getOption=function(a){return!1==g_options.hasOwnProperty(a)?null:g_options[a]}}function UGZoomButtonsPanel(){var g_objPanel,g_objParent,g_objButtonPlus,g_objButtonMinus,g_objButtonReturn,t=this,g_slider=new UGSlider,g_functions=new UGFunctions,g_options={slider_zoompanel_skin:""};function isButtonDisabled(objButton){return!!(!objButton||objButton.hasClass("ug-zoompanel-button-disabled"))}function disableButton(objButton){objButton&&objButton.addClass("ug-zoompanel-button-disabled")}function enableButton(objButton){objButton&&objButton.removeClass("ug-zoompanel-button-disabled")}function onZoomChange(){if(!1==g_slider.isCurrentSlideType("image"))return!0;!0==g_slider.isCurrentSlideImageFit()?!1==isButtonDisabled(g_objButtonMinus)&&(disableButton(g_objButtonMinus),disableButton(g_objButtonReturn)):!0==isButtonDisabled(g_objButtonMinus)&&(enableButton(g_objButtonMinus),enableButton(g_objButtonReturn))}this.init=function(b,a){g_slider=b,a&&(g_options=jQuery.extend(g_options,a))},this.appendHTML=function(b){g_objParent=b;var a="<div class='ug-slider-control ug-zoompanel ug-skin-"+g_options.slider_zoompanel_skin+"'>";a+="<div class='ug-zoompanel-button ug-zoompanel-plus'></div>",a+="<div class='ug-zoompanel-button ug-zoompanel-minus ug-zoompanel-button-disabled'></div>",a+="<div class='ug-zoompanel-button ug-zoompanel-return ug-zoompanel-button-disabled'></div>",a+="</div>",b.append(a),g_objButtonPlus=(g_objPanel=b.children(".ug-zoompanel")).children(".ug-zoompanel-plus"),g_objButtonMinus=g_objPanel.children(".ug-zoompanel-minus"),g_objButtonReturn=g_objPanel.children(".ug-zoompanel-return")},this.setObjects=function(a,b,c){g_objButtonPlus=a,g_objButtonMinus=b,g_objButtonReturn=c,g_objButtonMinus&&g_objButtonMinus.addClass("ug-zoompanel-button-disabled"),g_objButtonReturn&&g_objButtonReturn.addClass("ug-zoompanel-button-disabled")},this.getElement=function(){return g_objPanel},t.initEvents=function(){g_functions.addClassOnHover(g_objButtonPlus,"ug-button-hover"),g_functions.addClassOnHover(g_objButtonMinus,"ug-button-hover"),g_functions.addClassOnHover(g_objButtonReturn,"ug-button-hover"),g_functions.setButtonOnClick(g_objButtonPlus,function(){if(!0==isButtonDisabled(g_objButtonPlus))return!0;g_slider.zoomIn()}),g_functions.setButtonOnClick(g_objButtonMinus,function(){if(!0==isButtonDisabled(g_objButtonMinus))return!0;g_slider.zoomOut()}),g_functions.setButtonOnClick(g_objButtonReturn,function(){if(!0==isButtonDisabled(g_objButtonReturn))return!0;g_slider.zoomBack()}),jQuery(g_slider).on(g_slider.events.ZOOM_CHANGE,onZoomChange),jQuery(g_slider).on(g_slider.events.ITEM_CHANGED,onZoomChange)}}function UGBullets(){var g_objBullets,g_objParent,g_bulletWidth,t=this,g_numBullets=0,g_gallery=new UniteGalleryMain,g_activeIndex=-1,g_functions=new UGFunctions,g_temp={isInited:!1},g_options={bullets_skin:"",bullets_addclass:"",bullets_space_between:-1};function setHtmlBullets(){var html="",addHtml="";-1!=g_options.bullets_space_between&&(addHtml=" style='margin-left:"+g_options.bullets_space_between+"px'");for(var i=0;i<g_numBullets;i++)0==i?html+="<div class='ug-bullet'></div>":html+="<div class='ug-bullet'"+addHtml+"></div>";if(g_objBullets.html(html),!g_bulletWidth){var objBullet=g_objBullets.find(".ug-bullet:first-child");objBullet.length&&(g_bulletWidth=objBullet.width())}}function onBulletClick(objBullet){if(!0==t.isActive(objBullet))return!0;var index=objBullet.index();jQuery(t).trigger(t.events.BULLET_CLICK,index)}function initEvents(){var objBullets=g_objBullets.children(".ug-bullet");g_functions.setButtonOnClick(objBullets,onBulletClick),objBullets.on("mousedown mouseup",function(a){return!1})}function validateIndex(index){if(index<0||index>=g_numBullets)throw new Error("wrong bullet index: "+index)}function validateInited(){if(!0==g_temp.isInited)return!0;throw new Error("The bullets are not inited!")}this.events={BULLET_CLICK:"bullet_click"},this.init=function(a,b,c){g_gallery=a,g_numBullets=c||g_gallery.getNumItems(),g_temp.isInited=!0,""==(g_options=jQuery.extend(g_options,b)).bullets_skin&&(g_options.bullets_skin=g_options.gallery_skin)},this.getBulletsWidth=function(){return 0!=g_numBullets&&g_bulletWidth?g_numBullets*g_bulletWidth+(g_numBullets-1)*g_options.bullets_space_between:0},this.appendHTML=function(a){g_objParent=a,validateInited();var b="";""!=g_options.bullets_addclass&&(b=" "+g_options.bullets_addclass);var c="<div class='ug-slider-control ug-bullets ug-skin-"+g_options.bullets_skin+b+"'>";c+="</div>",g_objBullets=jQuery(c),a.append(g_objBullets),setHtmlBullets(),initEvents()},this.updateNumBullets=function(a){g_numBullets=a,setHtmlBullets(),initEvents()},this.getElement=function(){return g_objBullets},this.setActive=function(a){validateInited(),validateIndex(a);var b=g_objBullets.children(".ug-bullet");b.removeClass("ug-bullet-active"),jQuery(b[a]).addClass("ug-bullet-active"),g_activeIndex=a},this.isActive=function(a){if(validateIndex(a),"number"!=typeof a)var b=a;else var b=g_objBullets.children(".ug-bullet")[a];return!!b.hasClass("ug-bullet-active")},this.getNumBullets=function(){return g_numBullets}}function UGProgressBar(){var g_objBar,g_objInner,t=this,g_percent=0,g_functions=new UGFunctions,g_options={slider_progressbar_color:"#ffffff",slider_progressbar_opacity:.6,slider_progressbar_line_width:5};this.put=function(a,b){b&&(g_options=jQuery.extend(g_options,b)),a.append("<div class='ug-progress-bar'><div class='ug-progress-bar-inner'></div></div>"),(g_objInner=(g_objBar=a.children(".ug-progress-bar")).children(".ug-progress-bar-inner")).css("background-color",g_options.slider_progressbar_color),g_objBar.height(g_options.slider_progressbar_line_width),g_objInner.height(g_options.slider_progressbar_line_width),g_objInner.width("0%");var c=g_options.slider_progressbar_opacity,d=g_objInner[0];d.style.opacity=c,d.style.filter="alpha(opacity="+100*c+")"},this.putHidden=function(a,b){t.put(a,b),g_objBar.hide()},this.getElement=function(){return g_objBar},this.setSize=function(a){g_objBar.width(a),g_objInner.width(a),t.draw()},this.setPosition=function(a,b,c,d){g_functions.placeElement(g_objBar,a,b,c,d)},this.draw=function(){var a=100*g_percent;g_objInner.width(a+"%")},this.setProgress=function(a){g_percent=g_functions.normalizePercent(a),t.draw()},this.getType=function(){return"bar"}}function UGProgressPie(){var g_percent,g_objPie,t=this,g_isInited=!1,g_functions=new UGFunctions,g_options={slider_progresspie_type_fill:!1,slider_progresspie_color1:"#B5B5B5",slider_progresspie_color2:"#E5E5E5",slider_progresspie_stroke_width:6,slider_progresspie_width:30,slider_progresspie_height:30};function draw(percent){if(!percent)var percent=0;var radius=Math.min(g_options.slider_progresspie_width,g_options.slider_progresspie_height)/2,ctx=g_objPie[0].getContext("2d");!1==g_isInited&&(g_isInited=!0,ctx.rotate(1.5*Math.PI),ctx.translate(-2*radius,0)),ctx.clearRect(0,0,g_options.slider_progresspie_width,g_options.slider_progresspie_height);var centerX=g_options.slider_progresspie_width/2,centerY=g_options.slider_progresspie_height/2,startPoint=0,endPoint=percent*Math.PI*2;if(!0==g_options.slider_progresspie_type_fill)ctx.beginPath(),ctx.moveTo(centerX,centerY),ctx.arc(centerX,centerY,radius,startPoint,endPoint),ctx.lineTo(centerX,centerY),ctx.fillStyle=g_options.slider_progresspie_color1,ctx.fill(),ctx.closePath();else{ctx.globalCompositeOperation="source-over",ctx.beginPath(),ctx.moveTo(centerX,centerY),ctx.arc(centerX,centerY,radius,startPoint,endPoint),ctx.lineTo(centerX,centerY),ctx.fillStyle=g_options.slider_progresspie_color1,ctx.fill(),ctx.closePath(),ctx.globalCompositeOperation="destination-out";var radius2=radius-g_options.slider_progresspie_stroke_width;ctx.beginPath(),ctx.moveTo(centerX,centerY),ctx.arc(centerX,centerY,radius2,startPoint,endPoint),ctx.lineTo(centerX,centerY),ctx.fillStyle=g_options.slider_progresspie_color1,ctx.fill(),ctx.closePath()}!0==g_options.slider_progresspie_type_fill&&(startPoint=endPoint,endPoint=2*Math.PI,ctx.beginPath(),ctx.arc(centerX,centerY,radius,startPoint,endPoint),ctx.lineTo(centerX,centerY),ctx.fillStyle=g_options.slider_progresspie_color2,ctx.fill(),ctx.closePath())}this.put=function(a,b){b&&(g_options=jQuery.extend(g_options,b)),a.append("<canvas class='ug-canvas-pie' width='"+g_options.slider_progresspie_width+"' height='"+g_options.slider_progresspie_height+"'></canvas>"),g_objPie=a.children(".ug-canvas-pie")},this.putHidden=function(a,b){t.put(a,b),draw(.1),g_objPie.hide()},this.getElement=function(){return g_objPie},this.setPosition=function(a,b){g_functions.placeElement(g_objPie,a,b)},this.getSize=function(){return{width:g_options.slider_progresspie_width,height:g_options.slider_progresspie_height}},this.setProgress=function(a){g_percent=a=g_functions.normalizePercent(a),draw(a)},this.getType=function(){return"pie"}}function UGTouchSliderControl(){var g_objSlider,g_objInner,g_objParent,g_options,g_parent=new UGSlider,g_functions=new UGFunctions,g_options={slider_transition_continuedrag_speed:250,slider_transition_continuedrag_easing:"linear",slider_transition_return_speed:300,slider_transition_return_easing:"easeInOutQuad"},g_temp={touch_active:!1,startMouseX:0,startMouseY:0,lastMouseX:0,lastMouseY:0,startPosx:0,startTime:0,isInitDataValid:!1,slides:null,lastNumTouches:0,isDragging:!1,storedEventID:"touchSlider",videoStartX:0,isDragVideo:!1,videoObject:null};function getDiffPosFromCurrentItem(slides){if(!slides)var slides=g_parent.getSlidesReference();var inPlaceX=-g_functions.getElementSize(slides.objCurrentSlide).left,objInnerSize=g_functions.getElementSize(g_objInner),diffPos=inPlaceX-objInnerSize.left;return diffPos}function isMovementValidForChange(){var slides=g_parent.getSlidesReference(),diffPos=getDiffPosFromCurrentItem(slides),breakSize=Math.round(3*slides.objCurrentSlide.width()/8);if(Math.abs(diffPos)>=breakSize)return!0;var diffX=Math.abs(g_temp.lastMouseX-g_temp.startMouseX);return g_temp.lastMouseY,g_temp.startMouseY,!(diffX<20)&&jQuery.now()-g_temp.startTime<500}function returnToPlace(slides){if(!0==g_parent.isInnerInPlace())return!1;if(g_objParent.trigger(g_parent.events.BEFORE_RETURN),!slides)var slides=g_parent.getSlidesReference();var destX=-g_functions.getElementSize(slides.objCurrentSlide).left;g_objInner.animate({left:destX+"px"},{duration:g_options.slider_transition_return_speed,easing:g_options.slider_transition_continuedrag_easing,queue:!1,progress:function(c,d,e){if(!0==g_temp.isDragVideo){var a=g_functions.getElementSize(g_objInner).left-destX,b=g_temp.videoStartX+a;g_temp.videoObject.css("left",b)}},complete:function(){g_objParent.trigger(g_parent.events.AFTER_RETURN)}})}function changeItem(direction){g_parent.getVideoObject().hide(),g_parent.switchSlideNums(direction),g_parent.placeNabourItems()}function continueSlideDragChange(){var slides=g_parent.getSlidesReference(),diffPos=getDiffPosFromCurrentItem(slides);if(0==diffPos)return!1;var direction=diffPos>0?"left":"right",isReturn=!1;switch(direction){case"right":if(g_parent.isSlideHasItem(slides.objPrevSlide))var destX=-g_functions.getElementSize(slides.objPrevSlide).left;else isReturn=!0;break;case"left":if(g_parent.isSlideHasItem(slides.objNextSlide))var destX=-g_functions.getElementSize(slides.objNextSlide).left;else isReturn=!0}!0==isReturn?returnToPlace(slides):g_objInner.stop().animate({left:destX+"px"},{duration:g_options.slider_transition_continuedrag_speed,easing:g_options.slider_transition_continuedrag_easing,queue:!1,progress:function(){if(!0==g_temp.isDragVideo){var a=g_functions.getElementSize(g_objInner).left-g_temp.startPosx,b=g_temp.videoStartX+a;g_temp.videoObject.css("left",b)}},always:function(){changeItem(direction),g_objParent.trigger(g_parent.events.AFTER_DRAG_CHANGE)}})}function handleSliderDrag(event){var diff=g_temp.lastMouseX-g_temp.startMouseX;if(0==diff)return!0;var direction=diff<0?"left":"right",objZoomSlider=g_parent.getObjZoom();if(objZoomSlider){if(!0==objZoomSlider.isPanEnabled(event,direction))return g_temp.isInitDataValid=!1,!0;if(!1==g_temp.isInitDataValid)return storeInitTouchData(event),!0}var currentPosx=g_temp.startPosx+diff;if(diff>0&&currentPosx>0?currentPosx/=3:diff<0&&currentPosx+g_objInner.width()<g_objSlider.width()&&(currentPosx=g_temp.startPosx+diff/3),!1==g_temp.isDragging&&(g_temp.isDragging=!0,g_objParent.trigger(g_parent.events.START_DRAG)),g_objInner.css("left",currentPosx+"px"),!0==g_temp.isDragVideo){var posDiff=currentPosx-g_temp.startPosx,videoPosX=g_temp.videoStartX+posDiff;g_temp.videoObject.css("left",videoPosX)}}function storeInitTouchData(event){var mousePos=g_functions.getMousePosition(event);g_temp.startMouseX=mousePos.pageX,g_temp.startMouseY=mousePos.pageY,g_temp.lastMouseX=g_temp.startMouseX,g_temp.lastMouseY=g_temp.startMouseY,g_temp.startTime=jQuery.now();var arrTouches=g_functions.getArrTouches(event);g_temp.startArrTouches=g_functions.getArrTouchPositions(arrTouches);var objPos=g_functions.getElementSize(g_objInner);g_temp.startPosx=objPos.left,g_temp.isInitDataValid=!0,g_temp.isDragVideo=!1,g_functions.storeEventData(event,g_temp.storedEventID)}function disableTouchActive(who){g_temp.touch_active=!1}function enableTouchActive(who,event){g_temp.touch_active=!0,storeInitTouchData(event)}function onTouchStart(event){return(event.preventDefault(),g_temp.isDragging=!1,!0==g_parent.isAnimating()&&g_objInner.stop(!0,!0),g_functions.getArrTouches(event).length>1)?(!0==g_temp.touch_active&&disableTouchActive("1"),!0):!0==g_temp.touch_active||void enableTouchActive("1",event)}function onTouchMove(event){if(!1==g_temp.touch_active)return!0;if(0==event.buttons)return disableTouchActive("2"),continueSlideDragChange(),!0;g_functions.updateStoredEventData(event,g_temp.storedEventID),event.preventDefault();var mousePos=g_functions.getMousePosition(event);g_temp.lastMouseX=mousePos.pageX,g_temp.lastMouseY=mousePos.pageY;var scrollDir=null;!0==g_options.slider_vertical_scroll_ondrag&&(scrollDir=g_functions.handleScrollTop(g_temp.storedEventID)),"vert"!==scrollDir&&handleSliderDrag(event)}function onTouchEnd(event){var numTouches=g_functions.getArrTouches(event).length;if(!0==g_parent.isInnerInPlace()&& !1==g_temp.touch_active&&0==numTouches)return!0;if(0==numTouches&& !0==g_temp.touch_active){disableTouchActive("3");var isValid=!1;!1==g_functions.wasVerticalScroll(g_temp.storedEventID)&&(isValid=isMovementValidForChange()),!0==isValid?continueSlideDragChange():returnToPlace()}else 1==numTouches&& !1==g_temp.touch_active&&enableTouchActive("2",event)}function initEvents(){g_objSlider.bind("mousedown touchstart",onTouchStart),jQuery("body").bind("mousemove touchmove",onTouchMove),jQuery(window).add("body").bind("mouseup touchend",onTouchEnd)}this.isTapEventOccured=function(b){var a=g_functions.getArrTouches(b).length;if(0!=a||0!=g_temp.lastNumTouches)return g_temp.lastNumTouches=a,!1;g_temp.lastNumTouches=a,getDiffPosFromCurrentItem(g_parent.getSlidesReference());var c=Math.abs(g_temp.lastMouseX-g_temp.startMouseX),d=Math.abs(g_temp.lastMouseY-g_temp.startMouseY),e=jQuery.now(),f=e-g_temp.startTime;return c<20&&d<50&&f<500},this.init=function(a,b){g_objParent=jQuery(g_parent=a),g_objects=a.getObjects(),g_objSlider=g_objects.g_objSlider,g_objInner=g_objects.g_objInner,g_options=jQuery.extend(g_options,b),initEvents()},this.getLastMousePos=function(){return{pageX:g_temp.lastMouseX,pageY:g_temp.lastMouseY}},this.isTouchActive=function(){return g_temp.touch_active}}function UGZoomSliderControl(){var g_objSlider,g_objInner,g_objParent,g_parent=new UGSlider,g_functions=new UGFunctions,g_options={slider_zoom_step:1.2,slider_zoom_max_ratio:6,slider_zoom_return_pan_duration:400,slider_zoom_return_pan_easing:"easeOutCubic"},g_temp={isPanActive:!1,startMouseX:0,startMouseY:0,lastMouseX:0,lastMouseY:0,startImageX:0,startImageY:0,panXActive:!1,panYActive:!1,objImage:null,objImageSize:null,objParent:null,objParentSize:null,objSlide:null,storeImageLastTime:0,isZoomActive:!1,startDistance:0,startMiddlePoint:null,imageOrientPoint:null,objFitImageSize:null,isZoomedOnce:!1};function initObject(objSlider,customOptions){g_objParent=jQuery(g_parent=objSlider),g_objects=objSlider.getObjects(),g_objSlider=g_objects.g_objSlider,g_objInner=g_objects.g_objInner,g_options=jQuery.extend(g_options,customOptions),initEvents()}function getFitScaleMode(){var scaleMode=g_parent.getScaleMode();return"down"!=scaleMode&&(scaleMode="fit"),scaleMode}function storeCurrentImage(){var currentTime=jQuery.now();if(currentTime-g_temp.storeImageLastTime<20)return!1;var slides=g_parent.getSlidesReference();if(g_temp.objSlide=slides.objCurrentSlide,g_temp.objImage=slides.objCurrentSlide.find("img"),0==g_temp.objImage.length)return!1;g_temp.objImageSize=g_functions.getElementSize(g_temp.objImage),g_temp.objParent=g_temp.objImage.parent(),g_temp.objParentSize=g_functions.getElementSize(g_temp.objParent);var scaleMode=getFitScaleMode();objPadding=g_parent.getObjImagePadding(),g_temp.objFitImageSize=g_functions.getImageInsideParentDataByImage(g_temp.objImage,scaleMode,objPadding);var currentTime=jQuery.now();return g_temp.storeImageLastTime=currentTime,!0}function zoomCurrentImage(mode,mousePos){var objImage=g_parent.getSlidesReference().objCurrentSlide.find("img"),scaleMode=getFitScaleMode();g_objParent.trigger(g_parent.events.ZOOM_START);var isZoomed=!0,objPadding=g_parent.getObjImagePadding();if("back"==mode){var objOriginalSize=g_functions.getImageOriginalSize(objImage);g_functions.scaleImageFitParent(objImage,objOriginalSize.width,objOriginalSize.height,scaleMode,objPadding)}else{var zoomIn="in"==mode;isZoomed=g_functions.zoomImageInsideParent(objImage,zoomIn,g_options.slider_zoom_step,mousePos,scaleMode,g_options.slider_zoom_max_ratio,objPadding)}!0==isZoomed&&(g_objParent.trigger(g_parent.events.ZOOMING),g_objParent.trigger(g_parent.events.ZOOM_CHANGE),g_objParent.trigger(g_parent.events.ZOOM_END))}function isPanPosible(objImage,event,stictTouchesCheck){var arrTouches=g_functions.getArrTouches(event);if(!0===stictTouchesCheck){if(1!=arrTouches.length)return!1}else if(arrTouches.length>1)return!1;return!!g_functions.isElementBiggerThenParent(objImage)}function storePanInitValues(event){var mousePos=g_functions.getMousePosition(event);g_temp.startMouseX=mousePos.pageX,g_temp.startMouseY=mousePos.pageY,g_temp.lastMouseX=g_temp.startMouseX,g_temp.lastMouseY=g_temp.startMouseY,g_temp.startImageX=g_temp.objImageSize.left,g_temp.startImageY=g_temp.objImageSize.top,g_temp.panXActive=g_temp.objImageSize.width>g_temp.objParentSize.width,g_temp.panYActive=g_temp.objImageSize.height>g_temp.objParentSize.height}function startPan(event){g_temp.isPanActive=!0,storePanInitValues(event)}function panImage(event){if(void 0==g_temp.objImage||0==g_temp.objImage.length)return!0;var mousePos=g_functions.getMousePosition(event);mousePos.pageX,g_temp.startMouseX,mousePos.pageY,g_temp.startMouseY;var diffLastX=mousePos.pageX-g_temp.lastMouseX,diffLastY=mousePos.pageY-g_temp.lastMouseY,directionX=diffLastX<0?"left":"right",directionY=diffLastY<0?"up":"down";g_temp.lastMouseX=mousePos.pageX,g_temp.lastMouseY=mousePos.pageY;var posImage=g_functions.getElementSize(g_temp.objImage);!1==g_temp.panYActive?diffLastY=0:"down"==directionY&&posImage.top>0?diffLastY/=3:"up"==directionY&&posImage.bottom<g_temp.objParentSize.height&&(diffLastY/=3),!1==g_temp.panXActive|| !1==g_parent.isInnerInPlace()?diffLastX=0:"right"==directionX&&posImage.left>0?diffLastX/=3:"left"==directionX&&posImage.right<g_temp.objParentSize.width&&(diffLastX/=3);var imageX=posImage.left+diffLastX,imageY=posImage.top+diffLastY;g_functions.placeElement(g_temp.objImage,imageX,imageY)}function checkReturnAfterPan(){var isReturnX=!1,isReturnY=!1,newX=0,newY=0,objSize=g_functions.getElementSize(g_temp.objImage),objImagePadding=g_parent.getObjImagePadding(),objCenterPos=g_functions.getElementCenterPosition(g_temp.objImage,objImagePadding);g_temp.panXActive=g_temp.objImageSize.width>g_temp.objParentSize.width,g_temp.panYActive=g_temp.objImageSize.height>g_temp.objParentSize.height,!0==g_temp.panYActive?objSize.top>0?(newY=0,isReturnY=!0):objSize.bottom<g_temp.objParentSize.height&&(newY=g_temp.objParentSize.height-objSize.height,isReturnY=!0):objSize.top!=objCenterPos.top&&(isReturnY=!0,newY=objCenterPos.top),!0==g_temp.panXActive?objSize.left>0?(newX=0,isReturnX=!0):objSize.right<g_temp.objParentSize.width&&(newX=g_temp.objParentSize.width-objSize.width,isReturnX=!0):objSize.left!=objCenterPos.left&&(isReturnX=!0,newX=objCenterPos.left);var objCss={};!0==isReturnY&&(objCss.top=newY+"px"),!0==isReturnX&&(objCss.left=newX+"px"),(!0==isReturnY|| !0==isReturnX)&&g_temp.objImage.animate(objCss,{duration:g_options.slider_zoom_return_pan_duration,easing:g_options.slider_zoom_return_pan_easing,queue:!1})}function isImageAnimating(){return!!(g_temp.objImage&&g_temp.objImage.is(":animated"))}function startTouchZoom(arrTouches){g_temp.isZoomActive=!0,g_temp.startDistance=g_functions.getDistance(arrTouches[0].pageX,arrTouches[0].pageY,arrTouches[1].pageX,arrTouches[1].pageY),0==g_temp.startDistance&&(g_temp.startDistance=1),g_temp.startMiddlePoint=g_functions.getMiddlePoint(arrTouches[0].pageX,arrTouches[0].pageY,arrTouches[1].pageX,arrTouches[1].pageY),g_temp.objImageSize=g_functions.getElementSize(g_temp.objImage),g_temp.startImageX=g_temp.objImageSize.left,g_temp.startImageY=g_temp.objImageSize.top,g_temp.imageOrientPoint=g_functions.getElementLocalPoint(g_temp.startMiddlePoint,g_temp.objImage),!1==g_functions.isPointInsideElement(g_temp.imageOrientPoint,g_temp.objImageSize)&&(g_temp.imageOrientPoint=g_functions.getElementCenterPoint(g_temp.objImage)),g_objParent.trigger(g_parent.events.ZOOM_START)}function checkTouchZoomEnd(event){if(!1==g_temp.isZoomActive)return!1;2!=g_functions.getArrTouches(event).length&&(g_temp.isZoomActive=!1,g_objParent.trigger(g_parent.events.ZOOM_END))}function checkTouchZoomStart(event){if(!0==g_temp.isZoomActive)return!0;var arrTouches=g_functions.getArrTouches(event);if(2!=arrTouches.length)return!0;startTouchZoom(arrTouches)}function doTouchZoom(event){var arrTouches=g_functions.getArrTouches(event),zoomRatio=g_functions.getDistance(arrTouches[0].pageX,arrTouches[0].pageY,arrTouches[1].pageX,arrTouches[1].pageY)/g_temp.startDistance,middlePoint=g_functions.getMiddlePoint(arrTouches[0].pageX,arrTouches[0].pageY,arrTouches[1].pageX,arrTouches[1].pageY),newWidth=g_temp.objImageSize.width*zoomRatio,newHeight=g_temp.objImageSize.height*zoomRatio,objOriginalSize=g_functions.getImageOriginalSize(g_temp.objImage),expectedZoomRatio=1;if(objOriginalSize.width>0&&(expectedZoomRatio=newWidth/objOriginalSize.width),expectedZoomRatio>g_options.slider_zoom_max_ratio)return!0;panX=-(g_temp.imageOrientPoint.x*zoomRatio-g_temp.imageOrientPoint.x),panY=-(g_temp.imageOrientPoint.y*zoomRatio-g_temp.imageOrientPoint.y);var diffMiddleX=middlePoint.x-g_temp.startMiddlePoint.x,diffMiddleY=middlePoint.y-g_temp.startMiddlePoint.y,posx=g_temp.startImageX+panX+diffMiddleX,posy=g_temp.startImageY+panY+diffMiddleY;g_functions.setElementSizeAndPosition(g_temp.objImage,posx,posy,newWidth,newHeight),g_objParent.trigger(g_parent.events.ZOOMING),g_objParent.trigger(g_parent.events.ZOOM_CHANGE)}function checkReturnFromZoom(){if(void 0==g_temp.objImage||0==g_temp.objImage.length)return!0;if(g_functions.getElementSize(g_temp.objImage).width<g_temp.objFitImageSize.imageWidth){g_temp.objImage.css({position:"absolute",margin:"none"});var objCss={top:g_temp.objFitImageSize.imageTop+"px",left:g_temp.objFitImageSize.imageLeft+"px",width:g_temp.objFitImageSize.imageWidth+"px",height:g_temp.objFitImageSize.imageHeight+"px"};g_temp.objImage.animate(objCss,{duration:g_options.slider_zoom_return_pan_duration,easing:g_options.slider_zoom_return_pan_easing,queue:!1})}else checkReturnAfterPan()}function onTouchStart(event){return!1==g_parent.isCurrentSlideType("image")||(storeCurrentImage(),void 0==g_temp.objImage||0==g_temp.objImage.length||void(event.preventDefault(),!0==isImageAnimating()&&g_temp.objImage.stop(!0),!0==g_temp.isZoomActive?checkTouchZoomEnd(event):checkTouchZoomStart(event),!0==g_temp.isZoomActive?g_temp.isPanActive=!1:!0==isPanPosible(g_temp.objImage,event)&& !0==g_temp.isZoomedOnce&&startPan(event)))}function onTouchEnd(event){if(!1==g_parent.isCurrentSlideType("image"))return!0;if(!0==jQuery(event.target).data("ug-button"))return!1;if(storeCurrentImage(),void 0==g_temp.objImage||0==g_temp.objImage.length)return!0;var panWasActive=g_temp.isPanActive,zoomWasActive=g_temp.isZoomActive;if(!1==g_parent.isInnerInPlace())return g_temp.isZoomActive=!1,g_temp.isPanActive=!1,!0;if(!0==g_temp.isZoomActive?checkTouchZoomEnd(event):checkTouchZoomStart(event),!0==g_temp.isZoomActive)g_temp.isPanActive=!1;else{var panPosible=isPanPosible(g_temp.objImage,event,!0);!0==g_temp.isPanActive?g_temp.isPanActive=!1:!0==panPosible&&startPan(event)}(panWasActive||zoomWasActive)&& !1==g_temp.isZoomActive&& !1==g_temp.isPanActive&&checkReturnFromZoom()}function onTouchMove(event){if(!1==g_parent.isCurrentSlideType("image"))return!0;!0==g_temp.isZoomActive?doTouchZoom(event):!0==g_temp.isPanActive&&panImage(event)}function onSliderMouseWheel(event,delta,deltaX,deltaY){if(!1==g_options.slider_zoom_mousewheel|| !1==g_parent.isCurrentSlideType("image"))return!0;event.preventDefault();var zoomIn=delta>0,mousePos=g_functions.getMousePosition(event);zoomCurrentImage(!0==zoomIn?"in":"out",mousePos)}function initEvents(){g_objSlider.on("mousewheel",onSliderMouseWheel),g_objSlider.bind("mousedown touchstart",onTouchStart),jQuery("body").bind("mousemove touchmove",onTouchMove),jQuery(window).add("body").bind("mouseup touchend",onTouchEnd),g_objParent.bind(g_parent.events.BEFORE_RETURN,function(){checkReturnFromZoom()}),g_objParent.bind(g_parent.events.ITEM_CHANGED,function(){g_temp.isZoomedOnce=!1}),g_objParent.bind(g_parent.events.ZOOM_CHANGE,function(){g_temp.isZoomedOnce=!0})}this.________EXTERNAL_____________=function(){},this.isPanEnabled=function(a,b){if(storeCurrentImage(),void 0==g_temp.objImage||0==g_temp.objImage.length|| !1==g_temp.isZoomedOnce|| !1==isPanPosible(g_temp.objImage,a)|| !1==g_parent.isInnerInPlace())return!1;if("left"==b){if(g_temp.objImageSize.right<=g_temp.objParentSize.width)return!1}else if(g_temp.objImageSize.left>=0)return!1;return!0},this.init=function(a,b){initObject(a,b)},this.zoomIn=function(){zoomCurrentImage("in")},this.zoomOut=function(){zoomCurrentImage("out")},this.zoomBack=function(){zoomCurrentImage("back")}}function UGWistiaAPI(){this.isAPILoaded=!1;var g_intHandle,g_player,t=this,g_objThis=jQuery(this),g_isPlayerReady=!1;function isWistiaActive(){return"undefined"!=typeof Wistia}function putVideoActually(divID,videoID,width,height,isAutoplay){g_player=null,g_isPlayerReady=!1;var htmlID=divID+"_video",html="<div id='"+htmlID+"' class='wistia_embed' style='width:"+width+";height:"+height+";' data-video-width='"+width+"' data-video-height='"+height+"'>&nbsp;</div>";jQuery("#"+divID).html(html),g_player=Wistia.embed(videoID,{version:"v1",videoWidth:width,videoHeight:height,container:htmlID,autoPlay:isAutoplay}),g_isPlayerReady=!0,initEvents()}function initEvents(){g_player.bind("play",function(){g_objThis.trigger(t.events.START_PLAYING)}),g_player.bind("pause",function(){g_objThis.trigger(t.events.STOP_PLAYING)}),g_player.bind("end",function(){g_objThis.trigger(t.events.STOP_PLAYING),g_objThis.trigger(t.events.VIDEO_ENDED)})}this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(a){return!0==g_ugWistiaAPI.isAPILoaded||(isWistiaActive()?(g_ugWistiaAPI.isAPILoaded=!0,!0):void(!0!==a&&g_ugFunctions.loadJs("fast.wistia.com/assets/external/E-v1.js",!0),g_ugWistiaAPI.isAPILoaded=!0))},this.doCommand=function(a){if(null==g_player|| !1==g_isPlayerReady)return!1;switch(a){case"play":g_player.play();break;case"pause":g_player.pause()}},this.pause=function(){t.doCommand("pause")},this.play=function(){t.doCommand("play")},this.putVideo=function(a,b,c,d,e,f){if(isWistiaActive())return putVideoActually(a,b,c,d,e,f),!0;this.loadAPI(),g_intHandle=setInterval(function(){isWistiaActive()&&(putVideoActually(a,b,c,d,e,f),clearInterval(g_intHandle))},500)},this.isPlayerReady=function(){return!!g_isPlayerReady&&!!g_player}}function UGSoundCloudAPI(){this.isAPILoaded=!1;var g_player,g_lastContainerID,g_intHandle,t=this,g_objThis=jQuery(this);function isSCActive(){return"undefined"!=typeof SC}function putSoundActually(divID,trackID,width,height,isAutoplay){g_player=null,g_isPlayerReady=!1;var iframeID=divID+"_iframe",url=location.protocol+"//w.soundcloud.com/player/?url=http://api.soundcloud.com/tracks/"+trackID;url+="&amp;buying=false&amp;liking=false&amp;download=false&amp;sharing=false&amp;show_artwork=true&show_comments=false&amp;show_playcount=true&amp;show_user=false&amp;hide_related=true&amp;visual=true&amp;start_track=0&amp;callback=true",!0===isAutoplay?url+="&amp;auto_play=true":url+="&amp;auto_play=false";var html="<iframe id='"+iframeID+"' src="+url+" width='"+width+"' height='"+height+"' frameborder='0' scrolling='no' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>";jQuery("#"+divID).html(html),(g_player=SC.Widget(iframeID)).bind(SC.Widget.Events.READY,function(){g_player&&(g_isPlayerReady=!0,initEvents())}),g_lastContainerID=divID}function initEvents(){g_player.bind(SC.Widget.Events.PLAY,function(){g_objThis.trigger(t.events.START_PLAYING)}),g_player.bind(SC.Widget.Events.PAUSE,function(){g_objThis.trigger(t.events.STOP_PLAYING)}),g_player.bind(SC.Widget.Events.FINISH,function(){g_objThis.trigger(t.events.STOP_PLAYING),g_objThis.trigger(t.events.VIDEO_ENDED)})}this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(a){return!0==g_ugSoundCloudAPI.isAPILoaded||(isSCActive()?(g_ugSoundCloudAPI.isAPILoaded=!0,!0):void(!0!==a&&g_ugFunctions.loadJs("w.soundcloud.com/player/api.js",!0),g_ugSoundCloudAPI.isAPILoaded=!0))},this.putSound=function(a,b,c,d,e){if(isSCActive())return putSoundActually(a,b,c,d,e),!0;this.loadAPI(),g_intHandle=setInterval(function(){isSCActive()&&(putSoundActually(a,b,c,d,e),clearInterval(g_intHandle))},500)},this.doCommand=function(a){if(null==g_player|| !1==g_isPlayerReady)return!1;switch(a){case"play":g_player.play();break;case"pause":g_player.pause()}},this.pause=function(){t.doCommand("pause")},this.play=function(){t.doCommand("play")},this.destroy=function(){g_isPlayerReady=!1,g_player=null,g_lastContainerID&&(jQuery("#"+g_lastContainerID).html(""),g_lastContainerID=null)}}function UGHtml5MediaAPI(){this.isAPILoaded=!1;var g_player,g_intHandle,t=this,g_objThis=jQuery(this);function isMediaElementActive(){return"undefined"!=typeof mejs}function putVideoActually(divID,data,width,height,isAutoplay){g_player=null,g_isPlayerReady=!1;var urlFlash=location.protocol+"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/flashmediaelement-cdn.swf",urlSilverlight=location.protocol+"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/silverlightmediaelement.xap",htmlID=divID+"_video",htmlAutoplay="";isAutoplay&& !0===isAutoplay&&(htmlAutoplay="autoplay='autoplay'");var htmlPoster="";data.posterImage&&(htmlPoster="poster='"+data.posterImage+"'");var html="<video id='"+htmlID+"' width='"+width+"' height='"+height+"'  controls='controls' controlsList='nodownload' preload='none' "+htmlAutoplay+" "+htmlPoster+">";""!=data.mp4&&(html+="<source type='video/mp4' src='"+data.mp4+"' />"),""!=data.webm&&(html+="<source type='video/webm' src='"+data.webm+"' />"),""!=data.ogv&&(html+="<source type='video/ogg' src='"+data.ogv+"' />"),html+="<object width='"+width+"' height='"+height+"' type='application/x-shockwave-flash' data='"+urlFlash+"'>",html+="<param name='movie' value='"+urlFlash+"' />",html+="<param name='flashvars' value='controls=true&file="+data.mp4+"' />",html+="</object>",html+="</video>",jQuery("#"+divID).html(html),jQuery("#"+htmlID).on("contextmenu",function(){return!1}),new MediaElement(htmlID,{enablePluginDebug:!1,flashName:urlFlash,silverlightName:urlSilverlight,success:function(a,b){g_isPlayerReady=!0,g_player=a,!1==isAutoplay&&g_player.pause(),initEvents()},error:function(a){trace(a)}})}function initEvents(){g_ugFunctions.addEvent(g_player,"play",function(){g_objThis.trigger(t.events.START_PLAYING)}),g_ugFunctions.addEvent(g_player,"pause",function(){g_objThis.trigger(t.events.STOP_PLAYING)}),g_ugFunctions.addEvent(g_player,"ended",function(){g_objThis.trigger(t.events.STOP_PLAYING),g_objThis.trigger(t.events.VIDEO_ENDED)})}this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(a){return!0==g_ugHtml5MediaAPI.isAPILoaded||(isMediaElementActive()?(g_ugHtml5MediaAPI.isAPILoaded=!0,!0):void(!0!==a&&(g_ugFunctions.loadJs("cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/mediaelement.min.js",!0),g_ugFunctions.loadCss("cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/mediaelementplayer.min.css",!0)),g_ugHtml5MediaAPI.isAPILoaded=!0))},this.putVideo=function(a,b,c,d,e){if(isMediaElementActive())return putVideoActually(a,b,c,d,e),!0;this.loadAPI(),g_intHandle=setInterval(function(){isMediaElementActive()&&(putVideoActually(a,b,c,d,e),clearInterval(g_intHandle))},500)},this.doCommand=function(a){if(null==g_player|| !1==g_isPlayerReady)return!1;switch(a){case"play":g_player.play();break;case"pause":g_player.pause()}},this.pause=function(){t.doCommand("pause")},this.play=function(){t.doCommand("play")}}function UGVimeoAPI(){this.isAPILoaded=!1;var g_intHandle,g_lastCotnainerID,t=this,g_objThis=jQuery(this),g_player=null,g_isPlayerReady=!1,g_cueChangeAutoplay=!1;function isFroogaloopActive(){return"undefined"!=typeof Froogaloop}function putVideoActually(divID,videoID,width,height,isAutoplay){g_player=null,g_isPlayerReady=!1;var url=location.protocol+"//player.vimeo.com/video/"+videoID+"?api=1";!0===isAutoplay&&(url+="&amp;byline=0&amp;autoplay=1&amp;title=0&amp;portrait=0");var html="<iframe src="+url+" width='"+width+"' height='"+height+"' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>";jQuery("#"+divID).html(html);var iframe=jQuery("#"+divID+" iframe")[0];(g_player=Froogaloop(iframe)).addEvent("ready",function(){g_player&&(g_isPlayerReady=!0,initEvents())}),g_lastCotnainerID=divID}function initEvents(){if(!g_player)return!1;g_player.addEvent("cuechange",function(){!0==g_cueChangeAutoplay&&t.play()}),g_player.addEvent("play",function(){g_objThis.trigger(t.events.START_PLAYING)}),g_player.addEvent("pause",function(){g_objThis.trigger(t.events.STOP_PLAYING)}),g_player.addEvent("finish",function(){g_objThis.trigger(t.events.STOP_PLAYING),g_objThis.trigger(t.events.VIDEO_ENDED)})}this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(a){return!0==g_ugVimeoAPI.isAPILoaded||(isFroogaloopActive()?(g_ugVimeoAPI.isAPILoaded=!0,!0):void(!0!==a&&g_ugFunctions.loadJs("f.vimeocdn.com/js/froogaloop2.min.js",!0),g_ugVimeoAPI.isAPILoaded=!0))},this.doCommand=function(a){if(null==g_player|| !1==g_isPlayerReady)return!1;g_player.api(a)},this.pause=function(){t.doCommand("pause")},this.play=function(){t.doCommand("play")},this.destroy=function(){g_player&&(g_player.api("unload"),g_player=null,g_isPlayerReady=!1),g_lastCotnainerID&&jQuery("#"+g_lastCotnainerID).html("")},this.putVideo=function(a,b,c,d,e){if(isFroogaloopActive())return putVideoActually(a,b,c,d,e),!0;this.loadAPI(),g_intHandle=setInterval(function(){isFroogaloopActive()&&(putVideoActually(a,b,c,d,e),clearInterval(g_intHandle))},500)},this.isPlayerReady=function(){return!!g_isPlayerReady&&!!g_player},this.changeVideo=function(a,b){if(!1==t.isPlayerReady())return!1;g_cueChangeAutoplay=b,g_player.api("loadVideo",a)},this.getVideoImages=function(a,c,d){var b=location.protocol+"//vimeo.com/api/v2/video/"+a+".json";jQuery.get(b,{},function(b){var a={};a.preview=b[0].thumbnail_large,a.thumb=b[0].thumbnail_medium,d(c,a)})}}function UGYoutubeAPI(){this.isAPILoaded=!1;var g_intHandle,g_lastContainerID,t=this,g_player=null,g_isPlayerReady=!1,g_objThis=jQuery(this),g_prevState=-1,g_functions=new UGFunctions,g_options={video_youtube_showinfo:!0};function putVideoActually(divID,videoID,width,height,isAutoplay,addOptions){g_player&&g_isPlayerReady&&g_player.destroy();var playerVars={controls:1,showinfo:g_options.video_youtube_showinfo,start:0,rel:0};!0===isAutoplay&&(playerVars.autoplay=1);var start=g_functions.getVal(addOptions,"start");start&&jQuery.isNumeric(start)&&(playerVars.start=start),g_isPlayerReady=!1,g_player=new YT.Player(divID,{height:height,width:width,videoId:videoID,playerVars:playerVars,events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}}),g_lastContainerID=divID}function isYTActive(){return"undefined"!=typeof YT&& void 0!==YT.Player}function onPlayerReady(){g_isPlayerReady=!0}function onPlayerStateChange(){if("function"!=typeof g_player.getPlayerState)return trace("Youtube API error: can't get player state"),!1;var state=g_player.getPlayerState();switch(state){case YT.PlayerState.PLAYING:g_objThis.trigger(t.events.START_PLAYING);break;case YT.PlayerState.ENDED:g_objThis.trigger(t.events.STOP_PLAYING),g_objThis.trigger(t.events.VIDEO_ENDED);break;default:g_prevState==YT.PlayerState.PLAYING&&g_objThis.trigger(t.events.STOP_PLAYING)}g_prevState=state}this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.setOptions=function(a){g_options=jQuery.extend(g_options,a)},this.putVideo=function(a,b,c,d,e,f){if(isYTActive())return putVideoActually(a,b,c,d,e,f),!0;this.loadAPI(),g_intHandle=setInterval(function(){isYTActive()&&(putVideoActually(a,b,c,d,e,f),clearInterval(g_intHandle))},500)},this.loadAPI=function(a){return!0==g_ugYoutubeAPI.isAPILoaded||("undefined"!=typeof YT?(g_ugYoutubeAPI.isAPILoaded=!0,!0):void(!0!==a&&g_ugFunctions.loadJs("https://www.youtube.com/player_api",!1),g_ugYoutubeAPI.isAPILoaded=!0))},this.doCommand=function(a,b){if(!g_player)return!0;if(!1==g_isPlayerReady)return!1;switch(a){case"play":if("function"!=typeof g_player.playVideo)return!1;g_player.playVideo();break;case"pause":if("function"!=typeof g_player.pauseVideo)return!1;g_player.pauseVideo();break;case"seek":if("function"!=typeof g_player.seekTo)return!1;g_player.seekTo(b);break;case"stopToBeginning":var c=g_player.getPlayerState();switch(g_player.pauseVideo(),c){case YT.PlayerState.PLAYING:case YT.PlayerState.ENDED:case YT.PlayerState.PAUSED:g_player.seekTo(0)}}},this.play=function(){t.doCommand("play")},this.pause=function(){t.doCommand("pause")},this.destroy=function(){try{g_player&&(g_isPlayerReady=!1,g_player.clearVideo(),g_player.destroy())}catch(a){jQuery("#"+g_lastContainerID).html("")}},this.stopToBeginning=function(){t.doCommand("stopToBeginning")},this.changeVideo=function(a,b){if(!1==t.isPlayerReady())return!1;b&& !0==b?g_player.loadVideoById(a,0,"large"):g_player.cueVideoById(a,0,"large")},this.isPlayerReady=function(){return!!g_isPlayerReady&&!!g_player},this.getVideoImages=function(b){var a={};return a.preview="https://i.ytimg.com/vi/"+b+"/sddefault.jpg",a.thumb="https://i.ytimg.com/vi/"+b+"/default.jpg",a}}function UGVideoPlayer(){var g_objPlayer,g_objYoutube,g_objVimeo,g_objHtml5,g_objButtonClose,g_objSoundCloud,g_objWistia,g_galleryID,t=this,g_objThis=jQuery(this),g_functions=new UGFunctions,g_youtubeAPI=new UGYoutubeAPI,g_vimeoAPI=new UGVimeoAPI,g_html5API=new UGHtml5MediaAPI,g_soundCloudAPI=new UGSoundCloudAPI,g_wistiaAPI=new UGWistiaAPI,g_activePlayerType=null,g_options={video_enable_closebutton:!0};this.events={SHOW:"video_show",HIDE:"video_hide",PLAY_START:"video_play_start",PLAY_STOP:"video_play_stop",VIDEO_ENDED:"video_ended"};var g_temp={standAloneMode:!1,youtubeInnerID:"",vimeoPlayerID:"",html5PlayerID:"",wistiaPlayerID:"",soundCloudPlayerID:""};function onCloseButtonClick(){t.hide()}function onPlayStart(){g_objThis.trigger(t.events.PLAY_START),g_objButtonClose&&g_objButtonClose.hide()}function onPlayStop(){g_objThis.trigger(t.events.PLAY_STOP),g_objButtonClose&&g_objButtonClose.show()}function onVideoEnded(){g_objThis.trigger(t.events.VIDEO_ENDED)}function initEvents(){g_objButtonClose&&(g_functions.setButtonMobileReady(g_objButtonClose),g_functions.setButtonOnClick(g_objButtonClose,onCloseButtonClick)),jQuery(g_youtubeAPI).on(g_youtubeAPI.events.START_PLAYING,onPlayStart),jQuery(g_youtubeAPI).on(g_youtubeAPI.events.STOP_PLAYING,onPlayStop),jQuery(g_youtubeAPI).on(g_youtubeAPI.events.VIDEO_ENDED,onVideoEnded),jQuery(g_vimeoAPI).on(g_vimeoAPI.events.START_PLAYING,onPlayStart),jQuery(g_vimeoAPI).on(g_vimeoAPI.events.STOP_PLAYING,onPlayStop),jQuery(g_vimeoAPI).on(g_vimeoAPI.events.VIDEO_ENDED,onVideoEnded),jQuery(g_html5API).on(g_html5API.events.START_PLAYING,onPlayStart),jQuery(g_html5API).on(g_html5API.events.STOP_PLAYING,onPlayStop),jQuery(g_html5API).on(g_html5API.events.VIDEO_ENDED,onVideoEnded),jQuery(g_soundCloudAPI).on(g_soundCloudAPI.events.START_PLAYING,onPlayStart),jQuery(g_soundCloudAPI).on(g_soundCloudAPI.events.STOP_PLAYING,onPlayStop),jQuery(g_soundCloudAPI).on(g_soundCloudAPI.events.VIDEO_ENDED,onVideoEnded),jQuery(g_wistiaAPI).on(g_wistiaAPI.events.START_PLAYING,onPlayStart),jQuery(g_wistiaAPI).on(g_wistiaAPI.events.STOP_PLAYING,onPlayStop),jQuery(g_wistiaAPI).on(g_wistiaAPI.events.VIDEO_ENDED,onVideoEnded)}function stopAndHidePlayers(except){var arrPlayers=["youtube","vimeo","html5","soundcloud","wistia"];for(var index in arrPlayers){var player=arrPlayers[index];if(player!=except)switch(player){case"youtube":g_youtubeAPI.pause(),g_youtubeAPI.destroy(),g_objYoutube.hide();break;case"vimeo":g_vimeoAPI.pause(),g_vimeoAPI.destroy(),g_objVimeo.hide();break;case"html5":g_html5API.pause(),g_objHtml5.hide();break;case"soundcloud":g_soundCloudAPI.pause(),g_soundCloudAPI.destroy(),g_objSoundCloud.hide();break;case"wistia":g_wistiaAPI.pause(),g_objWistia.hide()}}}this.init=function(b,a,c){if(!(g_galleryID=c))throw new Error("missing gallery ID for video player, it's a must!");g_options=jQuery.extend(g_options,b),g_youtubeAPI.setOptions(g_options),a&& !0==a&&(g_temp.standAloneMode=!0)},this.setHtml=function(b){g_temp.youtubeInnerID=g_galleryID+"_youtube_inner",g_temp.vimeoPlayerID=g_galleryID+"_videoplayer_vimeo",g_temp.html5PlayerID=g_galleryID+"_videoplayer_html5",g_temp.wistiaPlayerID=g_galleryID+"_videoplayer_wistia",g_temp.soundCloudPlayerID=g_galleryID+"_videoplayer_soundcloud";var a="<div class='ug-videoplayer' style='display:none'>";a+="<div class='ug-videoplayer-wrapper ug-videoplayer-youtube' style='display:none'><div id='"+g_temp.youtubeInnerID+"'></div></div>",a+="<div id='"+g_temp.vimeoPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-vimeo' style='display:none'></div>",a+="<div id='"+g_temp.html5PlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-html5'></div>",a+="<div id='"+g_temp.soundCloudPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-soundcloud'></div>",a+="<div id='"+g_temp.wistiaPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-wistia'></div>",!1==g_temp.standAloneMode&& !0==g_options.video_enable_closebutton&&(a+="<div class='ug-videoplayer-button-close'></div>"),a+="</div>",b.append(a),g_objPlayer=b.children(".ug-videoplayer"),g_objYoutube=g_objPlayer.children(".ug-videoplayer-youtube"),g_objVimeo=g_objPlayer.children(".ug-videoplayer-vimeo"),g_objHtml5=g_objPlayer.children(".ug-videoplayer-html5"),g_objSoundCloud=g_objPlayer.children(".ug-videoplayer-soundcloud"),g_objWistia=g_objPlayer.children(".ug-videoplayer-wistia"),!1==g_temp.standAloneMode&& !0==g_options.video_enable_closebutton&&(g_objButtonClose=g_objPlayer.children(".ug-videoplayer-button-close"))},this.destroy=function(){g_objButtonClose&&(g_objButtonClose.off("click"),g_objButtonClose.off("touchend")),jQuery(g_youtubeAPI).off(g_youtubeAPI.events.START_PLAYING),jQuery(g_youtubeAPI).off(g_youtubeAPI.events.STOP_PLAYING),jQuery(g_vimeoAPI).off(g_vimeoAPI.events.START_PLAYING),jQuery(g_vimeoAPI).off(g_vimeoAPI.events.STOP_PLAYING),jQuery(g_html5API).off(g_html5API.events.START_PLAYING),jQuery(g_html5API).off(g_html5API.events.STOP_PLAYING),jQuery(g_soundCloudAPI).off(g_soundCloudAPI.events.START_PLAYING,onPlayStart),jQuery(g_soundCloudAPI).off(g_soundCloudAPI.events.STOP_PLAYING,onPlayStop),jQuery(g_wistiaAPI).off(g_wistiaAPI.events.START_PLAYING,onPlayStart),jQuery(g_wistiaAPI).off(g_wistiaAPI.events.STOP_PLAYING,onPlayStop),g_activePlayerType=null},this.initEvents=function(){initEvents()},this.setSize=function(a,b){g_functions.setElementSize(g_objPlayer,a,b),g_objButtonClose&&g_functions.placeElement(g_objButtonClose,"right","top")},this.setPosition=function(a,b){g_functions.placeElement(g_objPlayer,a,b)},this.getObject=function(){return g_objPlayer},this.show=function(){if(!0==t.isVisible())return!0;g_objPlayer.show(),g_objPlayer.fadeTo(0,1),g_objButtonClose&&g_objButtonClose.show(),g_objThis.trigger(t.events.SHOW)},this.hide=function(){if(!1==t.isVisible())return!0;stopAndHidePlayers(),g_activePlayerType=null,g_objPlayer.hide(),g_objThis.trigger(t.events.HIDE)},this.getActiveAPI=function(){switch(g_activePlayerType){case"youtube":return g_youtubeAPI;case"vimeo":return g_vimeoAPI;case"wistia":return g_wistiaAPI;case"soundcloud":return g_soundCloudAPI;case"html5":return g_html5API;default:return null}},this.pause=function(){var a=t.getActiveAPI();if(null==a)return!1;"function"==typeof a.pause&&a.pause()},this.isVisible=function(){return g_objPlayer.is(":visible")},this.playYoutube=function(c,a,b){if(void 0===a)var a=!0;if(!b)var b=null;stopAndHidePlayers("youtube"),g_objYoutube.show(),0==g_objYoutube.children("#"+g_temp.youtubeInnerID).length&&g_objYoutube.append("<div id='"+g_temp.youtubeInnerID+"'></div>");var d={};b&&(d.start=b),!0==g_youtubeAPI.isPlayerReady()&& !0==g_temp.standAloneMode?g_youtubeAPI.changeVideo(c,a):g_youtubeAPI.putVideo(g_temp.youtubeInnerID,c,"100%","100%",a,d),g_activePlayerType="youtube"},this.playVimeo=function(b,a){if(void 0===a)var a=!0;stopAndHidePlayers("vimeo"),g_objVimeo.show(),g_vimeoAPI.putVideo(g_temp.vimeoPlayerID,b,"100%","100%",a),g_activePlayerType="vimeo"},this.playHtml5Video=function(b,c,d,e,a){if(void 0===a)var a=!0;stopAndHidePlayers("html5"),g_objHtml5.show();var f={ogv:b,webm:c,mp4:d,posterImage:e};g_html5API.putVideo(g_temp.html5PlayerID,f,"100%","100%",a),g_activePlayerType="html5"},this.playSoundCloud=function(b,a){if(void 0===a)var a=!0;stopAndHidePlayers("soundcloud"),g_objSoundCloud.show(),g_soundCloudAPI.putSound(g_temp.soundCloudPlayerID,b,"100%","100%",a),g_activePlayerType="soundcloud"},this.playWistia=function(b,a){if(void 0===a)var a=!0;stopAndHidePlayers("wistia"),g_objWistia.show(),g_wistiaAPI.putVideo(g_temp.wistiaPlayerID,b,"100%","100%",a),g_activePlayerType="wistia"}}var g_ugYoutubeAPI=new UGYoutubeAPI,g_ugVimeoAPI=new UGVimeoAPI,g_ugHtml5MediaAPI=new UGHtml5MediaAPI,g_ugSoundCloudAPI=new UGSoundCloudAPI,g_ugWistiaAPI=new UGWistiaAPI;function ugCheckForMinJQueryVersion(){if(!1==g_ugFunctions.checkMinJqueryVersion("1.8.0"))throw new Error("The gallery can run from jquery 1.8 You have jQuery "+jQuery.fn.jquery+" Please update your jQuery library.")}function ugCheckForErrors(galleryID,type){function checkForJqueryPresents(){if("undefined"==typeof jQuery)throw new Error("jQuery library not included")}function checkForDoubleJQuery(){if("function"==typeof jQuery.fn.unitegallery)return!0;var errorMessage="You have some jquery.js library include that comes after the gallery files js include.";throw errorMessage+="<br> This include eliminates the gallery libraries, and make it not work.","cms"==type?(errorMessage+="<br><br> To fix it you can:<br>&nbsp;&nbsp;&nbsp; 1. In the Gallery Settings -> Troubleshooting set option:  <strong><b>Put JS Includes To Body</b></strong> option to true.",errorMessage+="<br>&nbsp;&nbsp;&nbsp; 2. Find the double jquery.js include and remove it."):errorMessage+="<br><br> Please find and remove this jquery.js include and the gallery will work. <br> * There should be only one jquery.js include before all other js includes in the page.",new Error(errorMessage)}try{"jquery"==type?(checkForJqueryPresents(),ugCheckForMinJQueryVersion()):(ugCheckForMinJQueryVersion(),checkForDoubleJQuery())}catch(objError){var message=objError.message;if(message="<div style='font-size:16px;color:#BC0C06;max-width:900px;border:1px solid red;padding:10px;'>"+(message="Unite Gallery Error: "+message)+"</div>","jquery"==type){var objGallery=document.getElementById(galleryID);objGallery.innerHTML=message,objGallery.style.display="block"}else jQuery(galleryID).show().html(message);return!1}return!0}function UniteGalleryMain(){var g_galleryID,g_objWrapper,g_objParent,g_objThumbs,g_objSlider,g_objLightbox,g_objTabs,g_objLoadMore,g_numItems,g_objTheme,t=this,g_objGallery=jQuery(t),g_functions=new UGFunctions,g_arrItems=[],g_selectedItem=null,g_selectedItemIndex=-1,g_objCache={};this.events={ITEM_CHANGE:"item_change",SIZE_CHANGE:"size_change",ENTER_FULLSCREEN:"enter_fullscreen",EXIT_FULLSCREEN:"exit_fullscreen",START_PLAY:"start_play",STOP_PLAY:"stop_play",PAUSE_PLAYING:"pause_playing",CONTINUE_PLAYING:"continue_playing",SLIDER_ACTION_START:"slider_action_start",SLIDER_ACTION_END:"slider_action_end",ITEM_IMAGE_UPDATED:"item_image_updated",GALLERY_KEYPRESS:"gallery_keypress",GALLERY_BEFORE_REQUEST_ITEMS:"gallery_before_request_items",OPEN_LIGHTBOX:"open_lightbox",CLOSE_LIGHTBOX:"close_lightbox"};var g_options={gallery_width:900,gallery_height:500,gallery_min_width:150,gallery_min_height:100,gallery_theme:"default",gallery_skin:"default",gallery_images_preload_type:"minimal",gallery_autoplay:!1,gallery_play_interval:3e3,gallery_pause_on_mouseover:!0,gallery_mousewheel_role:"zoom",gallery_control_keyboard:!0,gallery_carousel:!0,gallery_preserve_ratio:!0,gallery_background_color:"",gallery_debug_errors:!1,gallery_shuffle:!1,gallery_urlajax:null,gallery_enable_tabs:!1,gallery_enable_loadmore:!1,gallery_enable_cache:!0,gallery_initial_catid:"",load_api_externally:!1},g_temp={objCustomOptions:{},isAllItemsPreloaded:!1,isFreestyleMode:!1,lastWidth:0,lastHeigh:0,handleResize:null,isInited:!1,isPlayMode:!1,isPlayModePaused:!1,playTimePassed:0,playTimeLastStep:0,playHandle:"",playStepInterval:33,objProgress:null,isFakeFullscreen:!1,thumbsType:null,isYoutubePresent:!1,isVimeoPresent:!1,isHtml5VideoPresent:!1,isSoundCloudPresent:!1,isWistiaPresent:!1,resizeDelay:100,isRunFirstTime:!0,originalOptions:{},funcCustomHeight:null};function __________INIT_GALLERY_______(){}function getThemeFunction(themeName){var themeFunction=themeName;return -1==themeFunction.indexOf("UGTheme_")&&(themeFunction="UGTheme_"+themeFunction),themeFunction}function initTheme(objCustomOptions){if(objCustomOptions.hasOwnProperty("gallery_theme"))g_options.gallery_theme=objCustomOptions.gallery_theme;else{var defaultTheme=g_options.gallery_theme;!1==g_ugFunctions.isThemeRegistered(defaultTheme)&&(g_options.gallery_theme=g_ugFunctions.getFirstRegisteredTheme())}var themeFunction=getThemeFunction(g_options.gallery_theme);try{g_options.gallery_theme=eval(themeFunction)}catch(e){}g_options.gallery_theme=eval(themeFunction),(g_objTheme=new g_options.gallery_theme).init(t,objCustomOptions)}function resetOptions(){g_options=jQuery.extend({},g_temp.originalOptions),g_selectedItemIndex=-1,g_selectedItem=null,g_objSlider=void 0,g_objThumbs=void 0,g_objLightbox=void 0}function checkForStartupErrors(){try{ugCheckForMinJQueryVersion()}catch(e){throwErrorShowMessage(e.message)}"object"==typeof g_objWrapper.outerWidth()&&throwErrorShowMessage("You have some buggy script. most chances jquery-ui.js that destroy jquery outerWidth, outerHeight functions. The gallery can't run. Please update jquery-ui.js to latest version."),setTimeout(function(){ugCheckForErrors(g_galleryID,"cms")},5e3)}function runGallery(galleryID,objCustomOptions,htmlItems,cacheID){var isCustomOptions="object"==typeof objCustomOptions;if(isCustomOptions&&(g_temp.objCustomOptions=objCustomOptions),!0==g_temp.isRunFirstTime){if(0==(g_objWrapper=jQuery(g_galleryID=galleryID)).length)return trace("div with id: "+g_galleryID+" not found"),!1;g_objParent=g_objWrapper.parent(),checkForStartupErrors(),g_temp.originalOptions=jQuery.extend({},g_options),isCustomOptions&&(g_options=jQuery.extend(g_options,objCustomOptions)),!0==g_options.gallery_enable_cache&&g_options.gallery_initial_catid&&cacheItems(g_options.gallery_initial_catid),t.setSizeClass();var objItems=g_objWrapper.children();fillItemsArray(objItems),loadAPIs(),g_objWrapper.find("img").fadeTo(0,0).hide(),g_objWrapper.show(),clearInitData()}else if(t.destroy(),resetOptions(),g_options=jQuery.extend(g_options,g_temp.objCustomOptions),htmlItems){if(cacheID&& !0==g_options.gallery_enable_cache&&cacheItems(cacheID,htmlItems),"noitems"==htmlItems)return showErrorMessage("No items in this category",""),!1;g_objWrapper.html(htmlItems);var objItems=g_objWrapper.children();fillItemsArray(objItems),loadAPIs(),g_objWrapper.children().fadeTo(0,0).hide(),g_objWrapper.show(),clearInitData()}!0==g_temp.isRunFirstTime&& !0==g_options.gallery_enable_tabs&&(g_objTabs=new UGTabs).init(t,g_options),!0==g_temp.isRunFirstTime&& !0==g_options.gallery_enable_loadmore&&(g_objLoadMore=new UGLoadMore).init(t,g_options),isCustomOptions&&modifyInitParams(g_temp.objCustomOptions),validateParams(),!0==g_options.gallery_shuffle&&t.shuffleItems(),initTheme(g_temp.objCustomOptions),setGalleryHtml(),setHtmlObjectsProperties(),0==g_objWrapper.width()?g_functions.waitForWidth(g_objWrapper,runGalleryActually):runGalleryActually()}function runGalleryActually(){t.setSizeClass(),!1==g_temp.isFreestyleMode&& !0==g_options.gallery_preserve_ratio&&setHeightByOriginalRatio(),g_objTheme.run(),g_objTabs&&g_temp.isRunFirstTime&&g_objTabs.run(),preloadBigImages(),initEvents(),g_numItems>0&&t.selectItem(0),!0==g_options.gallery_autoplay&&t.startPlayMode(),g_temp.isRunFirstTime=!1}function showErrorMessage(message,prefix){if(void 0===prefix)var prefix="<b>Unite Gallery Error: </b>";else prefix="<b>"+prefix+": </b>";var html="<div class='ug-error-message-wrapper'><div class='ug-error-message'>"+(message=prefix+message)+"</div></div>";g_objWrapper.children().remove(),g_objWrapper.html(html),g_objWrapper.show()}function throwErrorShowMessage(message){throw showErrorMessage(message),new Error(message)}function modifyInitParams(){g_options.gallery_images_preload_type||(g_options.gallery_images_preload_type="minimal"),(void 0==g_options.gallery_min_height||g_options.gallery_height<g_options.gallery_min_height)&&(g_options.gallery_min_height=0),(void 0==g_options.gallery_min_width||g_options.gallery_width<g_options.gallery_min_width)&&(g_options.gallery_min_width=0)}function validateParams(){if(!g_options.gallery_theme)throw new Error("The gallery can't run without theme");if(jQuery.isNumeric(g_options.gallery_height)&&g_options.gallery_height<g_options.gallery_min_height)throw new Error("The <b>gallery_height</b> option must be bigger then <b>gallery_min_height option</b>");if(g_options.gallery_width<g_options.gallery_min_width)throw new Error("The <b>gallery_width</b> option must be bigger then <b>gallery_min_width option</b>")}function setGalleryHtml(){g_objWrapper.addClass("ug-gallery-wrapper"),g_objWrapper.append("<div class='ug-overlay-disabled' style='display:none'></div>"),t.setSizeClass()}function clearInitData(){g_objWrapper.children().remove()}function storeLastSize(){var objSize=t.getSize();g_temp.lastWidth=objSize.width,g_temp.lastHeight=objSize.height}function setHeightByOriginalRatio(){var objSize=t.getSize();if(objSize.width/objSize.height!=objSize.orig_ratio){var newHeight=objSize.width/objSize.orig_ratio;(newHeight=Math.round(newHeight))<g_options.gallery_min_height&&(newHeight=g_options.gallery_min_height),g_objWrapper.height(newHeight)}}function setHtmlObjectsProperties(){var objCss={"max-width":g_functions.getCssSizeParam(g_options.gallery_width),"min-width":g_functions.getCssSizeParam(g_options.gallery_min_width)};if(!1==g_temp.isFreestyleMode){var galleryHeight=g_functions.getCssSizeParam(g_options.gallery_height);objCss.height=galleryHeight}else objCss.overflow="visible";g_options.gallery_background_color&&(objCss["background-color"]=g_options.gallery_background_color),g_objWrapper.css(objCss)}function fillItemByChild(objChild){var isMobile=t.isMobileMode(),tagname=objChild.prop("tagName").toLowerCase();if("noscript"==tagname)return null;if("picture"==tagname){var objImage=objChild.find("img");if(0==objImage.length)return null;objChild=objImage,tagname="img"}var srcLazy=objChild.data("lazy-src");srcLazy&&objChild.attr("src",srcLazy);var itemLink="";if("a"==tagname){itemLink=objChild.attr("href");var objChildren=objChild.children();if(0==(objChild=objChild.find("img")).length)return null;tagname="img"}var itemType=objChild.data("type");void 0==itemType&&(itemType="image");var objItem={};if(objItem.type=itemType,"img"==tagname){var lasyLoadSrc=objChild.data("lazyload-src");if(!lasyLoadSrc)var lasyLoadSrc=objChild.data("lazy-src");lasyLoadSrc&&""!=lasyLoadSrc&&(objChild.attr("src",lasyLoadSrc),jQuery.removeData(objChild,"lazyload-src"));var urlImage=objChild.data("image"),urlThumb=objChild.data("thumb"),titleFromData=objChild.data("title");void 0===urlImage&&(urlImage=null),void 0===urlThumb&&(urlThumb=null);var imageSrc=objChild.attr("src");urlImage||(urlImage=imageSrc),urlThumb||(urlThumb=imageSrc),urlThumb||(urlThumb=urlImage),urlImage||(urlImage=urlThumb),objItem.urlThumb=urlThumb,objItem.urlImage=urlImage,objItem.title=objChild.attr("alt"),titleFromData&&(objItem.title=titleFromData),objItem.objThumbImage=objChild,objItem.objThumbImage.attr("src",objItem.urlThumb)}else{if("image"==itemType)throw trace("Problematic gallery item found:"),trace(objChild),trace("Please look for some third party js script that could add this item to the gallery"),new Error("The item should not be image type");objItem.urlThumb=objChild.data("thumb"),objItem.title=objChild.data("title"),objItem.objThumbImage=null,objItem.urlImage=objChild.data("image")}if(!0==isMobile){var urlThumbMobile=objChild.data("thumb-mobile");void 0!==urlThumbMobile&&""!=urlThumbMobile&&(objItem.urlThumb=urlThumbMobile,"img"==tagname&&objChild.attr("src",objItem.urlThumb));var urlImageMobile=objChild.data("image-mobile");void 0!==urlImageMobile&&""!=urlImageMobile&&(objItem.urlImage=urlImageMobile)}objItem.link=itemLink,objItem.description=objChild.attr("title"),objItem.description||(objItem.description=objChild.data("description")),objItem.description||(objItem.description=""),objItem.isNewAdded=!1,objItem.isLoaded=!1,objItem.isThumbImageLoaded=!1,objItem.objPreloadImage=null,objItem.isBigImageLoadStarted=!1,objItem.isBigImageLoaded=!1,objItem.isBigImageLoadError=!1,objItem.imageWidth=0,objItem.imageHeight=0,objItem.thumbWidth=0,objItem.thumbHeight=0,objItem.thumbRatioByWidth=0,objItem.thumbRatioByHeight=0;var dataWidth=objChild.data("width"),dataHeight=objChild.data("height");dataWidth&&"number"==typeof dataWidth&&dataHeight&&"number"==typeof dataHeight&&(objItem.thumbWidth=dataWidth,objItem.thumbHeight=dataHeight,objItem.thumbRatioByWidth=dataWidth/dataHeight,objItem.thumbRatioByHeight=dataHeight/dataWidth),objItem.addHtml=null;var isImageMissing=void 0==objItem.urlImage||""==objItem.urlImage,isThumbMissing=void 0==objItem.urlThumb||""==objItem.urlThumb;switch(objItem.type){case"youtube":if(objItem.videoid=objChild.data("videoid"),objItem.video_start=objChild.data("start"),isImageMissing||isThumbMissing){var objImages=g_ugYoutubeAPI.getVideoImages(objItem.videoid);isImageMissing&&(objItem.urlImage=objImages.preview),isThumbMissing&&(objItem.urlThumb=objImages.thumb,"img"==tagname&&objChild.attr("src",objItem.urlThumb))}g_temp.isYoutubePresent=!0;break;case"vimeo":objItem.videoid=objChild.data("videoid"),g_temp.isVimeoPresent=!0;break;case"html5video":objItem.videoogv=objChild.data("videoogv"),objItem.videowebm=objChild.data("videowebm"),objItem.videomp4=objChild.data("videomp4"),g_temp.isHtml5VideoPresent=!0;break;case"soundcloud":objItem.trackid=objChild.data("trackid"),g_temp.isSoundCloudPresent=!0;break;case"wistia":objItem.videoid=objChild.data("videoid"),g_temp.isWistiaPresent=!0;break;case"custom":var objChildImage=objChild.children("img");objChildImage.length&&(objChildImage=jQuery(objChildImage[0]),objItem.urlThumb=objChildImage.attr("src"),objItem.title=objChildImage.attr("alt"),objItem.objThumbImage=objChildImage);var objChildren=objChild.children().not("img:first-child");objChildren.length&&(objItem.addHtml=objChildren.clone())}return objItem.objThumbImage&&(objItem.objThumbImage.removeAttr("data-description",""),objItem.objThumbImage.removeAttr("data-image",""),objItem.objThumbImage.removeAttr("data-thumb",""),objItem.objThumbImage.removeAttr("title","")),objItem}function fillItemsArray(arrChildren,isAppend){if(!0!==isAppend)g_arrItems=[];else for(var i=0;i<g_numItems;i++)g_arrItems[i].isNewAdded=!1;for(var i=0;i<arrChildren.length;i++){var objChild=jQuery(arrChildren[i]),objItem=fillItemByChild(objChild);if(null===objItem){objChild.remove();continue}numIndex=g_arrItems.length,objItem.index=numIndex,!0===isAppend&&(objItem.isNewAdded=!0),g_arrItems.push(objItem)}g_numItems=g_arrItems.length}function loadAPIs(){var isLoadExternally=g_options.load_api_externally;g_temp.isYoutubePresent&&g_ugYoutubeAPI.loadAPI(isLoadExternally),g_temp.isVimeoPresent&&g_ugVimeoAPI.loadAPI(isLoadExternally),g_temp.isHtml5VideoPresent&&g_ugHtml5MediaAPI.loadAPI(isLoadExternally),g_temp.isSoundCloudPresent&&g_ugSoundCloudAPI.loadAPI(isLoadExternally),g_temp.isWistiaPresent&&g_ugWistiaAPI.loadAPI(isLoadExternally)}function preloadBigImages(){if("visible"!=g_options.gallery_images_preload_type||g_objThumbs||(g_options.gallery_images_preload_type="minimal"),!0==g_temp.isAllItemsPreloaded)return!0;switch(g_options.gallery_images_preload_type){default:case"minimal":break;case"all":jQuery(g_arrItems).each(function(){preloadItemImage(this)});break;case"visible":jQuery(g_arrItems).each(function(){var a=this;!0==g_objThumbs.isItemThumbVisible(a)&&preloadItemImage(a)})}}function checkPreloadItemImage(objItem){if(!0==objItem.isBigImageLoadStarted|| !0==objItem.isBigImageLoaded|| !0==objItem.isBigImageLoadError)return!1;switch(g_options.gallery_images_preload_type){default:case"minimal":break;case"all":preloadItemImage(objItem);break;case"visible":!0==g_objThumbs.isItemThumbVisible(objItem)&&preloadItemImage(objItem)}}function preloadItemImage(objItem){if(!0==objItem.isBigImageLoadStarted|| !0==objItem.isBigImageLoaded|| !0==objItem.isBigImageLoadError)return!0;var imageUrl=objItem.urlImage;if(""==imageUrl|| void 0==imageUrl)return objItem.isBigImageLoadError=!0,!1;objItem.isBigImageLoadStarted=!0,objItem.objPreloadImage=jQuery("<img/>").attr("src",imageUrl),objItem.objPreloadImage.data("itemIndex",objItem.index),objItem.objPreloadImage.on("load",t.onItemBigImageLoaded),objItem.objPreloadImage.on("error",function(){var b=jQuery(this).data("itemIndex"),a=g_arrItems[b];a.isBigImageLoadError=!0,a.isBigImageLoaded=!1;var c=jQuery(this).attr("src");console.log("Can't load image: "+c),g_objGallery.trigger(t.events.ITEM_IMAGE_UPDATED,[b,a.urlImage]),a.objThumbImage.attr("src",a.urlThumb)}),checkAllItemsStartedPreloading()}function preloadNearBigImages(objItem){if(!0==g_temp.isAllItemsPreloaded)return!1;if(!objItem)var objItem=g_selectedItem;if(!objItem)return!0;var currentIndex=objItem.index,lastItemIndex=currentIndex-1,nextItemIndex=currentIndex+1;lastItemIndex>0&&preloadItemImage(g_arrItems[lastItemIndex]),nextItemIndex<g_numItems&&preloadItemImage(g_arrItems[nextItemIndex])}function checkAllItemsStartedPreloading(){if(!0==g_temp.isAllItemsPreloaded)return!1;for(var index in g_arrItems)if(!1==g_arrItems[index].isBigImageLoadStarted)return!1;g_temp.isAllItemsPreloaded=!0}function __________END_INIT_GALLERY_______(){}function __________EVENTS_____________(){}function onSliderMouseEnter(event){!0==g_options.gallery_pause_on_mouseover&& !1==t.isFullScreen()&& !0==g_temp.isPlayMode&&g_objSlider&& !1==g_objSlider.isSlideActionActive()&&t.pausePlaying()}function onSliderMouseLeave(event){!0==g_options.gallery_pause_on_mouseover&& !0==g_temp.isPlayMode&&g_objSlider&& !1==g_objSlider.isSlideActionActive()&& !1==g_objSlider.isCurrentSlideLoadingImage()&&t.continuePlaying()}function isThisGalleryForKeyAction(){if(!window.ugArrGalleriesObjects||(window.ugArrGalleriesObjects.length,1==window.ugArrGalleriesObjects.length))return!0;var currentScore,maxScore=0,currentGalleryID=t.getGalleryID();return jQuery.each(window.ugArrGalleriesObjects,function(d,b){var c=b.getGalleryID(),a=b.getKeyPressScore();a>maxScore&&(maxScore=a),c==currentGalleryID&&(currentScore=a)}),currentScore==maxScore}function onKeyPress(event){var obj=jQuery(event.target);if(obj.is("textarea")||obj.is("select")||obj.is("input"))return!0;var keyCode=event.charCode?event.charCode:event.keyCode?event.keyCode:event.which?event.which:0,wasAction=!1;switch(keyCode){case 39:var isGalleryForKeyAction=isThisGalleryForKeyAction();!0==isGalleryForKeyAction&&(t.nextItem(),wasAction=!0);break;case 37:var isGalleryForKeyAction=isThisGalleryForKeyAction();!0==isGalleryForKeyAction&&(t.prevItem(),wasAction=!0);break;default:wasAction=!1}!0==wasAction&&(event.preventDefault(),event.stopPropagation(),event.stopImmediatePropagation()),g_objGallery.trigger(t.events.GALLERY_KEYPRESS,[keyCode,event])}function onGalleryResized(){var objSize=t.getSize();if(0==objSize.width)return!0;t.setSizeClass();var objSize=t.getSize();if(objSize.width!=g_temp.lastWidth|| !1==g_temp.isFreestyleMode&&objSize.height!=g_temp.lastHeight){var heightWasSet=!1;if(g_temp.funcCustomHeight){var newHeight=g_temp.funcCustomHeight(objSize);newHeight&&(g_objWrapper.height(newHeight),heightWasSet=!0)}!1==heightWasSet&& !0==g_options.gallery_preserve_ratio&& !1==g_temp.isFreestyleMode&&setHeightByOriginalRatio(),storeLastSize(),g_objGallery.trigger(t.events.SIZE_CHANGE)}}function onThumbsChange(event){"visible"==g_options.gallery_images_preload_type&& !1==g_temp.isAllItemsPreloaded&&preloadBigImages()}function onFullScreenChange(){var isFullscreen=g_functions.isFullScreen(),event=isFullscreen?t.events.ENTER_FULLSCREEN:t.events.EXIT_FULLSCREEN;if(g_galleryID!==g_functions.getGlobalData("fullscreenID"))return!0;isFullscreen?g_objWrapper.addClass("ug-fullscreen"):g_objWrapper.removeClass("ug-fullscreen"),g_objGallery.trigger(event),onGalleryResized()}function onItemImageUpdated(event,index){var objItem=t.getItem(index);checkPreloadItemImage(objItem)}function onCurrentSlideImageLoadEnd(){!0==t.isPlayMode()&&t.continuePlaying()}function initEvents(){if(g_objWrapper.on("dragstart",function(a){a.preventDefault()}),g_objGallery.on(t.events.ITEM_IMAGE_UPDATED,onItemImageUpdated),g_objThumbs)switch(g_temp.thumbsType){case"strip":jQuery(g_objThumbs).on(g_objThumbs.events.STRIP_MOVE,onThumbsChange);break;case"grid":jQuery(g_objThumbs).on(g_objThumbs.events.PANE_CHANGE,onThumbsChange)}"advance"==g_options.gallery_mousewheel_role&& !1==g_temp.isFreestyleMode&&g_objWrapper.on("mousewheel",t.onGalleryMouseWheel),storeLastSize(),jQuery(window).resize(function(){g_objWrapper.css("width","auto"),g_functions.whenContiniousEventOver("gallery_resize",onGalleryResized,g_temp.resizeDelay)}),setTimeout(function(){setInterval(onGalleryResized,2e3)},1e4),g_functions.addFullScreenChangeEvent(onFullScreenChange),g_objSlider&&(jQuery(g_objSlider).on(g_objSlider.events.ITEM_CHANGED,function(){var a=g_objSlider.getCurrentItemIndex();-1!=a&&t.selectItem(a)}),!0==g_options.gallery_pause_on_mouseover&&(g_objSlider.getElement().hover(onSliderMouseEnter,onSliderMouseLeave),g_objGallery.on(t.events.ENTER_FULLSCREEN,function(){onSliderMouseLeave()})),retriggerEvent(g_objSlider,g_objSlider.events.ACTION_START,t.events.SLIDER_ACTION_START),retriggerEvent(g_objSlider,g_objSlider.events.ACTION_END,t.events.SLIDER_ACTION_END),jQuery(g_objSlider).on(g_objSlider.events.CURRENTSLIDE_LOAD_END,onCurrentSlideImageLoadEnd)),!0==g_options.gallery_control_keyboard&&jQuery(document).keydown(onKeyPress)}function __________GENERAL_______(){}function cacheItems(cacheID,htmlItemsArg){if(htmlItemsArg){var htmlItems=htmlItemsArg;"noitems"!=htmlItems&&(htmlItems=jQuery(htmlItemsArg).clone())}else var htmlItems=g_objWrapper.children().clone();g_objCache[cacheID]=htmlItems}function removeAllSizeClasses(objWrapper){objWrapper||(objWrapper=g_objWrapper),objWrapper.removeClass("ug-under-480"),objWrapper.removeClass("ug-under-780"),objWrapper.removeClass("ug-under-960")}function retriggerEvent(object,originalEvent,newEvent){jQuery(object).on(originalEvent,function(a){g_objGallery.trigger(newEvent,[this])})}function advanceNextStep(){var timeNow=jQuery.now(),timeDiff=timeNow-g_temp.playTimeLastStep;g_temp.playTimeLastStep=timeNow;var isVisible=t.isGalleryVisible();if(!1==isVisible)return!1;if(g_temp.playTimePassed+=timeDiff,g_temp.objProgress){var percent=g_temp.playTimePassed/g_options.gallery_play_interval;g_temp.objProgress.setProgress(percent)}g_temp.playTimePassed>=g_options.gallery_play_interval&&(t.nextItem(),g_temp.playTimePassed=0)}function unselectSeletedItem(){if(null==g_selectedItem)return!0;g_objThumbs&&g_objThumbs.setThumbUnselected(g_selectedItem.objThumbWrapper),g_selectedItem=null,g_selectedItemIndex=-1}function toFakeFullScreen(){jQuery("body").addClass("ug-body-fullscreen"),g_objWrapper.addClass("ug-fake-fullscreen"),g_temp.isFakeFullscreen=!0,g_objGallery.trigger(t.events.ENTER_FULLSCREEN),g_objGallery.trigger(t.events.SIZE_CHANGE)}function exitFakeFullscreen(){jQuery("body").removeClass("ug-body-fullscreen"),g_objWrapper.removeClass("ug-fake-fullscreen"),g_temp.isFakeFullscreen=!1,g_objGallery.trigger(t.events.EXIT_FULLSCREEN),g_objGallery.trigger(t.events.SIZE_CHANGE)}this.onItemBigImageLoaded=function(d,a){if(!a)var a=jQuery(this);var b=g_arrItems[a.data("itemIndex")];b.isBigImageLoaded=!0;var c=g_functions.getImageOriginalSize(a);b.imageWidth=c.width,b.imageHeight=c.height},this.checkFillImageSize=function(b,a){if(!a){var c=b.data("itemIndex");if(void 0===c)throw new Error("Wrong image given to gallery.checkFillImageSize");var a=g_arrItems[c]}var d=g_functions.getImageOriginalSize(b);a.imageWidth=d.width,a.imageHeight=d.height},this.setFreestyleMode=function(){g_temp.isFreestyleMode=!0},this.attachThumbsPanel=function(a,b){g_temp.thumbsType=a,g_objThumbs=b},this.initSlider=function(a,b){if(!a)var a={};a=jQuery.extend(g_temp.objCustomOptions,a),(g_objSlider=new UGSlider).init(t,a,b)},this.onGalleryMouseWheel=function(a,b,c,d){a.preventDefault(),b>0?t.prevItem():t.nextItem()},this.getKeyPressScore=function(){return t.isGalleryInsideScreen()?1:g_objLightbox&& !0==g_objLightbox.isOpened()?2:0},this.getGalleryID=function(){return g_galleryID},this.destroy=function(){if(g_objWrapper.off("dragstart"),g_objGallery.off(t.events.ITEM_IMAGE_UPDATED),g_objThumbs)switch(g_temp.thumbsType){case"strip":jQuery(g_objThumbs).off(g_objThumbs.events.STRIP_MOVE);break;case"grid":jQuery(g_objThumbs).off(g_objThumbs.events.PANE_CHANGE)}if(g_objWrapper.off("mousewheel"),jQuery(window).off("resize"),g_functions.destroyFullScreenChangeEvent(),g_objSlider){jQuery(g_objSlider).off(g_objSlider.events.ITEM_CHANGED);var a=g_objSlider.getElement();a.off("mouseenter"),a.off("mouseleave"),g_objGallery.off(t.events.ENTER_FULLSCREEN),jQuery(g_objSlider).off(g_objSlider.events.ACTION_START),jQuery(g_objSlider).off(g_objSlider.events.ACTION_END),jQuery(g_objSlider).off(g_objSlider.events.CURRENTSLIDE_LOAD_END)}!0==g_options.gallery_control_keyboard&&jQuery(document).off("keydown"),g_objTheme&&"function"==typeof g_objTheme.destroy&&g_objTheme.destroy(),g_objWrapper.html("")},this.getArrItems=function(){return g_arrItems},this.getObjects=function(){return{g_galleryID:g_galleryID,g_objWrapper:g_objWrapper,g_objThumbs:g_objThumbs,g_objSlider:g_objSlider,g_options:g_options,g_arrItems:g_arrItems,g_numItems:g_numItems}},this.getObjSlider=function(){return g_objSlider},this.getItem=function(a){if(a<0||a>=g_numItems)throw new Error("item with index: "+a+" not found");return g_arrItems[a]},this.getWidth=function(){return t.getSize().width},this.getHeight=function(){return t.getSize().height},this.getSize=function(){var a=g_functions.getElementSize(g_objWrapper);return a.orig_width=g_options.gallery_width,a.orig_height=g_options.gallery_height,a.orig_ratio=a.orig_width/a.orig_height,a},this.getGalleryID=function(){return g_galleryID.replace("#","")},this.getNextItem=function(a,c){"object"==typeof a&&(a=a.index);var b=a+1;if(!0!==c&&1==g_numItems)return null;if(b>=g_numItems){if(!0!=g_options.gallery_carousel&& !0!==c)return null;b=0}return g_arrItems[b]},this.getPrevItem=function(a){"object"==typeof a&&(a=a.index);var b=a-1;if(b<0){if(!0!=g_options.gallery_carousel&& !0!==forceCarousel)return null;b=g_numItems-1}return g_arrItems[b]},this.getSelectedItem=function(){return g_selectedItem},this.getSelectedItemIndex=function(){return g_selectedItemIndex},this.getNumItems=function(){return g_numItems},this.isLastItem=function(){return g_selectedItemIndex==g_numItems-1},this.isFirstItem=function(){return 0==g_selectedItemIndex},this.getOptions=function(){return g_options},this.getElement=function(){return g_objWrapper},this.___________SET_CONTROLS___________=function(){},this.setNextButton=function(a){a.data("ug-button",!0),g_functions.setButtonOnClick(a,t.nextItem)},this.setPrevButton=function(a){a.data("ug-button",!0),g_functions.setButtonOnClick(a,t.prevItem)},this.setFullScreenToggleButton=function(a){a.data("ug-button",!0),g_functions.setButtonOnTap(a,t.toggleFullscreen),g_objGallery.on(t.events.ENTER_FULLSCREEN,function(){a.addClass("ug-fullscreenmode")}),g_objGallery.on(t.events.EXIT_FULLSCREEN,function(){a.removeClass("ug-fullscreenmode")})},this.destroyFullscreenButton=function(a){g_functions.destroyButton(a),g_objGallery.off(t.events.ENTER_FULLSCREEN),g_objGallery.off(t.events.EXIT_FULLSCREEN)},this.setPlayButton=function(a){a.data("ug-button",!0),g_functions.setButtonOnClick(a,t.togglePlayMode),g_objGallery.on(t.events.START_PLAY,function(){a.addClass("ug-stop-mode")}),g_objGallery.on(t.events.STOP_PLAY,function(){a.removeClass("ug-stop-mode")})},this.destroyPlayButton=function(a){g_functions.destroyButton(a),g_objGallery.off(t.events.START_PLAY),g_objGallery.off(t.events.STOP_PLAY)},this.setProgressIndicator=function(a){g_temp.objProgress=a},this.setTextContainers=function(a,b){g_objGallery.on(t.events.ITEM_CHANGE,function(){var c=t.getSelectedItem();a.html(c.title),b.html(c.description)})},this.showDisabledOverlay=function(){g_objWrapper.children(".ug-overlay-disabled").show()},this.hideDisabledOverlay=function(){g_objWrapper.children(".ug-overlay-disabled").hide()},this.___________END_SET_CONTROLS___________=function(){},this.___________PLAY_MODE___________=function(){},this.startPlayMode=function(){if(g_temp.isPlayMode=!0,g_temp.isPlayModePaused=!1,g_temp.playTimePassed=0,g_temp.playTimeLastStep=jQuery.now(),g_temp.playHandle=setInterval(advanceNextStep,g_temp.playStepInterval),g_temp.objProgress){var a=g_temp.objProgress.getElement();g_temp.objProgress.setProgress(0),a.show()}g_objGallery.trigger(t.events.START_PLAY),g_objSlider&& !0==g_objSlider.isCurrentSlideLoadingImage()&&t.pausePlaying()},this.resetPlaying=function(){if(!1==g_temp.isPlayMode)return!0;g_temp.playTimePassed=0,g_temp.playTimeLastStep=jQuery.now()},this.pausePlaying=function(){if(!0==g_temp.isPlayModePaused)return!0;g_temp.isPlayModePaused=!0,clearInterval(g_temp.playHandle),g_objGallery.trigger(t.events.PAUSE_PLAYING)},this.continuePlaying=function(){if(!1==g_temp.isPlayModePaused)return!0;g_temp.isPlayModePaused=!1,g_temp.playTimeLastStep=jQuery.now(),g_temp.playHandle=setInterval(advanceNextStep,g_temp.playStepInterval)},this.stopPlayMode=function(){g_temp.isPlayMode=!1,clearInterval(g_temp.playHandle),g_temp.playTimePassed=0,g_temp.objProgress&&g_temp.objProgress.getElement().hide(),g_objGallery.trigger(t.events.STOP_PLAY)},this.isPlayMode=function(){return g_temp.isPlayMode},this.togglePlayMode=function(){!1==t.isPlayMode()?t.startPlayMode():t.stopPlayMode()},this.___________GENERAL_EXTERNAL___________=function(){},this.getCurrentNumItem=function(){return g_selectedItemIndex},this.shuffleItems=function(){for(var a in g_arrItems=g_functions.arrayShuffle(g_arrItems))g_arrItems[a].index=parseInt(a)},this.setOptions=function(a){g_options=jQuery.extend(g_options,a)},this.selectItem=function(a,c){"number"==typeof a&&(a=t.getItem(a));var b=a.index;if(b==g_selectedItemIndex)return!0;unselectSeletedItem(),g_selectedItem=a,g_selectedItemIndex=b,g_objGallery.trigger(t.events.ITEM_CHANGE,[a,c]),!0==g_temp.isPlayMode&&(t.resetPlaying(),!0==g_objSlider.isCurrentSlideLoadingImage()&&t.pausePlaying())},this.nextItem=function(){var a=g_selectedItemIndex+1;if(0==g_numItems|| !1==g_options.gallery_carousel&&a>=g_numItems)return!0;a>=g_numItems&&(a=0),t.selectItem(a,"next")},this.prevItem=function(){var a=g_selectedItemIndex-1;if(-1==g_selectedItemIndex&&(a=0),0==g_numItems|| !1==g_options.gallery_carousel&&a<0)return!0;a<0&&(a=g_numItems-1),t.selectItem(a,"prev")},this.isFullScreen=function(){return!0==g_temp.isFakeFullscreen|| !0==g_functions.isFullScreen()},this.isFakeFullscreen=function(){return g_temp.isFakeFullscreen},this.toFullScreen=function(){g_functions.setGlobalData("fullscreenID",g_galleryID);var a=g_objWrapper.get(0);!1==g_functions.toFullscreen(a)&&toFakeFullScreen()},this.exitFullScreen=function(){!0==g_temp.isFakeFullscreen?exitFakeFullscreen():g_functions.exitFullscreen()},this.toggleFullscreen=function(){!1==t.isFullScreen()?t.toFullScreen():t.exitFullScreen()},this.resize=function(c,a,b){g_objWrapper.css("width","auto"),g_objWrapper.css("max-width",c+"px"),a&&g_objWrapper.height(a),b|| !0===b||onGalleryResized()},this.setSizeClass=function(c,a){if(!c)var c=g_objWrapper;if(!a)var a=t.getSize().width;if(0==a)var a=jQuery(window).width();var b="";if(a<=480?b="ug-under-480":a<=780?b="ug-under-780":a<960&&(b="ug-under-960"),!0==c.hasClass(b))return!0;removeAllSizeClasses(c),""!=b&&c.addClass(b)},this.isMobileMode=function(){return!!g_objWrapper.hasClass("ug-under-480")},this.isSmallWindow=function(){var a=jQuery(window).width();return!a||a<=480},this.isGalleryVisible=function(){return g_objWrapper.is(":visible")},this.isGalleryInsideScreen=function(){return!0!=g_temp.isFreestyleMode&&!!g_objSlider&&g_functions.isElementInsideScreen(g_objWrapper)},this.changeItems=function(a,b){if(!a)var a="noitems";runGallery(g_galleryID,"nochange",a,b)},this.addItems=function(b){if(!b||0==b.length)return!1;var a=g_objWrapper.children(".ug-newitems-wrapper");0==a.length&&g_objWrapper.append("<div class='ug-newitems-wrapper' style='display:none'></div>"),(a=g_objWrapper.children(".ug-newitems-wrapper")).append(b);var c=jQuery(a.children());if(fillItemsArray(c,!0),loadAPIs(),!g_objTheme||"function"!=typeof g_objTheme.addItems)throw new Error("addItems function not found in the theme");a.remove(),g_objTheme.addItems()},this.getNewAddedItemsIndexes=function(){var a=[];return jQuery.each(g_arrItems,function(b,c){!0==c.isNewAdded&&a.push(b)}),a},this.showErrorMessageReplaceGallery=function(a){showErrorMessage(a)},this.setFuncCustomHeight=function(a){g_temp.funcCustomHeight=a},this.setObjLightbox=function(a){g_objLightbox=a},this.__________EXTERNAL_EVENTS_______=function(){},this.triggerEvent=function(b,a){a?("array"!=jQuery.type(a)&&(a=[a]),g_objGallery.trigger(b,a)):g_objGallery.trigger(b)},this.onEvent=function(a,b){g_objGallery.on(a,b)},this.destroyEvent=function(a){g_objGallery.off(a)},this.__________AJAX_REQUEST_______=function(){},this.ajaxRequest=function(d,a,b,f){if(!b||"function"!=typeof b)throw new Error("ajaxRequest error: success function should be passed");var c=g_options.gallery_urlajax;if(!c||""==c)throw new Error("ajaxRequest error: Ajax url don't passed");if(void 0===a)var a={};var e={action:"unitegallery_ajax_action",client_action:d,galleryID:g_galleryID,data:a};jQuery.ajax({type:"post",url:g_options.gallery_urlajax,dataType:"json",data:e,success:function(a){if(!a)throw new Error("Empty ajax response!");if(-1==a||0===a|| void 0===a.success)throw new Error("ajax error!!!");if(!1==a.success)return showErrorMessage(a.message,"ajax error"),!1;b(a)},error:function(a,b,c){console.log("Ajax Error!!! "+b),responseText=a.responseText,f&&"function"==typeof f?f(responseText):trace(responseText)}})},this.requestNewItems=function(b,d,a){var c=g_options.gallery_enable_cache;if(a||(a=b),!0==d&&(c=!1),!0==c&&g_objCache.hasOwnProperty(a)){var e=g_objCache[a];t.changeItems(e,a)}else g_objGallery.trigger(t.events.GALLERY_BEFORE_REQUEST_ITEMS),t.ajaxRequest("front_get_cat_items",{catid:b},function(b){var c=b.html;t.changeItems(c,a)})},this.run=function(d,b){if(b&&b.hasOwnProperty("gallery_debug_errors")&&(g_options.gallery_debug_errors=b.gallery_debug_errors),!0==g_options.gallery_debug_errors)try{runGallery(d,b)}catch(a){if("object"==typeof a){var c=a.message,e=a.lineNumber,f=a.fileName,g=a.stack;c+=" <br><br> in file: "+f,c+=" <b> line "+e+"</b>",trace(a)}else var c=a;showErrorMessage(c=c.replace("Error:",""))}else runGallery(d,b)}}function UGLightbox(){var g_objTopPanel,g_objGallery,g_objWrapper,g_objOverlay,g_objArrowLeft,g_objArrowRight,g_objButtonClose,g_objNumbers,t=this,g_objThis=jQuery(this),g_gallery=new UniteGalleryMain,g_objSlider=new UGSlider,g_functions=new UGFunctions,g_objTextPanel=new UGTextPanel,g_options={lightbox_type:"wide",lightbox_show_textpanel:!0,lightbox_textpanel_width:550,lightbox_hide_arrows_onvideoplay:!0,lightbox_arrows_position:"sides",lightbox_arrows_offset:10,lightbox_arrows_inside_offset:10,lightbox_arrows_inside_alwayson:!1,lightbox_overlay_color:null,lightbox_overlay_opacity:1,lightbox_top_panel_opacity:null,lightbox_show_numbers:!0,lightbox_numbers_size:null,lightbox_numbers_color:null,lightbox_numbers_padding_top:null,lightbox_numbers_padding_right:null,lightbox_compact_closebutton_offsetx:1,lightbox_compact_closebutton_offsety:1,lightbox_close_on_emptyspace:!0};this.events={LIGHTBOX_INIT:"lightbox_init"};var g_temp={topPanelHeight:44,initTextPanelHeight:26,isOpened:!1,isRightNowOpened:!1,putSlider:!0,isCompact:!1,fadeDuration:300,positionFrom:null,textPanelTop:null,textPanelLeft:null,isArrowsInside:!1,isArrowsOnHoverMode:!1,lastMouseX:null,lastMouseY:null,originalOptions:null,isSliderChangedOnce:!1,isTopPanelEnabled:!0},g_defaults={lightbox_slider_controls_always_on:!0,lightbox_slider_enable_bullets:!1,lightbox_slider_enable_arrows:!1,lightbox_slider_enable_progress_indicator:!1,lightbox_slider_enable_play_button:!1,lightbox_slider_enable_fullscreen_button:!1,lightbox_slider_enable_zoom_panel:!1,lightbox_slider_enable_text_panel:!1,lightbox_slider_scale_mode_media:"down",lightbox_slider_scale_mode:"down",lightbox_slider_loader_type:3,lightbox_slider_loader_color:"black",lightbox_slider_transition:"fade",lightbox_slider_image_padding_top:g_temp.topPanelHeight,lightbox_slider_image_padding_bottom:0,lightbox_slider_video_padding_top:38,lightbox_slider_video_padding_bottom:0,lightbox_textpanel_align:"middle",lightbox_textpanel_padding_top:5,lightbox_textpanel_padding_bottom:5,slider_video_constantsize:!1,lightbox_slider_image_border:!1,lightbox_textpanel_enable_title:!0,lightbox_textpanel_enable_description:!1,lightbox_textpanel_desc_style_as_title:!0,lightbox_textpanel_enable_bg:!1,video_enable_closebutton:!1,lightbox_slider_video_enable_closebutton:!1,video_youtube_showinfo:!1,lightbox_slider_enable_links:!1},g_defaultsCompact={lightbox_overlay_opacity:.6,lightbox_slider_image_border:!0,lightbox_slider_image_shadow:!0,lightbox_slider_image_padding_top:30,lightbox_slider_image_padding_bottom:30,slider_video_constantsize:!0,lightbox_textpanel_align:"bottom",lightbox_textpanel_title_text_align:"left",lightbox_textpanel_desc_text_align:"left",lightbox_textpanel_padding_left:10,lightbox_textpanel_padding_right:10};function initLightbox(gallery,customOptions){g_gallery=gallery,g_objGallery=jQuery(gallery),g_gallery.setObjLightbox(t),g_options=jQuery.extend(g_options,g_defaults),g_options=jQuery.extend(g_options,customOptions),g_temp.originalOptions=jQuery.extend({},g_options),"compact"==g_options.lightbox_type&&(g_temp.isCompact=!0,g_options=jQuery.extend(g_options,g_defaultsCompact),g_options=jQuery.extend(g_options,customOptions)),modifyOptions(),!0==g_temp.putSlider?(g_gallery.initSlider(g_options,"lightbox"),g_objSlider=(g_objects=gallery.getObjects()).g_objSlider):g_objSlider=null,!0==g_options.lightbox_show_textpanel?g_objTextPanel.init(g_gallery,g_options,"lightbox"):g_objTextPanel=null}function modifyOptions(){!0==g_temp.isCompact&& !0==g_options.lightbox_show_textpanel&&(g_options.lightbox_slider_image_padding_bottom=g_temp.initTextPanelHeight),!0==g_temp.isCompact&&"inside"==g_options.lightbox_arrows_position&&(g_temp.isArrowsInside=!0),!0==g_temp.isArrowsInside&& !1==g_options.lightbox_arrows_inside_alwayson&&(g_temp.isArrowsOnHoverMode=!0),!1==g_options.lightbox_show_textpanel&&(g_temp.isTopPanelEnabled=!1,g_temp.topPanelHeight=0,g_options.lightbox_slider_image_padding_top=0)}function putLightboxHtml(){var html="",classAddition="";!0==g_temp.isCompact&&(classAddition=" ug-lightbox-compact"),html+="<div class='ug-gallery-wrapper ug-lightbox"+classAddition+"' >",html+="<div class='ug-lightbox-overlay'></div>",!1==g_temp.isCompact&&g_temp.isTopPanelEnabled?(html+="<div class='ug-lightbox-top-panel'>",html+="<div class='ug-lightbox-top-panel-overlay'></div>",g_options.lightbox_show_numbers&&(html+="<div class='ug-lightbox-numbers'></div>"),html+="</div>"):g_options.lightbox_show_numbers&&(html+="<div class='ug-lightbox-numbers'></div>"),html+="<div href=\"javascript:void(0)\" class='ug-lightbox-button-close'></div>",html+="<div class='ug-lightbox-arrow-left'></div>",html+="<div class='ug-lightbox-arrow-right'></div>",html+="</div>",g_objWrapper=jQuery(html),jQuery("body").append(g_objWrapper),g_objSlider&&g_objSlider.setHtml(g_objWrapper),g_objOverlay=g_objWrapper.children(".ug-lightbox-overlay"),!1==g_temp.isCompact&& !0==g_temp.isTopPanelEnabled&&0==(g_objTopPanel=g_objWrapper.children(".ug-lightbox-top-panel")).length&&(g_objTopPanel=null),g_objButtonClose=g_objWrapper.find(".ug-lightbox-button-close"),g_options.lightbox_show_numbers&&(g_objNumbers=g_objWrapper.find(".ug-lightbox-numbers")),g_objArrowLeft=g_objWrapper.children(".ug-lightbox-arrow-left"),g_objArrowRight=g_objWrapper.children(".ug-lightbox-arrow-right"),g_objTextPanel&&(g_objTopPanel?g_objTextPanel.appendHTML(g_objTopPanel):g_objTextPanel.appendHTML(g_objWrapper))}function setProperties(){if(null!==g_options.lightbox_overlay_color&&g_objOverlay.css("background-color",g_options.lightbox_overlay_color),null!==g_options.lightbox_overlay_opacity&&g_objOverlay.fadeTo(0,g_options.lightbox_overlay_opacity),g_objTopPanel&&null!==g_options.lightbox_top_panel_opacity&&g_objTopPanel.children(".ug-lightbox-top-panel-overlay").fadeTo(0,g_options.lightbox_top_panel_opacity),g_objNumbers){var cssNumbers={};null!==g_options.lightbox_numbers_size&&(cssNumbers["font-size"]=g_options.lightbox_numbers_size+"px"),g_options.lightbox_numbers_color&&(cssNumbers.color=g_options.lightbox_numbers_color),null!==g_options.lightbox_numbers_padding_right&&(cssNumbers["padding-right"]=g_options.lightbox_numbers_padding_right+"px"),null!==g_options.lightbox_numbers_padding_top&&(cssNumbers["padding-top"]=g_options.lightbox_numbers_padding_top+"px"),g_objNumbers.css(cssNumbers)}}function refreshSliderItem(newHeight){if(!g_objSlider)return!0;var objOptions={slider_image_padding_top:newHeight};g_objSlider.setOptions(objOptions),g_objSlider.refreshSlideItems()}function handlePanelHeight(fromWhere){if(!g_objTopPanel||!g_objTextPanel)return!1;var panelHeight=g_objTopPanel.height();if(0==panelHeight|| !1==g_objTopPanel.is(":visible"))return!1;var newPanelHeight=panelHeight,textPanelHeight=g_objTextPanel.getSize().height;panelHeight!=g_temp.topPanelHeight&&(newPanelHeight=g_temp.topPanelHeight),textPanelHeight>newPanelHeight&&(newPanelHeight=textPanelHeight),panelHeight!=newPanelHeight&&(g_objTopPanel.height(newPanelHeight),g_objSlider&& !1==g_objSlider.isAnimating()&&refreshSliderItem(newPanelHeight))}function positionTextPanelWide(size){var objOptions={},textWidth=g_options.lightbox_textpanel_width,minPaddingLeft=47,minPaddingRight=40;textWidth>size.width-minPaddingLeft-minPaddingRight?(objOptions.textpanel_padding_left=minPaddingLeft,objOptions.textpanel_padding_right=minPaddingRight,objOptions.textpanel_title_text_align="center",objOptions.textpanel_desc_text_align="center"):(objOptions.textpanel_padding_left=Math.floor((size.width-textWidth)/2),objOptions.textpanel_padding_right=objOptions.textpanel_padding_left,objOptions.textpanel_title_text_align="left",objOptions.textpanel_desc_text_align="left",g_options.lightbox_textpanel_title_text_align&&(objOptions.textpanel_title_text_align=g_options.lightbox_textpanel_desc_text_align),g_options.lightbox_textpanel_desc_text_align&&(objOptions.textpanel_desc_text_align=g_options.lightbox_textpanel_desc_text_align)),g_objTextPanel.setOptions(objOptions),g_objTextPanel.refresh(!0,!0),handlePanelHeight("positionTextPanelWide"),g_objTextPanel.positionPanel()}function hideTopPanel(){if(!g_objTopPanel)return!1;g_objTopPanel.hide()}function showTopPanel(){if(!g_objTopPanel)return!1;g_objTopPanel.show()}function handleCompactHeight(objImageSize){if(!1==g_temp.isOpened||!g_objTextPanel||!g_objSlider)return!1;var wrapperSize=g_functions.getElementSize(g_objWrapper),textPanelSize=g_objTextPanel.getSize();if(0==textPanelSize.width||textPanelSize.height>120)return!1;if(!objImageSize)var objImage=g_objSlider.getSlideImage(),objImageSize=g_functions.getElementSize(objImage);if(0==objImageSize.height||0==objImageSize.width||objImageSize.bottom+textPanelSize.height<wrapperSize.height)return!1;var sliderOptions=g_objSlider.getOptions(),imagePaddingBottom=textPanelSize.height;if(imagePaddingBottom!=sliderOptions.slider_image_padding_bottom){var objOptions={slider_image_padding_bottom:imagePaddingBottom};if(!1==g_objSlider.isAnimating())return g_objSlider.setOptions(objOptions),g_objSlider.refreshSlideItems(),!0}return!1}function setCompactTextpanelTop(objImageSize,positionPanel){if(!objImageSize)var objImage=g_objSlider.getSlideImage(),objImageSize=g_functions.getElementSize(objImage);g_temp.textPanelTop=objImageSize.bottom,!0===positionPanel&&g_objTextPanel.positionPanel(g_temp.textPanelTop,g_temp.textPanelLeft)}function handleCompactTextpanelSizes(showTextpanel){g_functions.getElementSize(g_objWrapper);var objImage=g_objSlider.getSlideImage(),objImageSize=g_functions.getElementSize(objImage);if(0==objImageSize.width)return!1;g_temp.textPanelLeft=objImageSize.left,g_temp.textPanelTop=objImageSize.bottom;var textPanelWidth=objImageSize.width;if(g_objNumbers){var objNumbersSize=g_functions.getElementSize(g_objNumbers);textPanelWidth-=objNumbersSize.width;var numbersLeft=objImageSize.right-objNumbersSize.width;g_functions.placeElement(g_objNumbers,numbersLeft,g_temp.textPanelTop)}g_objTextPanel&&(g_objTextPanel.show(),g_objTextPanel.refresh(!0,!0,textPanelWidth),setCompactTextpanelTop(objImageSize)),!1==handleCompactHeight(objImageSize)&&(g_temp.positionFrom="handleCompactTextpanelSizes",g_objTextPanel&&(g_objTextPanel.positionPanel(g_temp.textPanelTop,g_temp.textPanelLeft),!0===showTextpanel&&(showTextpanel(),showNumbers())))}function isSliderImageInPlace(){return!1==g_objSlider.isCurrentSlideType("image")|| !0==g_objSlider.isCurrentImageInPlace()}function positionArrowsInside(toShow,isAnimation){if(!1==g_temp.isArrowsInside||!g_objArrowLeft)return!1;var isImageInPlace=isSliderImageInPlace();if(g_objArrowLeft.show(),g_objArrowRight.show(),g_temp.positionFrom="positionArrowsInside",!0==g_temp.isArrowsOnHoverMode&& !0==isImageInPlace&& !1==isMouseInsideImage()&&hideArrows(!0),!1==isImageInPlace)var leftArrowLeft=g_functions.getElementRelativePos(g_objArrowLeft,"left",g_options.lightbox_arrows_offset),leftArrowTop=g_functions.getElementRelativePos(g_objArrowLeft,"middle"),rightArrowLeft=g_functions.getElementRelativePos(g_objArrowRight,"right",g_options.lightbox_arrows_offset),rightArrowTop=leftArrowTop;else{var objImage=g_objSlider.getSlideImage(),objImageSize=g_functions.getElementSize(objImage);g_functions.getElementSize(g_objSlider.getElement());var leftArrowLeft=g_functions.getElementRelativePos(g_objArrowLeft,"left",0,objImage)+objImageSize.left+g_options.lightbox_arrows_inside_offset,leftArrowTop=g_functions.getElementRelativePos(g_objArrowLeft,"middle",0,objImage)+objImageSize.top,rightArrowLeft=g_functions.getElementRelativePos(g_objArrowLeft,"right",0,objImage)+objImageSize.left-g_options.lightbox_arrows_inside_offset,rightArrowTop=leftArrowTop}if(!0===isAnimation){var objCssLeft={left:leftArrowLeft,top:leftArrowTop},objCssRight={left:rightArrowLeft,top:rightArrowTop};g_objArrowLeft.stop().animate(objCssLeft,{duration:g_temp.fadeDuration}),g_objArrowRight.stop().animate(objCssRight,{duration:g_temp.fadeDuration})}else g_objArrowLeft.stop(),g_objArrowRight.stop(),g_functions.placeElement(g_objArrowLeft,leftArrowLeft,leftArrowTop),g_functions.placeElement(g_objArrowRight,rightArrowLeft,rightArrowTop);!0==toShow&&showArrows(isAnimation)}function positionCloseButton(toShow,isAnimation){g_temp.positionFrom=null;var isImageInPlace=isSliderImageInPlace(),minButtonTop=2,maxButtonLeft=g_functions.getElementRelativePos(g_objButtonClose,"right",2,g_objWrapper);if(!1==isImageInPlace)var closeButtonTop=minButtonTop,closeButtonLeft=maxButtonLeft;else{var objImage=g_objSlider.getSlideImage(),objImageSize=g_functions.getElementSize(objImage),objSliderSize=g_functions.getElementSize(g_objSlider.getElement()),objButtonSize=g_functions.getElementSize(g_objButtonClose);objSliderSize.top==objSliderSize.height&&(objSliderSize.top=0);var closeButtonLeft=objSliderSize.left+objImageSize.right-objButtonSize.width/2+g_options.lightbox_compact_closebutton_offsetx,closeButtonTop=objSliderSize.top+objImageSize.top-objButtonSize.height/2-g_options.lightbox_compact_closebutton_offsety;closeButtonTop<minButtonTop&&(closeButtonTop=minButtonTop),closeButtonLeft>maxButtonLeft&&(closeButtonLeft=maxButtonLeft)}if(!0===isAnimation){var objCss={left:closeButtonLeft,top:closeButtonTop};g_objButtonClose.stop().animate(objCss,{duration:g_temp.fadeDuration})}else g_objButtonClose.stop(),g_functions.placeElement(g_objButtonClose,closeButtonLeft,closeButtonTop);!0===toShow&&showCloseButton(isAnimation)}function hideCompactElements(){g_objButtonClose&&g_objButtonClose.stop().fadeTo(g_temp.fadeDuration,0),hideTextPanel(),hideNumbers(),g_temp.positionFrom="hideCompactElements",!0==g_temp.isArrowsInside&&hideArrows()}function actualHideCompactElements(){g_objButtonClose&&g_objButtonClose.hide(),g_objArrowLeft&& !0==g_temp.isArrowsInside&&(g_objArrowLeft.hide(),g_objArrowRight.hide()),g_objNumbers&&g_objNumbers.hide(),g_objTextPanel&&g_objTextPanel.hide()}function positionElements(){var size=g_functions.getElementSize(g_objWrapper);g_objTopPanel&&g_functions.setElementSizeAndPosition(g_objTopPanel,0,0,size.width,g_temp.topPanelHeight),g_objArrowLeft&& !1==g_temp.isArrowsInside&&(!0==g_options.lightbox_hide_arrows_onvideoplay&&(g_objArrowLeft.show(),g_objArrowRight.show()),g_functions.placeElement(g_objArrowLeft,"left","middle",g_options.lightbox_arrows_offset),g_functions.placeElement(g_objArrowRight,"right","middle",g_options.lightbox_arrows_offset)),!1==g_temp.isCompact&&g_functions.placeElement(g_objButtonClose,"right","top",2,2),g_objTextPanel&&(g_temp.positionFrom="positionElements",!1==g_temp.isCompact?positionTextPanelWide(size):(showTextPanel(),showNumbers()));var sliderWidth=size.width,sliderHeight=size.height,sliderTop=0,sliderLeft=0;if(g_objSlider){if(g_objTopPanel){var objOptions={slider_image_padding_top:g_objTopPanel.height()};g_objSlider.setOptions(objOptions)}g_objSlider.setSize(sliderWidth,sliderHeight),g_objSlider.setPosition(sliderLeft,sliderTop)}}function hideTextPanel(){g_objTextPanel&&g_objTextPanel.getElement().stop().fadeTo(g_temp.fadeDuration,0)}function hideNumbers(){g_objNumbers&&g_objNumbers.stop().fadeTo(g_temp.fadeDuration,0)}function isMouseInsideImage(){if(!g_temp.lastMouseX)return!0;var obj={pageX:g_temp.lastMouseX,pageY:g_temp.lastMouseY};return g_objSlider.isMouseInsideSlideImage(obj)}function hideArrows(noAnimation,isForce){return!!g_objArrowLeft&&(!0==g_temp.isArrowsOnHoverMode&& !1===isForce?(isMouseInsideImage(),!0):void(!0===noAnimation?(g_objArrowLeft.stop().fadeTo(0,0),g_objArrowRight.stop().fadeTo(0,0)):(g_objArrowLeft.stop().fadeTo(g_temp.fadeDuration,0),g_objArrowRight.stop().fadeTo(g_temp.fadeDuration,0))))}function isArrowsHidden(){return!g_objArrowLeft|| !1==g_objArrowLeft.is(":visible")||1!=g_objArrowLeft.css("opacity")}function showArrows(noStop,fromHover){return!!g_objArrowLeft&&(!0==g_temp.isArrowsOnHoverMode&& !0!==fromHover&& !0==isSliderImageInPlace()|| !0==g_objSlider.isSwiping()||void(!0!==noStop&&(g_objArrowLeft.stop(),g_objArrowRight.stop()),g_objArrowLeft.fadeTo(g_temp.fadeDuration,1),g_objArrowRight.fadeTo(g_temp.fadeDuration,1)))}function showCloseButton(noStop){!0!==noStop&&g_objButtonClose.stop(),g_objButtonClose.fadeTo(g_temp.fadeDuration,1)}function updateTextPanelText(currentItem){if(!g_objTextPanel)return!1;if(!currentItem)var currentItem=g_objSlider.getCurrentItem();g_objTextPanel.setTextPlain(currentItem.title,currentItem.description)}function updateNumbersText(currentItem){if(!g_objNumbers)return!1;if(!currentItem)var currentItem=g_objSlider.getCurrentItem();var numItems=g_gallery.getNumItems(),numCurrentItem=currentItem.index+1;g_objNumbers.html(numCurrentItem+" / "+numItems)}function showTextPanel(){if(!g_objTextPanel)return!1;g_objTextPanel.getElement().show().stop().fadeTo(g_temp.fadeDuration,1)}function showNumbers(){g_objNumbers&&g_objNumbers.stop().fadeTo(g_temp.fadeDuration,1)}function onSliderDragStart(){if(!1==g_temp.isCompact)return!0;hideCompactElements()}function onZoomChange(){if(!1==g_temp.isCompact)return!0;g_temp.positionFrom="onZoomChange",positionCloseButton(!1,!0),positionArrowsInside(!1,!0),!0==g_temp.isCompact&&(!1==(g_objSlider.isCurrentSlideType("image")&& !0==g_objSlider.isCurrentImageInPlace())?(hideTextPanel(),hideNumbers()):(g_temp.positionFrom="onZoomChange",showTextPanel(),showNumbers()))}function onSliderAfterReturn(){if(!1==g_temp.isCompact)return!0;g_temp.positionFrom="onSliderAfterReturn",positionCloseButton(!0),positionArrowsInside(!0),!1==handleCompactHeight()&&handleCompactTextpanelSizes(),showTextPanel(),showNumbers()}function onSliderAfterPutImage(data,objSlide){if(objSlide=jQuery(objSlide),!1==g_temp.isCompact|| !1==g_objSlider.isSlideCurrent(objSlide))return!0;g_temp.positionFrom="onSliderAfterPutImage",positionCloseButton(!0),positionArrowsInside(!0),handleCompactTextpanelSizes()}function onSliderTransitionEnd(){var imagePaddingTop=g_objSlider.getOptions().slider_image_padding_top;if(g_objTopPanel){var panelHeight=g_objTopPanel.height();panelHeight!=imagePaddingTop&&refreshSliderItem(panelHeight)}!0==g_temp.isCompact&&(updateTextPanelText(),updateNumbersText(),g_temp.positionFrom="onSliderTransitionEnd",positionCloseButton(!0),positionArrowsInside(!0),!1==g_objSlider.isSlideActionActive()&& !1==handleCompactHeight()&&handleCompactTextpanelSizes(),showTextPanel(),showNumbers())}function onItemChange(data,currentItem){!1==g_temp.isCompact?(g_objNumbers&&updateNumbersText(currentItem),g_objTextPanel&&(updateTextPanelText(currentItem),!1==g_temp.isRightNowOpened&&(g_objTextPanel.positionElements(!1),handlePanelHeight("onchange"),g_objTextPanel.positionPanel()))):!1==g_objSlider.isAnimating()&&(g_objTextPanel&&updateTextPanelText(currentItem),g_objNumbers&&updateNumbersText(currentItem)),!1==g_temp.isSliderChangedOnce&&(g_temp.isSliderChangedOnce=!0,g_objThis.trigger(t.events.LIGHTBOX_INIT))}function onSliderClick(data,event){return!!("image"!=g_objSlider.getSlideType()&& !1==g_temp.isCompact&&g_objSlider.isSlideActionActive())||(!0==g_objSlider.isPreloading()?(t.close("slider"),!0):void(!0==g_options.lightbox_close_on_emptyspace&& !1==g_objSlider.isMouseInsideSlideImage(event)&&t.close("slider_inside")))}function onResize(){positionElements()}function onPlayVideo(){g_objTopPanel?hideTopPanel():g_objNumbers&&g_objNumbers.hide(),g_objArrowLeft&& !0==g_options.lightbox_hide_arrows_onvideoplay&&(g_objArrowLeft.hide(),g_objArrowRight.hide())}function onStopVideo(){g_objTopPanel?(showTopPanel(),handlePanelHeight("onStopVideo")):g_objNumbers&&g_objNumbers.show(),g_objArrowLeft&& !0==g_options.lightbox_hide_arrows_onvideoplay&&(g_objArrowLeft.show(),g_objArrowRight.show())}function onKeyPress(data,key,event){var isScrollKey=!1;switch(key){case 27:!0==g_temp.isOpened&&t.close("keypress");break;case 38:case 40:case 33:case 34:isScrollKey=!0}!0==g_temp.isOpened&& !0==isScrollKey&&event.preventDefault()}function onImageMouseEnter(){!0==g_temp.isArrowsOnHoverMode&&showArrows(!1,!0)}function onImageMouseLeave(event){g_temp.positionFrom="hideCompactElements",!0==g_temp.isArrowsOnHoverMode&& !0==isSliderImageInPlace()&&hideArrows(!1,!0)}function onMouseMove(event){g_temp.lastMouseX=event.pageX,g_temp.lastMouseY=event.pageY,!0==isArrowsHidden()&&isMouseInsideImage()&& !1==g_objSlider.isAnimating()&&(g_temp.positionFrom="onMouseMove",g_objArrowLeft&& !1==g_objArrowLeft.is(":animated")&&showArrows(!1,!0))}function onMouseWheel(event,delta,deltaX,deltaY){if(!1==g_temp.isOpened)return!0;switch(g_options.gallery_mousewheel_role){default:case"zoom":"image"!=g_objSlider.getSlideType()&&event.preventDefault();break;case"none":event.preventDefault();break;case"advance":g_gallery.onGalleryMouseWheel(event,delta,deltaX,deltaY)}}function initEvents(){if(g_objOverlay.on("touchstart",function(a){a.preventDefault()}),g_objOverlay.on("touchend",function(a){t.close("overlay")}),g_functions.addClassOnHover(g_objArrowRight,"ug-arrow-hover"),g_functions.addClassOnHover(g_objArrowLeft,"ug-arrow-hover"),g_functions.addClassOnHover(g_objButtonClose),g_gallery.setNextButton(g_objArrowRight),g_gallery.setPrevButton(g_objArrowLeft),g_objButtonClose.on("click",function(){t.close("button")}),g_objGallery.on(g_gallery.events.ITEM_CHANGE,onItemChange),g_objSlider){jQuery(g_objSlider).on(g_objSlider.events.TRANSITION_END,onSliderTransitionEnd),jQuery(g_objSlider).on(g_objSlider.events.CLICK,onSliderClick);var objVideo=g_objSlider.getVideoObject();jQuery(objVideo).on(objVideo.events.PLAY_START,onPlayVideo),jQuery(objVideo).on(objVideo.events.PLAY_STOP,onStopVideo),jQuery(g_objSlider).on(g_objSlider.events.START_DRAG,onSliderDragStart),jQuery(g_objSlider).on(g_objSlider.events.TRANSITION_START,onSliderDragStart),jQuery(g_objSlider).on(g_objSlider.events.AFTER_DRAG_CHANGE,onSliderAfterReturn),jQuery(g_objSlider).on(g_objSlider.events.AFTER_RETURN,onSliderAfterReturn),jQuery(g_objSlider).on(g_objSlider.events.AFTER_PUT_IMAGE,onSliderAfterPutImage),jQuery(g_objSlider).on(g_objSlider.events.ZOOM_CHANGE,onZoomChange),jQuery(g_objSlider).on(g_objSlider.events.IMAGE_MOUSEENTER,onImageMouseEnter),jQuery(g_objSlider).on(g_objSlider.events.IMAGE_MOUSELEAVE,onImageMouseLeave)}jQuery(window).resize(function(){if(!1==g_temp.isOpened)return!0;g_functions.whenContiniousEventOver("lightbox_resize",onResize,100)}),g_objGallery.on(g_gallery.events.GALLERY_KEYPRESS,onKeyPress),!0==g_temp.isArrowsOnHoverMode&&jQuery(document).bind("mousemove",onMouseMove),g_objWrapper.on("mousewheel",onMouseWheel)}function switchToWide(){g_temp.isCompact=!1,modifyOptions(),g_temp.isArrowsInside=!1,g_temp.isArrowsOnHoverMode=!1,(g_options=jQuery.extend({},g_temp.originalOptions)).lightbox_arrows_position="sides",g_objSlider.setOptions(g_options)}this.destroy=function(){if(jQuery(document).unbind("mousemove"),g_objOverlay.off("touchstart"),g_objOverlay.off("touchend"),g_objButtonClose.off("click"),g_objGallery.off(g_gallery.events.ITEM_CHANGE),g_objSlider){jQuery(g_objSlider).off(g_objSlider.events.TRANSITION_END),jQuery(g_objSlider).off(g_objSlider.events.CLICK),jQuery(g_objSlider).off(g_objSlider.events.START_DRAG),jQuery(g_objSlider).off(g_objSlider.events.TRANSITION_START),jQuery(g_objSlider).off(g_objSlider.events.AFTER_DRAG_CHANGE),jQuery(g_objSlider).off(g_objSlider.events.AFTER_RETURN);var a=g_objSlider.getVideoObject();jQuery(a).off(a.events.PLAY_START),jQuery(a).off(a.events.PLAY_STOP),jQuery(g_objSlider).on(g_objSlider.events.IMAGE_MOUSEENTER,onImageMouseEnter),jQuery(g_objSlider).on(g_objSlider.events.IMAGE_MOUSELEAVE,onImageMouseLeave),g_objSlider.destroy()}jQuery(window).unbind("resize"),g_objGallery.off(g_gallery.events.GALLERY_KEYPRESS,onKeyPress),g_objWrapper.off("mousewheel"),g_objWrapper.remove()},this.isOpened=function(){return g_temp.isOpened},this.open=function(b){var a=g_gallery.getItem(b);g_temp.isOpened=!0,g_temp.isRightNowOpened=!0,setTimeout(function(){g_temp.isRightNowOpened=!1},100),g_objSlider&&g_objSlider.setItem(a,"lightbox_open"),g_objTextPanel&&g_objTextPanel.setTextPlain(a.title,a.description),g_objOverlay.stop().fadeTo(0,0),g_objWrapper.show(),g_objWrapper.fadeTo(0,1),g_objOverlay.stop().fadeTo(g_temp.fadeDuration,g_options.lightbox_overlay_opacity),positionElements(),!0==g_temp.isCompact&&(!0==g_objSlider.isPreloading()?actualHideCompactElements():!0==g_temp.isArrowsInside&&(g_objArrowLeft.hide(),g_objArrowRight.hide())),g_objSlider&&g_objSlider.startSlideAction(),g_objGallery.trigger(g_gallery.events.OPEN_LIGHTBOX,a)},this.close=function(a){g_temp.isOpened=!1,!0==g_temp.isCompact&&hideCompactElements(),g_objSlider&&g_objSlider.stopSlideAction(),"image"!=g_objSlider.getSlideType()?g_objWrapper.hide():g_objWrapper.fadeTo(g_temp.fadeDuration,0,function(){g_objWrapper.hide()}),g_objGallery.trigger(g_gallery.events.CLOSE_LIGHTBOX)},this.init=function(a,b){initLightbox(a,b)},this.putHtml=function(){g_gallery.isSmallWindow()&& !0==g_temp.isCompact&&switchToWide(),putLightboxHtml()},this.run=function(){setProperties(),g_objSlider&&g_objSlider.run(),initEvents()}}function UGCarousel(){var g_objGallery,g_objWrapper,g_arrItems,g_objCarouselWrapper,g_objInner,t=this,g_objThis=jQuery(this),g_gallery=new UniteGalleryMain,g_functions=new UGFunctions,g_objTileDesign=new UGTileDesign,g_thumbs=new UGThumbsGeneral,g_options={carousel_padding:8,carousel_space_between_tiles:20,carousel_navigation_numtiles:3,carousel_scroll_duration:500,carousel_scroll_easing:"easeOutCubic",carousel_autoplay:!0,carousel_autoplay_timeout:3e3,carousel_autoplay_direction:"right",carousel_autoplay_pause_onhover:!0,carousel_vertical_scroll_ondrag:!1};this.events={START_PLAY:"carousel_start_play",PAUSE_PLAY:"carousel_pause_play",STOP_PLAY:"carousel_stop_play"};var g_temp={eventSizeChange:"thumb_size_change",isFirstTimeRun:!0,carouselMaxWidth:null,tileWidth:0,initTileWidth:0,initTileHeight:0,sideSpace:1500,spaceActionSize:500,numCurrent:0,touchActive:!1,startInnerPos:0,lastTime:0,startTime:0,startMousePos:0,lastMousePos:0,scrollShortDuration:200,scrollShortEasing:"easeOutQuad",handle:null,isPlayMode:!1,isPaused:!1,storedEventID:"carousel"};function init(gallery,customOptions){g_objects=gallery.getObjects(),g_gallery=gallery,g_objGallery=jQuery(gallery),g_objWrapper=g_objects.g_objWrapper,g_arrItems=g_objects.g_arrItems,g_options=jQuery.extend(g_options,customOptions),g_objTileDesign.setFixedMode(),g_objTileDesign.setApproveClickFunction(isApproveTileClick),g_objTileDesign.init(gallery,g_options),g_thumbs=g_objTileDesign.getObjThumbs(),g_options=g_objTileDesign.getOptions(),g_temp.initTileWidth=g_options.tile_width,g_temp.initTileHeight=g_options.tile_height,g_temp.tileWidth=g_options.tile_width}function setHtml(objParent){if(!objParent)var objParent=g_objWrapper;var html="<div class='ug-carousel-wrapper'><div class='ug-carousel-inner'></div></div>";g_objWrapper.append(html),g_objInner=(g_objCarouselWrapper=g_objWrapper.children(".ug-carousel-wrapper")).children(".ug-carousel-inner"),g_objTileDesign.setHtml(g_objInner),g_thumbs.getThumbs().fadeTo(0,1)}function resizeTiles(newTileWidth,newTileHeight){if(!newTileHeight)var newTileHeight=g_temp.initTileHeight/g_temp.initTileWidth*newTileWidth;g_temp.tileWidth=newTileWidth;var optUpdate={tile_width:newTileWidth,tile_height:newTileHeight};g_objTileDesign.setOptions(optUpdate),g_options.tile_width=newTileWidth,g_options.tile_height=newTileHeight,g_objTileDesign.resizeAllTiles(newTileWidth),positionTiles(!0)}function run(){if(null===g_temp.carouselMaxWidth)throw new Error("The carousel width not set");if(g_temp.tileWidth<g_temp.initTileWidth){var newTileWidth=g_temp.carouselMaxWidth-2*g_options.carousel_padding;newTileWidth>g_temp.initTileWidth&&(newTileWidth=g_temp.initTileWidth),resizeTiles(newTileWidth);var numTiles=g_functions.getNumItemsInSpace(g_temp.carouselMaxWidth,newTileWidth,g_options.carousel_space_between_tiles)}else{var numTiles=g_functions.getNumItemsInSpace(g_temp.carouselMaxWidth,g_temp.tileWidth,g_options.carousel_space_between_tiles);if(numTiles<=0){numTiles=1;var newTileWidth=g_temp.carouselMaxWidth-2*g_options.carousel_padding;resizeTiles(newTileWidth)}}var realWidth=g_functions.getSpaceByNumItems(numTiles,g_temp.tileWidth,g_options.carousel_space_between_tiles);realWidth+=2*g_options.carousel_padding,g_objCarouselWrapper.width(realWidth),!0==g_temp.isFirstTimeRun?(initEvents(),g_objTileDesign.run(),jQuery.each(g_arrItems,function(b,a){a.objThumbWrapper.data("index",b),g_objWrapper.trigger(g_temp.eventSizeChange,[a.objThumbWrapper,!0]),a.objTileOriginal=a.objThumbWrapper.clone(!0,!0)}),positionTiles(!0),!0==g_options.carousel_autoplay&&t.startAutoplay()):(!0==g_options.carousel_autoplay&&t.pauseAutoplay(),scrollToTile(0,!1),!0==g_options.carousel_autoplay&&t.startAutoplay()),positionElements(),g_temp.isFirstTimeRun=!1}function getInnerPos(){return g_functions.getElementSize(g_objInner).left}function getMousePos(event){return g_functions.getMousePosition(event).pageX}function getTiles(){return g_objInner.children(".ug-thumb-wrapper")}function getNumTilesInSpace(space){return g_functions.getNumItemsInSpace(space,g_temp.tileWidth,g_options.carousel_space_between_tiles)}function getNumTiles(){return getTiles().length}function getTile(numTile){validateTileNum(numTile);var objTiles=getTiles();return jQuery(objTiles[numTile])}function getFirstTile(){return g_objInner.children(".ug-thumb-wrapper").first()}function getLastTile(){return g_objInner.children(".ug-thumb-wrapper").last()}function getTileClones(objTile,numClones,dir){var index=objTile.data("index");if(void 0==index)throw new Error("every tile should have index!");for(var arrClonedItems=[],i=0;i<numClones;i++){if("prev"==dir)var itemToAdd=g_gallery.getPrevItem(index,!0);else var itemToAdd=g_gallery.getNextItem(index,!0);if(!itemToAdd)throw new Error("the item to add is empty");var clonedTile=itemToAdd.objTileOriginal.clone(!0,!0);index=itemToAdd.index,clonedTile.addClass("cloned"),arrClonedItems.push(clonedTile)}return arrClonedItems}function getRemainSpaceRight(){var wrapperSize=g_functions.getElementSize(g_objCarouselWrapper),innerSize=g_functions.getElementSize(g_objInner),spaceTaken=innerSize.width-wrapperSize.width+innerSize.left,spaceRemain=g_temp.sideSpace-spaceTaken;return spaceRemain}function getRemainSpaceLeft(){var spaceTaken=-getInnerPos();return g_temp.sideSpace-spaceTaken}function getCarouselWidth(){return g_functions.getElementSize(g_objCarouselWrapper).width}function getNumTilesInCarousel(){var width=getCarouselWidth();return getNumTilesInSpace(width)}function positionTiles(setHeight){if(!setHeight)var setHeight=!1;var totalWidth,objTiles=getTiles(),posx=0,maxHeight=0;return jQuery.each(objTiles,function(c,a){a=jQuery(a),g_functions.placeElement(a,posx,0);var b=g_functions.getElementSize(a);posx+=b.width+g_options.carousel_space_between_tiles,maxHeight=Math.max(maxHeight,b.height),c==objTiles.length-1&&(totalWidth=b.right)}),g_objInner.width(totalWidth),maxHeight+=2*g_options.carousel_padding,!0===setHeight&&(g_objInner.height(maxHeight),g_objCarouselWrapper.height(maxHeight)),scrollToTile(g_temp.numCurrent,!1),totalWidth}function validateTileNum(numTile){if(numTile>getTiles().length-1)throw new Error("Wrogn tile number: "+numTile)}function addTiles(numTiles,dir){if("left"==dir)var anchorTile=getFirstTile();else var anchorTile=getLastTile();var arrNewTiles=getTileClones(anchorTile,numTiles,"left"==dir?"prev":"next");jQuery.each(arrNewTiles,function(b,a){"left"==dir?g_objInner.prepend(a):g_objInner.append(a),g_objWrapper.trigger(g_temp.eventSizeChange,a),g_objTileDesign.loadTileImage(a)})}function removeTiles(numTilesToRemove,direction){validateTileNum(numTiles);for(var arrTiles=getTiles(),numTiles=arrTiles.length,i=0;i<numTilesToRemove;i++)"left"==direction?jQuery(arrTiles[i]).remove():jQuery(arrTiles[numTiles-1-i]).remove()}function setInnerPos(pos){var objCss={left:pos+"px"};g_objInner.css(objCss)}function scrollToTile(numTile,isAnimation,isShort){if(void 0===isAnimation){var isAnimation=!0;if(g_objInner.is(":animated"))return!0}var objTile=getTile(numTile),objCss={left:-g_functions.getElementSize(objTile).left+g_options.carousel_padding+"px"};if(!0===isAnimation){var duration=g_options.carousel_scroll_duration,easing=g_options.carousel_scroll_easing;!0===isShort&&(duration=g_temp.scrollShortDuration,easing=g_temp.scrollShortEasing),g_objInner.stop(!0).animate(objCss,{duration:duration,easing:easing,queue:!1,complete:function(){g_temp.numCurrent=numTile,fillSidesWithTiles(!0)}})}else g_temp.numCurrent=numTile,g_objInner.css(objCss)}function getNeerestTileNum(){var innerPos=-getInnerPos(),numTiles=getNumTilesInSpace(innerPos),tile1Pos=g_functions.getElementSize(getTile(numTiles)).left,tile2Pos=g_functions.getElementSize(getTile(numTiles+1)).left;return Math.abs(tile1Pos-innerPos)<Math.abs(tile2Pos-innerPos)?numTiles:numTiles+1}function scrollToNeerestTile(){var tileNum=getNeerestTileNum();scrollToTile(tileNum,!0,!0)}function fillSidesWithTiles(){var spaceLeft=getRemainSpaceLeft(),spaceRight=getRemainSpaceRight(),numItemsLeft=0,numItemsRight=0,numItemsRemoveLeft=0,numItemsRemoveRight=0,numTiles=getNumTiles();if(spaceLeft>g_temp.spaceActionSize)numItemsLeft=getNumTilesInSpace(spaceLeft),addTiles(numItemsLeft,"left"),g_temp.numCurrent+=numItemsLeft;else if(spaceLeft< -g_temp.spaceActionSize){var numItemsRemoveLeft=getNumTilesInSpace(Math.abs(spaceLeft));removeTiles(numItemsRemoveLeft,"left"),g_temp.numCurrent-=numItemsRemoveLeft}if(spaceRight>g_temp.spaceActionSize?(numItemsRight=getNumTilesInSpace(spaceRight),addTiles(numItemsRight,"right")):spaceRight< -g_temp.spaceActionSize&&(numItemsRemoveRight=getNumTilesInSpace(Math.abs(spaceRight)),removeTiles(numItemsRemoveRight,"right")),numItemsRemoveRight>numTiles)throw new Error("Can't remove more then num tiles");var isPositioned=!1;return(numItemsLeft||numItemsRight||numItemsRemoveLeft||numItemsRemoveRight)&&(positionTiles(),isPositioned=!0),isPositioned}function positionElements(isFirstTime){g_functions.placeElement(g_objInner,0,g_options.carousel_padding),fillSidesWithTiles()}function autoplayStep(){"left"==g_options.carousel_autoplay_direction?t.scrollRight(1):t.scrollLeft(1)}function onTouchStart(event){if(!0==g_temp.touchActive)return!0;g_temp.touchActive=!0,t.pauseAutoplay(),g_temp.startTime=jQuery.now(),g_temp.startMousePos=getMousePos(event),g_temp.startInnerPos=getInnerPos(),g_temp.lastTime=g_temp.startTime,g_temp.lastMousePos=g_temp.startMousePos,g_functions.storeEventData(event,g_temp.storedEventID)}function onTouchMove(event){if(!1==g_temp.touchActive)return!0;g_functions.updateStoredEventData(event,g_temp.storedEventID),event.preventDefault();var scrollDir=null;if(!0==g_options.carousel_vertical_scroll_ondrag&&(scrollDir=g_functions.handleScrollTop(g_temp.storedEventID)),"vert"===scrollDir)return!0;g_temp.lastMousePos=getMousePos(event);var diff=g_temp.lastMousePos-g_temp.startMousePos,innerPos=g_temp.startInnerPos+diff,direction=diff>0?"prev":"next",innerSize=g_functions.getElementSize(g_objInner).width;innerPos>0&&"prev"==direction&&(innerPos/=3),innerPos< -innerSize&&"next"==direction&&(innerPos=g_temp.startInnerPos+diff/3),setInnerPos(innerPos)}function onTouchEnd(event){if(!1==g_temp.touchActive)return!0;g_temp.touchActive=!1,scrollToNeerestTile(),t.unpauseAutoplay()}function onMouseEnter(event){if(!1==g_options.carousel_autoplay_pause_onhover)return!0;!0==g_temp.isPlayMode&& !1==g_temp.isPaused&&t.pauseAutoplay()}function onMouseLeave(event){if(!1==g_options.carousel_autoplay_pause_onhover)return!0;t.unpauseAutoplay()}function initEvents(){g_objTileDesign.initEvents(),g_objCarouselWrapper.bind("mousedown touchstart",onTouchStart),jQuery("body").bind("mousemove touchmove",onTouchMove),jQuery(window).add("body").bind("mouseup touchend",onTouchEnd),g_objCarouselWrapper.hover(onMouseEnter,onMouseLeave)}function isApproveTileClick(){var passedTime=g_temp.lastTime-g_temp.startTime,passedDistanceAbs=Math.abs(g_temp.lastMousePos-g_temp.startMousePos);return!(passedTime>300)&&!(passedDistanceAbs>30)}this.startAutoplay=function(){g_temp.isPlayMode=!0,g_temp.isPaused=!1,g_objThis.trigger(t.events.START_PLAY),g_temp.handle&&clearInterval(g_temp.handle),g_temp.handle=setInterval(autoplayStep,g_options.carousel_autoplay_timeout)},this.unpauseAutoplay=function(){if(!1==g_temp.isPlayMode|| !1==g_temp.isPaused)return!0;t.startAutoplay()},this.pauseAutoplay=function(){if(!1==g_temp.isPlayMode)return!0;g_temp.isPaused=!0,g_temp.handle&&clearInterval(g_temp.handle),g_objThis.trigger(t.events.PAUSE_PLAY)},this.stopAutoplay=function(){if(!1==g_temp.isPlayMode)return!0;g_temp.isPaused=!1,g_temp.isPlayMode=!1,g_temp.handle&&clearInterval(g_temp.handle),g_objThis.trigger(t.events.STOP_PLAY)},this.destroy=function(){g_temp.handle&&clearInterval(g_temp.handle),g_objThis.off(t.events.START_PLAY),g_objThis.off(t.events.STOP_PLAY),g_objCarouselWrapper.unbind("mousedown"),g_objCarouselWrapper.unbind("touchstart"),jQuery("body").unbind("mousemove"),jQuery("body").unbind("touchmove"),jQuery(window).add("body").unbind("mouseup").unbind("touchend"),g_objCarouselWrapper.off("mouseenter").off("mouseleave"),g_objTileDesign.destroy()},this.init=function(b,c,a){a&&this.setMaxWidth(a),init(b,c)},this.setMaxWidth=function(a){g_temp.carouselMaxWidth=a},this.setHtml=function(a){setHtml(a)},this.getElement=function(){return g_objCarouselWrapper},this.getObjTileDesign=function(){return g_objTileDesign},this.getEstimatedHeight=function(){return g_options.tile_height+2*g_options.carousel_padding},this.run=function(){run()},this.scrollRight=function(a){if(!a||"object"==typeof a)var a=g_options.carousel_navigation_numtiles;var c=getNumTilesInCarousel();a>c&&(a=c);var b=g_temp.numCurrent-a;b<=0&&(b=0),scrollToTile(b)},this.scrollLeft=function(a){if(!a||"object"==typeof a)var a=g_options.carousel_navigation_numtiles;var c=getNumTilesInCarousel();a>c&&(a=c);var d=getNumTiles(),b=g_temp.numCurrent+a;b>=d&&(b=d-1),scrollToTile(b)},this.setScrollLeftButton=function(a){g_functions.setButtonMobileReady(a),g_functions.setButtonOnClick(a,t.scrollLeft)},this.setScrollRightButton=function(a){g_functions.setButtonMobileReady(a),g_functions.setButtonOnClick(a,t.scrollRight)},this.setPlayPauseButton=function(a){g_functions.setButtonMobileReady(a),!0==g_temp.isPlayMode&& !1==g_temp.isPaused&&a.addClass("ug-pause-icon"),g_objThis.on(t.events.START_PLAY,function(){a.addClass("ug-pause-icon")}),g_objThis.on(t.events.STOP_PLAY,function(){a.removeClass("ug-pause-icon")}),g_functions.setButtonOnClick(a,function(){!1==g_temp.isPlayMode|| !0==g_temp.isPaused?t.startAutoplay():t.stopAutoplay()})}}function UGLoadMore(){jQuery(this);var g_objWrapper,g_objButton,g_objLoader,g_objError,g_objGallery,g_gallery=new UniteGalleryMain;new UGFunctions;var g_temp={isInited:!1},g_options={loadmore_container:"ug_loadmore_wrapper"};function initObjects(){if(0==(g_objWrapper=jQuery("#"+g_options.loadmore_container)).length||0==(g_objButton=g_objWrapper.find(".ug-loadmore-button")).length||0==(g_objLoader=g_objWrapper.find(".ug-loadmore-loader")).length||0==(g_objError=g_objWrapper.find(".ug-loadmore-error")).length)return!1;g_temp.isInited=!0}function showLoadmore(){g_objWrapper.show()}function onLoadmoreClick(){g_objButton.hide(),g_objLoader.show();var data={numitems:g_gallery.getNumItems()};g_gallery.ajaxRequest("front_loadmore",data,function(a){g_objLoader.hide();var b=a.html_items,c=a.show_loadmore;!0==c?(g_objButton.blur().show(),g_objLoader.hide()):g_objWrapper.hide(),g_gallery.addItems(b)},function(a){a="Ajax Error!"+a,g_objLoader.hide(),g_objError.show(),g_objError.html(a)})}function initEvents(){g_gallery.onEvent("tiles_first_placed",showLoadmore),g_objButton.click(onLoadmoreClick)}this.events={},this.destroy=function(){if(!1==g_temp.isInited)return!1},this.init=function(a,b){if(g_objGallery=jQuery(g_gallery=a),g_options=jQuery.extend(g_options,b),initObjects(),!1==g_temp.isInited)return trace("load more not inited, something is wrong"),!1;initEvents()}}function UGTabs(){jQuery(this);var g_objTabs,g_objSelect,g_objGallery,g_gallery=new UniteGalleryMain;new UGFunctions;var g_options={tabs_type:"tabs",tabs_container:"#ug_tabs",tabs_class_selected:"ug-tab-selected"};function initTabs(gallery,customOptions){g_objGallery=jQuery(g_gallery=gallery),g_options=jQuery.extend(g_options,customOptions),"select"==g_options.tabs_type?g_objSelect=jQuery(g_options.tabs_container):g_objTabs=jQuery(g_options.tabs_container+" .ug-tab")}function runTabs(){initEvents()}function requestGalleryItems(catid){g_gallery.requestNewItems(catid)}function onTabClick(){var classSelected=g_options.tabs_class_selected,objTab=jQuery(this);if(objTab.hasClass(classSelected))return!0;g_objTabs.not(objTab).removeClass(classSelected),objTab.addClass(classSelected);var catID=objTab.data("catid");if(!catID)return!0;requestGalleryItems(catID)}function onSelectChange(){var catID=jQuery(this).val();if(!catID)return!0;requestGalleryItems(catID)}function initEvents(){"select"==g_options.tabs_type?g_objSelect.change(onSelectChange):g_objTabs.click(onTabClick)}this.events={},this.destroy=function(){g_objSelect&&g_objSelect.off("change"),g_objTabs&&g_objTabs.off("click")},this.init=function(a,b){initTabs(a,b)},this.run=function(){runTabs()}}function UG_API(gallery){var t=this;jQuery(t);var g_objGallery,g_gallery=new UniteGalleryMain,g_arrEvents=[];function convertItemDataForOutput(item){var output={index:item.index,title:item.title,description:item.description,urlImage:item.urlImage,urlThumb:item.urlThumb},addData=item.objThumbImage.data();for(var key in addData){switch(key){case"image":case"description":continue}output[key]=addData[key]}return output}g_gallery=gallery,g_objGallery=jQuery(gallery),this.events={API_INIT_FUNCTIONS:"api_init",API_ON_EVENT:"api_on_event"},this.on=function(b,a,c){switch(!0!==c&&g_arrEvents.push({event:b,func:a}),b){case"item_change":g_objGallery.on(g_gallery.events.ITEM_CHANGE,function(){var b=convertItemDataForOutput(g_gallery.getSelectedItem());a(b.index,b)});break;case"resize":g_objGallery.on(g_gallery.events.SIZE_CHANGE,a);break;case"enter_fullscreen":g_objGallery.on(g_gallery.events.ENTER_FULLSCREEN,a);break;case"exit_fullscreen":g_objGallery.on(g_gallery.events.EXIT_FULLSCREEN,a);break;case"play":g_objGallery.on(g_gallery.events.START_PLAY,a);break;case"stop":g_objGallery.on(g_gallery.events.STOP_PLAY,a);break;case"pause":g_objGallery.on(g_gallery.events.PAUSE_PLAYING,a);break;case"continue":g_objGallery.on(g_gallery.events.CONTINUE_PLAYING,a);break;case"open_lightbox":g_objGallery.on(g_gallery.events.OPEN_LIGHTBOX,a);break;case"close_lightbox":g_objGallery.on(g_gallery.events.CLOSE_LIGHTBOX,a);break;default:console&&console.log("wrong api event: "+b)}g_objGallery.trigger(t.events.API_ON_EVENT,[b,a])},this.play=function(){g_gallery.startPlayMode()},this.stop=function(){g_gallery.stopPlayMode()},this.togglePlay=function(){g_gallery.togglePlayMode()},this.enterFullscreen=function(){g_gallery.toFullScreen()},this.exitFullscreen=function(){g_gallery.exitFullScreen()},this.toggleFullscreen=function(){g_gallery.toggleFullscreen()},this.resetZoom=function(){var a=g_gallery.getObjSlider();if(!a)return!1;a.zoomBack()},this.zoomIn=function(){var a=g_gallery.getObjSlider();if(!a)return!1;a.zoomIn()},this.zoomOut=function(){var a=g_gallery.getObjSlider();if(!a)return!1;a.zoomOut()},this.nextItem=function(){g_gallery.nextItem()},this.prevItem=function(){g_gallery.prevItem()},this.selectItem=function(a){g_gallery.selectItem(a)},this.resize=function(a,b){b?g_gallery.resize(a,b):g_gallery.resize(a)},this.getItem=function(a){var b=g_gallery.getItem(a);return convertItemDataForOutput(b)},this.getNumItems=function(){return g_gallery.getNumItems()},this.getNumCurrent=function(){return g_gallery.getCurrentNumItem()},this.reloadGallery=function(a){if(!a)var a={};g_gallery.run(null,a),g_arrEvents.map(function(a){t.on(a.event,a.func,!0)})},this.changeItems=function(a){g_gallery.changeItems(a)},this.addItems=function(a){g_gallery.addItems(a)},this.destroy=function(){g_gallery.destroy()},g_objGallery.trigger(t.events.API_INIT_FUNCTIONS,t)}jQuery.fn.unitegallery=function(a){var c="#"+jQuery(this).attr("id");if(!a)var a={};var b=new UniteGalleryMain;return b.run(c,a),void 0===window.ugArrGalleriesObjects&&(window.ugArrGalleriesObjects=[]),window.ugArrGalleriesObjects.push(b),new UG_API(b)}
